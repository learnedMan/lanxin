(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06891202"],{"05ac":function(e,t,a){"use strict";a("fee8")},"7d74":function(e,t,a){e.exports=a.p+"static/img/product.cc055642.png"},8190:function(e,t,a){},"8e42":function(e,t,a){},a057:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showpage,expression:"showpage==1"}]},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"产品名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),a("el-form-item",{attrs:{label:"产品类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.productoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.initcondition}},[e._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.adddata}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:e.dataList}},[a("el-table-column",{attrs:{label:"产品id",width:"100px",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"产品LOGO",width:"150px",align:"center",prop:"extra.logo","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:t.row.extra.logo||e.productavatar,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"产品名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"产品类型",align:"center",prop:"type","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"上次修改时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"280px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.editdata(t.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.deldata(t.row)}}}),a("Iconbutton",{attrs:{icontype:"appbbgl",label:"版本"},on:{fatherMethod:function(a){return e.changepage(t.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),2==e.showpage?a("Appversion",{attrs:{appname:e.appname,page2id:e.page2id}}):e._e(),a("el-dialog",{attrs:{width:"1200px","close-on-click-modal":!1,title:e.dialogTitle,top:"10vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{display:"flex"},attrs:{model:e.form,rules:e.rules}},[a("div",{staticClass:"fl",staticStyle:{width:"50%"}},[a("el-form-item",{attrs:{"label-width":"150px",label:"产品名称",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入产品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"产品类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.productoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{"label-width":"150px",label:"source_id",prop:"source_id"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入source_id"},model:{value:e.form.source_id,callback:function(t){e.$set(e.form,"source_id",t)},expression:"form.source_id"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"产品LOGO：",prop:"extra.logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.VUE_APP_BASE_API+"/api/upload/image",headers:e.importHeaders,name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess.bind(this,"logo"),"before-upload":e.beforeAvatarUpload}},[e.form.extra.logo?a("img",{staticClass:"avatar",attrs:{src:e.form.extra.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"150px",label:"深色背景Logo",prop:"extra.logo_dark"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.VUE_APP_BASE_API+"/api/upload/image",headers:e.importHeaders,name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess.bind(this,"logo_dark"),"before-upload":e.beforeAvatarUpload}},[e.form.extra.logo_dark?a("img",{staticClass:"avatar",attrs:{src:e.form.extra.logo_dark}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"150px",label:"产品简介",prop:"extra.introduction"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入产品简介",autosize:{minRows:4},type:"textarea"},model:{value:e.form.extra.introduction,callback:function(t){e.$set(e.form.extra,"introduction",t)},expression:"form.extra.introduction"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"评论控制",prop:"extra.comment_control"}},[a("el-radio-group",{model:{value:e.form.extra.comment_control,callback:function(t){e.$set(e.form.extra,"comment_control",t)},expression:"form.extra.comment_control"}},[a("el-radio",{attrs:{label:"0"}},[e._v("先审后发")]),a("el-radio",{attrs:{label:"1"}},[e._v("先发后审")]),a("el-radio",{attrs:{label:"2"}},[e._v("禁止评论")])],1)],1),a("el-form-item",{attrs:{"label-width":"150px",label:"热门搜索词",prop:"extra.hot_search"}},[e._l(e.form.extra.hot_search,(function(t,o){return a("el-tag",{key:t+o,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 新增")])],2)],1),a("div",{staticClass:"fr",staticStyle:{width:"50%"}},[a("el-form-item",{attrs:{"label-width":"150px",label:"个推秘钥",prop:"bluecore_mastersecret"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入个推秘钥"},model:{value:e.form.bluecore_mastersecret,callback:function(t){e.$set(e.form,"bluecore_mastersecret",t)},expression:"form.bluecore_mastersecret"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"蓝核APPkey",prop:"bluecore_appkey"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入蓝核APPkey"},model:{value:e.form.bluecore_appkey,callback:function(t){e.$set(e.form,"bluecore_appkey",t)},expression:"form.bluecore_appkey"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"蓝核APPID",prop:"bluecore_appid"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入蓝核APPID"},model:{value:e.form.bluecore_appid,callback:function(t){e.$set(e.form,"bluecore_appid",t)},expression:"form.bluecore_appid"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"协议版本",prop:"extra.policy.version"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入（版本由数字与点组成，如1.0.1）"},on:{input:function(t){return e.updateView(t)}},model:{value:e.form.extra.policy.version,callback:function(t){e.$set(e.form.extra.policy,"version",t)},expression:"form.extra.policy.version"}}),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"},{name:"show",rawName:"v-show",value:"add"!=e.dialogType,expression:"dialogType!='add'"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.innerVisible=!0}}},[e._v("查看历史版本")])],1),a("el-form-item",{attrs:{"label-width":"150px",label:"弹窗详情",prop:"extra.policy.intro"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入",autosize:{minRows:4},type:"textarea"},on:{input:function(t){return e.updateView(t)}},model:{value:e.form.extra.policy.intro,callback:function(t){e.$set(e.form.extra.policy,"intro",t)},expression:"form.extra.policy.intro"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"用户协议链接",prop:"extra.policy.privacy_policy"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入链接"},on:{input:function(t){return e.updateView(t)}},model:{value:e.form.extra.policy.privacy_policy,callback:function(t){e.$set(e.form.extra.policy,"privacy_policy",t)},expression:"form.extra.policy.privacy_policy"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"隐私政策链接",prop:"extra.policy.user_policy"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入链接"},on:{input:function(t){return e.updateView(t)}},model:{value:e.form.extra.policy.user_policy,callback:function(t){e.$set(e.form.extra.policy,"user_policy",t)},expression:"form.extra.policy.user_policy"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"是否开启社区",prop:"extra.enable_community"}},[a("el-radio-group",{model:{value:e.form.extra.enable_community,callback:function(t){e.$set(e.form.extra,"enable_community",t)},expression:"form.extra.enable_community"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{"label-width":"150px",label:"社区评论设置",prop:"extra.community_comment"}},[a("el-radio-group",{model:{value:e.form.extra.community_comment,callback:function(t){e.$set(e.form.extra,"community_comment",t)},expression:"form.extra.community_comment"}},[a("el-radio",{attrs:{label:"0"}},[e._v("先审后发")]),a("el-radio",{attrs:{label:"1"}},[e._v("先发后审")]),a("el-radio",{attrs:{label:"2"}},[e._v("禁止评论")])],1)],1)],1)]),a("el-dialog",{attrs:{width:"1000px",title:"历史版本",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.innertableData,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:""}},[a("el-table-column",{attrs:{prop:"version",align:"center",label:"协议版本"}}),a("el-table-column",{attrs:{align:"center",prop:"intro",label:"弹窗详情"}}),a("el-table-column",{attrs:{align:"center",prop:"user_policy",label:"user_policy"}}),a("el-table-column",{attrs:{align:"center",prop:"privacy_policy",label:"隐私政策协议接口"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1)],1)},r=[],i=(a("ea69"),a("053b"),a("77ad"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appversion"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"终端"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryParams.platform,callback:function(t){e.$set(e.queryParams,"platform",t)},expression:"queryParams.platform"}},e._l(e.platformoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"版本："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入版本号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.version_code,callback:function(t){e.$set(e.queryParams,"version_code",t)},expression:"queryParams.version_code"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"info",size:"mini"},on:{click:e.initcondition}},[e._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.adddata}},[e._v("新增")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.back}},[e._v("返回上一级")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:e.dataList}},[a("el-table-column",{attrs:{label:"ID",width:"100px",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"应用名称",width:"100px",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"应用LOGO",width:"150px",align:"center",prop:"logo","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:e.row.logo,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"终端",align:"center",prop:"platform","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"版本",align:"center",prop:"version_code","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"下载地址",align:"center",prop:"url","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.editdata(t.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.deldata(t.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{width:"800px","close-on-click-modal":!1,title:e.dialogTitle,top:"2vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{"label-width":"150px",label:"应用名称：",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{disabled:"",autocomplete:"off",placeholder:"请输入产品名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"应用Logo:",prop:"logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.VUE_APP_BASE_API+"/api/upload/image",headers:e.importHeaders,name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess.bind(this,"logo"),"before-upload":e.beforeAvatarUpload}},[e.form.logo?a("img",{staticClass:"avatar",attrs:{src:e.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"el-form-item":"","label-width":"150px",label:"终端：",prop:"platform"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.platform,callback:function(t){e.$set(e.form,"platform",t)},expression:"form.platform"}},e._l(e.platformoptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{"label-width":"150px",label:"WEB"==e.form.platform?"web版本":"Android"==e.form.platform?"安卓版本：":"ios版本：",prop:"version_code"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入产品名称"},model:{value:e.form.version_code,callback:function(t){e.$set(e.form,"version_code",t)},expression:"form.version_code"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"应用介绍：",prop:"intro"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入应用介绍",autosize:{minRows:4},type:"textarea"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"新特性：",prop:"new_features"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{autocomplete:"off",placeholder:"请输入应用介绍",autosize:{minRows:4},type:"textarea"},model:{value:e.form.new_features,callback:function(t){e.$set(e.form,"new_features",t)},expression:"form.new_features"}})],1),"WEB"!=e.form.platform?a("el-form-item",{attrs:{"label-width":"150px",label:"是否强制更新：",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:0}},[e._v("不启用")]),a("el-radio",{attrs:{label:1}},[e._v("不强更")]),a("el-radio",{attrs:{label:2}},[e._v("强更")])],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Android"!=e.form.platform,expression:"form.platform!='Android'"}],attrs:{"label-width":"150px",label:"WEB"==e.form.platform?"链接：":"APP Store链接：",prop:"url"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),"Android"==e.form.platform?a("el-form-item",{attrs:{"label-width":"150px",label:"Android APK包：",prop:"url2"}},[e.dialogFormVisible?a("uploadfile",{model:{value:e.form.url2,callback:function(t){e.$set(e.form,"url2",t)},expression:"form.url2"}}):e._e()],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1)],1)}),l=[],s=(a("513c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{staticStyle:{width:"500px"},attrs:{autocomplete:"off",disabled:"",placeholder:""},model:{value:e.getvalue,callback:function(t){e.getvalue=t},expression:"getvalue"}}),a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline","margin-left":"20px"},attrs:{action:e.actionUrl,headers:e.uploadHeader,name:"image","before-upload":e.handleBeforeUpload,"before-remove":e.beforeRemove,"on-change":e.onChange,limit:2,"file-list":e.fileList,"on-success":e.handleUploadSuccess}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"small",type:"primary"}},[e._v("新增")])],1)],1)}),n=[],p=(a("e35a"),a("0d7a"),{props:{value:String},data:function(){return{fileList:[],getvalue:this.value}},created:function(){this.getvalue&&(this.fileList[0]={},this.fileList[0].url=this.getvalue,this.fileList[0].name=this.getvalue.split("/")[this.getvalue.split("/").length-1])},computed:{actionUrl:function(){return this.imgurl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}}},methods:{beforeRemove:function(){this.$emit("input",""),this.getvalue=""},handleBeforeUpload:function(e){},onChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},handleUploadSuccess:function(e,t,a){e.status_code>=200&&e.status_code<300?(this.$message.success("上传成功!"),this.$emit("input",e.path),this.getvalue=e.path):(this.$message.error(e.message),a.length=0)}}}),c=p,u=a("cba8"),m=Object(u["a"])(c,s,n,!1,null,"918c2c48",null),d=m.exports,f=a("0fea"),h={name:"appversion",components:{uploadfile:d},props:{page2id:{type:Number,default:0},appname:{type:String,default:""}},data:function(){var e=sessionStorage.getItem("token");return{importHeaders:{Authorization:e},statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],platformoptions:[{value:"ANDROID",label:"ANDROID"},{value:"IOS",label:"IOS"},{value:"WEB",label:"WEB"}],loading:!1,form:{},dataList:[],rules:{logo:[{required:!0,message:"请选择应用logo",trigger:"blur"}],platform:[{required:!0,message:"请选择终端",trigger:"blur"}],version_code:[{required:!0,message:"请选择app版本",trigger:"blur"}],new_features:[{required:!0,message:"请输入新特性",trigger:"blur"}],status:[{required:!0,message:"请选择是否要强制更新",trigger:"blur"}]},queryParams:{page:1,pageSize:10,version_code:"",platform:"",product_id:this.page2id},dialogTitle:"",dialogType:"",total:0,dialogFormVisible:!1}},created:function(){this.initForm(),this.getList()},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},methods:{initcondition:function(){this.queryParams.version_code="",this.queryParams.platform=""},handleQuery:function(){console.log(this.page2id),this.loading=!0,this.queryParams.page=1,this.getList()},handleAvatarSuccess:function(e,t){console.log(t),this.form[e]=t.path,this.$forceUpdate()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<20;return t||this.$message.error("上传头像图片大小不能超过 20MB!"),t},beforeRemove:function(){this.form.url2=""},back:function(){this.$parent.showpage=1},getList:function(){var e=this;this.loading=!0,Object(f["Yb"])(this.queryParams).then((function(t){e.loading=!1,e.dataList=t.data,e.total=t.total}))},deldata:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除id为"+e.id+"的版本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["U"])(e.id).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={product_id:this.page2id,name:this.appname,platform:"Android",version_code:"",logo:"",status:0,url:"",url2:"",apk:"",new_features:"",intro:""}},adddata:function(){this.initForm(),this.dialogTitle="新增版本",this.dialogType="add",this.dialogFormVisible=!0},editdata:function(e){this.initForm(),this.dialogTitle="编辑版本",this.dialogType="edit",this.form=JSON.parse(JSON.stringify(e)),"Android"==this.form.platform&&(this.form.url2=this.form.url,this.form.url=""),this.dialogFormVisible=!0},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.form));"Android"==a.platform&&(a.url=a.url2),"edit"==e.dialogType?Object(f["jb"])(a.id,a).then((function(t){e.$message({message:"修改成功",type:"success"}),e.dialogFormVisible=!1,e.getList()})):Object(f["n"])(a).then((function(t){e.$message({message:"新增成功",type:"success"}),e.dialogFormVisible=!1,e.getList()}))}}))}}},b=h,g=(a("d5e6"),a("05ac"),Object(u["a"])(b,i,l,!1,null,"9aac192e",null)),v=g.exports,y={name:"product",components:{Appversion:v},data:function(){var e=sessionStorage.getItem("token");return{inputVisible:!1,inputValue:"",showpage:1,page2id:0,appname:"",importHeaders:{Authorization:e},productavatar:a("7d74"),innerVisible:!1,innertableData:[],queryParams:{page:1,pageSize:10,name:"",type:""},loading:!0,dataList:[],total:0,productoptions:[{value:"app",label:"App"},{value:"web",label:"网站"},{value:"wap",label:"Wap"},{value:"wechat",label:"微信"},{value:"weibo",label:"微博"},{value:"other",label:"其他"}],watermarkoptions:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"}],dialogFormVisible:!1,form:{name:"",type:"",source_id:"",extra:{logo:"",logo_dark:"",introduction:"",comment_control:"0",community_comment:"0",enable_community:"1",hot_search:[]}},rules:{name:[{required:!0,message:"请输入产品姓名",trigger:"blur"}],type:[{required:!0,message:"请选择产品类型",trigger:"blur"}],source_id:[{required:!0,message:"请输入source_id",trigger:"blur"}],"extra.logo":[{required:!0,message:"请选择产品logo",trigger:"blur"}],"extra.policy.version":[{required:!0,message:"请输入协议版本",trigger:"blur"}],"extra.policy.intro":[{required:!0,message:"请输入弹窗详情",trigger:"blur"}],"extra.policy.privacy_policy":[{required:!0,message:"请输入用户协议链接",trigger:"blur"}],"extra.policy.user_policy":[{required:!0,message:"请输入隐私政策链接",trigger:"blur"}]},dialogType:"add",dialogTitle:""}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},created:function(){this.getList(),this.initForm()},methods:{handleClose:function(e){this.form.extra.hot_search.splice(this.form.extra.hot_search.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&(this.form.extra.hot_search||(this.form.extra.hot_search=[]),this.form.extra.hot_search.push(e)),this.inputVisible=!1,this.inputValue=""},updateView:function(e){this.$forceUpdate()},changepage:function(e){this.page2id=e.id,this.appname=e.name,this.showpage=2},handleAvatarSuccess:function(e,t){this.form.extra[e]=t.path},beforeAvatarUpload:function(e){var t=e.size/1024/1024<20;return t||this.$message.error("上传头像图片大小不能超过 20MB!"),t},initcondition:function(){this.queryParams.name="",this.queryParams.type=""},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var e=this,t=JSON.parse(JSON.stringify(this.queryParams));this.removePropertyOfNull(t),Object(f["Xb"])(t).then((function(t){e.loading=!1,e.dataList=t.data,e.total=t.total}))},adddata:function(){this.initForm(),this.dialogTitle="新增产品",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",type:"",bluecore_mastersecret:"",bluecore_appkey:"",bluecore_appid:"",extra:{logo:"",logo_dark:"",introduction:"",comment_control:"0",community_comment:"0",enable_community:"1",hot_search:[],user_settings:{deny_register:"0",deny_modify:"0",deny_OAuth:"0"},policy:{version:"",intro:"",privacy_policy:"",user_policy:"",time:""}}}},editdata:function(e){this.initForm(),this.dialogTitle="编辑产品",this.dialogType="edit",this.form=JSON.parse(JSON.stringify(e)),this.form.extra.policy_history&&(this.innertableData=this.form.extra.policy_history.slice(0,5)),console.log(this.form),this.form.extra.policy||(this.form.extra.policy={},this.form.extra.policy={version:"",intro:"",privacy_policy:"",user_policy:"",time:""}),this.form.extra.user_settings||(this.form.extra.user_settings={},this.form.extra.user_settings={deny_register:"0",deny_modify:"0",deny_OAuth:"0"}),this.dialogFormVisible=!0},deldata:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除id为"+e.id+"的产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["V"])(e.id).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t)if("edit"==e.dialogType){var a=JSON.parse(JSON.stringify(e.form));console.log(a),a.extra.policy.time=(new Date).getTime(),Object(f["kb"])(a.id,a).then((function(t){e.$message({message:"修改成功",type:"success"}),e.dialogFormVisible=!1,e.getList()}))}else{a=JSON.parse(JSON.stringify(e.form));e.removePropertyOfNull(a),a.extra.policy.time=(new Date).getTime(),console.log(a),Object(f["o"])(a).then((function(t){e.$message({message:"新建成功",type:"success"}),e.dialogFormVisible=!1,e.getList()}))}}))}}},x=y,_=(a("ffd9"),a("fd29"),Object(u["a"])(x,o,r,!1,null,"68c35ffa",null));t["default"]=_.exports},b846:function(e,t,a){},d5e6:function(e,t,a){"use strict";a("8190")},fd29:function(e,t,a){"use strict";a("8e42")},fee8:function(e,t,a){},ffd9:function(e,t,a){"use strict";a("b846")}}]);