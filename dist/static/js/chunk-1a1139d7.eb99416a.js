(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a1139d7"],{"13cc":function(t,e,a){"use strict";a.d(e,"B",(function(){return n})),a.d(e,"f",(function(){return i})),a.d(e,"u",(function(){return s})),a.d(e,"A",(function(){return l})),a.d(e,"r",(function(){return u})),a.d(e,"k",(function(){return c})),a.d(e,"q",(function(){return d})),a.d(e,"t",(function(){return p})),a.d(e,"e",(function(){return f})),a.d(e,"x",(function(){return m})),a.d(e,"b",(function(){return b})),a.d(e,"h",(function(){return h})),a.d(e,"n",(function(){return g})),a.d(e,"w",(function(){return v})),a.d(e,"a",(function(){return y})),a.d(e,"i",(function(){return w})),a.d(e,"o",(function(){return _})),a.d(e,"z",(function(){return O})),a.d(e,"d",(function(){return k})),a.d(e,"j",(function(){return j})),a.d(e,"p",(function(){return x})),a.d(e,"C",(function(){return P})),a.d(e,"g",(function(){return q})),a.d(e,"v",(function(){return S})),a.d(e,"m",(function(){return $})),a.d(e,"y",(function(){return F})),a.d(e,"c",(function(){return L})),a.d(e,"s",(function(){return I})),a.d(e,"l",(function(){return A}));var r=a("b775"),o=a("b60c");function n(t){return Object(r["a"])({url:"/api/broadcasts",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/api/broadcasts",method:"post",data:t})}function s(t,e){return Object(r["a"])({url:"/api/broadcasts/".concat(t),method:"patch",data:e})}function l(t){return Object(r["a"])({url:"/api/broadcasts/".concat(t),method:"get"})}function u(t){return Object(r["a"])({url:"/api/broadcasts/".concat(t),method:"delete"})}function c(t,e){return Object(r["a"])({url:"/api/broadcasts/".concat(t),method:"patch",data:e})}function d(t){return Object(r["a"])({url:"/api/broadcastStreams/".concat(t),method:"delete"})}function p(t,e){return Object(r["a"])({url:"/api/broadcastStreams/".concat(t),method:"patch",data:e})}function f(t){return Object(r["a"])({url:"/api/broadcastStreams",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/api/ad_places",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/api/ad_places",method:"post",data:t})}function h(t,e){return Object(r["a"])({url:"/api/ad_places/".concat(t),method:"patch",data:e})}function g(t){return Object(r["a"])({url:"/api/product_versions/".concat(t),method:"delete"})}function v(t){return Object(r["a"])({url:"/api/ads",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/api/ads",method:"post",data:t})}function w(t,e){return Object(r["a"])({url:"/api/ads/".concat(t),method:"patch",data:e})}function _(t){return Object(r["a"])({url:"/api/ads/".concat(t),method:"delete"})}function O(t){return Object(r["a"])({url:"/api/push",method:"get",params:t})}function k(t){return Object(r["a"])({url:"/api/push",method:"post",data:t})}function j(t,e){return Object(r["a"])({url:"/api/push/".concat(t),method:"patch",data:e})}function x(t){return Object(r["a"])({url:"/api/push/".concat(t),method:"delete"})}function P(t){return Object(o["a"])({url:"/internal/social/topic/list",method:"post",params:t})}function q(t){return Object(o["a"])({url:"/internal/social/topic/add",method:"post",data:t})}function S(t){return Object(o["a"])({url:"/internal/social/topic/update",method:"post",data:t})}function $(t){return Object(o["a"])({url:"/internal/social/topic/del",method:"post",data:t})}function F(t){return Object(o["a"])({url:"/internal/social/classify/list",method:"post",params:t})}function L(t){return Object(o["a"])({url:"/internal/social/classify/add",method:"post",data:t})}function I(t){return Object(o["a"])({url:"/internal/social/classify/update",method:"post",data:t})}function A(t){return Object(o["a"])({url:"/internal/social/classify/del",method:"post",data:t})}},"51c2":function(t,e,a){},bbb4:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classmanage"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"所属产品："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"分类名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.keywords,callback:function(e){t.$set(t.queryParams,"keywords",e)},expression:"queryParams.keywords"}})],1),a("el-form-item",{attrs:{label:"是否启用："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.initcondition}},[t._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.adddata("")}}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList,"row-key":"name","tree-props":{children:"list"}}},[a("el-table-column",{attrs:{label:"分类id",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"分类名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"分类等级",align:"center",prop:"level","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("levelfilter")(e.row.level))+" ")]}}])}),a("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(e){return 2!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"240px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.is_end?a("Iconbutton",{attrs:{icontype:"xz",label:"新增"},on:{fatherMethod:function(a){return t.adddata(e.row.id)}}}):t._e(),a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.handleDelete(e.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"500px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"分类名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"分类图标",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.image?a("img",{staticClass:"avatar",attrs:{src:t.form.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"分类排序",prop:"sort"}},[a("el-input-number",{attrs:{controls:!1,autocomplete:"off"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否末级",prop:"is_end"}},[a("span",{staticStyle:{color:"red"}},[t._v("注意：选择后不可更改！")]),a("el-radio-group",{attrs:{disabled:!t.editfalg},model:{value:t.form.is_end,callback:function(e){t.$set(t.form,"is_end",e)},expression:"form.is_end"}},[a("el-radio",{staticStyle:{"margin-bottom":"10px"},attrs:{label:0}},[t._v("是(该分类作为末级，不可在此基础上创建子级)")]),a("el-radio",{attrs:{label:1}},[t._v("不是(该分类可创建子级，用户发帖对应子级)")])],1)],1),a("el-form-item",{attrs:{"el-form-item":"","label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(e){return 2!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1)],1)},o=[],n=(a("dbb3"),a("0fea")),i=a("13cc"),s={name:"classmanage",data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},radio:0,queryParams:{page:1,limit:9999,sourceId:0,keywords:"",status:2},editfalg:!1,product_id:0,productList:[],loading:!0,dataList:[],statusoptions:[{value:2,label:"全部"},{value:0,label:"启动"},{value:1,label:"禁用"}],dialogFormVisible:!1,form:{},rules:{name:[{required:!0,message:"请输入分类姓名",trigger:"blur"}],image:[{required:!0,message:"请选择分类图标",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]},dialogType:"add",dialogTitle:""}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},filters:{levelfilter:function(t){var e="";switch(t){case 1:e="一级";break;case 2:e="二级";break;default:e="级数别乱填";break}return e}},watch:{product_id:function(t){this.queryParams.sourceId=this.productList.filter((function(e){return e.id==t}))[0].source_id||0,this.getList()}},created:function(){this.getproductList(),this.initForm()},methods:{getproductList:function(){var t=this;Object(n["Xb"])({}).then((function(e){t.productList=e.data,t.product_id=t.productList[0].id}))},forceUpdate:function(){this.$forceUpdate()},handleAvatarSuccess:function(t,e,a){this.form.image=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},initcondition:function(){this.queryParams.page=1,this.queryParams.limit=10,this.queryParams.status=2,this.queryParams.keywords=""},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this,e=JSON.parse(JSON.stringify(this.queryParams));Object(i["y"])(e).then((function(e){t.loading=!1,t.dataList=e.data.list}))},statuschange:function(t){var e=this;Object(i["s"])(t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(t){this.initForm(),this.dialogTitle=t?"新增二级分类（id:"+t+")":"新增一级分类",this.form.pid=t||0,this.form.level=t?2:1,this.editfalg=!t,this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.editfalg=!1,this.form={pid:0,image:"",name:"",sort:0,status:0,is_end:0,level:2,sourceId:this.queryParams.sourceId}},editdata:function(t){this.initForm(),this.dialogTitle="编辑分类",this.dialogType="edit",this.form=JSON.parse(JSON.stringify(t)),this.dialogFormVisible=!0},handleDelete:function(t){var e=this,a={};a.id=t.id,a.sourceId=this.queryParams.sourceId,this.$confirm("此操作将永久删除ID为"+t.id+"的分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["l"])(a).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=t.form;Object(i["s"])(a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else{a=JSON.parse(JSON.stringify(t.form));Object(i["c"])(a).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}}))}}},l=s,u=(a("d0e3"),a("cba8")),c=Object(u["a"])(l,r,o,!1,null,null,null);e["default"]=c.exports},d0e3:function(t,e,a){"use strict";a("51c2")}}]);