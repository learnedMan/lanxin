(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-346120c5"],{"0ac9":function(e,t,a){"use strict";a("f107")},"87a1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-media-all"},[a("div",{staticClass:"search"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"媒资名称:",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),a("el-form-item",{attrs:{label:"所属订阅号:",prop:"source"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入所属订阅号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.source,callback:function(t){e.$set(e.queryParams,"source",t)},expression:"queryParams.source"}})],1),a("el-form-item",{attrs:{label:"创建日期:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleDateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%",overflow:"auto"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"稿件ID",align:"center",width:"80",prop:"id"}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"稿件封面",align:"center",prop:"id",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"80px",height:"45px"},attrs:{lazy:"",src:t.row.cover||e.useravatar,"preview-src-list":[t.row.cover||e.useravatar],fit:"contain"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{slot:"error",src:e.useravatar,alt:""},slot:"error"})])]}}],null,!1,4093483307)}),a("el-table-column",{attrs:{label:"稿件标题",align:"center",prop:"title","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticClass:"watch-detail-btn",attrs:{type:"text"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:"ckxq",label:"查看详情"},on:{fatherMethod:function(a){return e.handleWatch(t.row)}}}),a("Iconbutton",{attrs:{icontype:"fz",label:"复制"},on:{fatherMethod:function(a){return e.handleListCopy(t.row)}}})],1)]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{width:"80%",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialogRules}},[a("el-form-item",{attrs:{"label-width":"60px",label:"标题",prop:"title"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.form.title,callback:function(t){e.$set(e.dialog.form,"title",t)},expression:"dialog.form.title"}})],1),a("el-form-item",{attrs:{"label-width":"60px"}},[a("editor",{attrs:{disabled:""},model:{value:e.concent,callback:function(t){e.concent=t},expression:"concent"}})],1)],1)],1)],1)},n=[],l=a("5530"),r=(a("d3b7"),a("d81d"),a("cc48")),o=a("0fea"),s=a("9d3e"),c=a("156b"),u={name:"All-media",components:{VersionHistory:s["a"],Editor:c["a"]},data:function(){return{queryParams:{keyword:"",source:"",startdate:"",enddate:"",pageSize:50,page:1},concent:"",loading:!1,total:0,dateValue:"",typeOptions:[{label:"全部",value:""},{label:"微信",value:"wechat"},{label:"微博",value:"weibo"},{label:"媒体",value:"media"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData:[],useravatar:a("3f1e"),dialog:{show:!1,title:"详情",form:{title:"",concent:""}},dialogRules:{channel_id:{required:!0,message:"请选择栏目",trigger:"change"}},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},channelsList:[],selection:[],history:{show:!1,id:""}}},created:function(){this.getList(),this.getChannels()},methods:{handleDateChange:function(e){var t=e||["",""];this.queryParams.startdate=t[0],this.queryParams.enddate=t[1]},handleReset:function(){this.dateValue="",Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handleAdd:function(){this.$router.push({name:"Add-media",query:{redirect:"All-media"}})},handlePublish:function(){this.handleDialogShow()},getList:function(){var e=this;this.loading=!0,this.selection=[],this.tableData=[],Object(r["L"])(this.removePropertyOfNull(this.queryParams)).then((function(t){e.tableData=(t.data||[]).map((function(e){return Object(l["a"])({},e)})),e.total=t.total})).finally((function(){e.loading=!1}))},handleSelectionChange:function(e){this.selection=e.map((function(e){return e.id}))},handleListWatch:function(e){this.$router.push("/content/publicSentiment/watch-column?id=".concat(e.id,"&redirect=collect-article"))},handleListCopy:function(e){var t=this,a=e.id,i=e.title,n=a;Object(r["t"])({title:"[副本]".concat(i),hypertext_id:n}).then((function(e){var a=e.id,i=e.message;a?(t.getList(),t.$router.push({name:"Add-media",query:{id:a,redirect:"All-media"}}),t.$message.success("复制成功")):t.$message.warning(i)}))},handleEdit:function(e){var t=e.id,a=e.news;if(a.some((function(e){return 1===e.status})))return this.$message.warning("该文稿下存在已发布的新闻，请点击“一键下线”按钮下线所有新闻后再进行编辑");this.$router.push({name:"Add-media",query:{id:t,redirect:"All-media"}})},handlePreview:function(e){var t=e.id;this.$router.push({name:"Preview",query:{id:t,type:"scripts"}})},handleHistory:function(e){var t=e.id;this.history={show:!0,id:t}},handleWatch:function(e){var t=this,a=e.id;Object(r["K"])(a).then((function(e){t.dialog.show=!0,t.dialog.form.title=e.title,t.concent=e.content}))},handleListDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条稿件id为".concat(a,"的明细, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["z"])(a).then((function(){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.dialog.show=!1},getChannels:function(){var e=this;Object(o["Ib"])({with_special_channels:"topic"}).then((function(t){e.channelsList=t.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{disabled:!0})})),e.changeChannelName(e.channelsList)}))}}},d=u,h=(a("0ac9"),a("2877")),m=Object(h["a"])(d,i,n,!1,null,"02697567",null);t["default"]=m.exports},f107:function(e,t,a){}}]);