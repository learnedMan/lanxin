(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3568fa25"],{"0191":function(e,t,a){"use strict";a.d(t,"r",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"i",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"u",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return m})),a.d(t,"w",(function(){return p})),a.d(t,"s",(function(){return f})),a.d(t,"t",(function(){return b})),a.d(t,"x",(function(){return h})),a.d(t,"j",(function(){return g})),a.d(t,"f",(function(){return v})),a.d(t,"c",(function(){return x})),a.d(t,"h",(function(){return y})),a.d(t,"v",(function(){return w})),a.d(t,"n",(function(){return _})),a.d(t,"d",(function(){return k})),a.d(t,"b",(function(){return O})),a.d(t,"m",(function(){return j})),a.d(t,"q",(function(){return S})),a.d(t,"e",(function(){return $})),a.d(t,"p",(function(){return D})),a.d(t,"o",(function(){return N}));var r=a("b775"),n=a("b60c"),i=a("0385");a("2ab73");function l(e){return Object(r["a"])({url:"/api/refuseReasons",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/api/refuseReasons",method:"post",data:e})}function s(e,t){return Object(r["a"])({url:"/api/refuseReasons/".concat(e),method:"PATCH",data:t})}function c(e){return Object(r["a"])({url:"/api/refuseReasons/".concat(e),method:"delete"})}function u(){return Object(n["a"])({url:"/intranet/querySourceIdData",method:"get"})}function d(e){return Object(n["a"])({url:"/internal/feedback/pageList",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/internal/feedback/info",method:"get",params:e})}function p(e){return Object(n["a"])({url:"/internal/feedback/reply",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/internal/report/pageList",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/internal/report/info",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/internal/report/reply",method:"post",data:e})}function g(e){return Object(i["a"])({url:"/new/intranet/comment/listConsole",method:"post",data:e})}function v(e){return Object(i["a"])({url:"/new/intranet/comment/manage/".concat(e),method:"get"})}function x(e){return Object(i["a"])({url:"/new/intranet/comment/operate",method:"post",data:e})}function y(e){return Object(i["a"])({url:"/new/intranet/comment/noTalkUser",method:"post",data:e})}function w(e){return Object(i["a"])({url:"/new/intranet/comment/cancelNoTalkUser",method:"post",data:e})}function _(e){return Object(n["a"])({url:"/internal/baoliao/getList",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/internal/baoliao/modifyState",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/internal/baoliao/batchModifyState",method:"post",data:e})}function j(e){return Object(n["a"])({url:"/internal/baoliao/getData",method:"post",params:e})}function S(e){return Object(n["a"])({url:"/internal/social/post/list",method:"post",data:e})}function $(e){return Object(n["a"])({url:"/internal/social/post/verify",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/internal/social/post/Info",method:"post",params:e})}function N(e){return Object(r["a"])({url:"/api/operationLogs",method:"get",params:e})}},"13cc":function(e,t,a){"use strict";a.d(t,"B",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"u",(function(){return o})),a.d(t,"A",(function(){return s})),a.d(t,"r",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"t",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"x",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"h",(function(){return h})),a.d(t,"n",(function(){return g})),a.d(t,"w",(function(){return v})),a.d(t,"a",(function(){return x})),a.d(t,"i",(function(){return y})),a.d(t,"o",(function(){return w})),a.d(t,"z",(function(){return _})),a.d(t,"d",(function(){return k})),a.d(t,"j",(function(){return O})),a.d(t,"p",(function(){return j})),a.d(t,"C",(function(){return S})),a.d(t,"g",(function(){return $})),a.d(t,"v",(function(){return D})),a.d(t,"m",(function(){return N})),a.d(t,"y",(function(){return T})),a.d(t,"c",(function(){return C})),a.d(t,"s",(function(){return z})),a.d(t,"l",(function(){return q}));var r=a("b775"),n=a("b60c");function i(e){return Object(r["a"])({url:"/api/broadcasts",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/api/broadcasts",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function s(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"get"})}function c(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"delete"})}function u(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function d(e){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"delete"})}function m(e,t){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"patch",data:t})}function p(e){return Object(r["a"])({url:"/api/broadcastStreams",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/api/ad_places",method:"get",params:e})}function b(e){return Object(r["a"])({url:"/api/ad_places",method:"post",data:e})}function h(e,t){return Object(r["a"])({url:"/api/ad_places/".concat(e),method:"patch",data:t})}function g(e){return Object(r["a"])({url:"/api/product_versions/".concat(e),method:"delete"})}function v(e){return Object(r["a"])({url:"/api/ads",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/api/ads",method:"post",data:e})}function y(e,t){return Object(r["a"])({url:"/api/ads/".concat(e),method:"patch",data:t})}function w(e){return Object(r["a"])({url:"/api/ads/".concat(e),method:"delete"})}function _(e){return Object(r["a"])({url:"/api/push",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/api/push",method:"post",data:e})}function O(e,t){return Object(r["a"])({url:"/api/push/".concat(e),method:"patch",data:t})}function j(e){return Object(r["a"])({url:"/api/push/".concat(e),method:"delete"})}function S(e){return Object(n["a"])({url:"/internal/social/topic/list",method:"post",params:e})}function $(e){return Object(n["a"])({url:"/internal/social/topic/add",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/internal/social/topic/update",method:"post",data:e})}function N(e){return Object(n["a"])({url:"/internal/social/topic/del",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/internal/social/classify/list",method:"post",params:e})}function C(e){return Object(n["a"])({url:"/internal/social/classify/add",method:"post",data:e})}function z(e){return Object(n["a"])({url:"/internal/social/classify/update",method:"post",data:e})}function q(e){return Object(n["a"])({url:"/internal/social/classify/del",method:"post",data:e})}},2522:function(e,t,a){"use strict";a("c7b9")},"35ac":function(e,t,a){},3824:function(e,t,a){"use strict";a("dce4")},"3bbb":function(e,t,a){"use strict";a("35ac")},"44b5":function(e,t,a){},"45ab":function(e,t,a){},"46f0":function(e,t,a){"use strict";a("45ab")},"7d9b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-comment-verify",style:{padding:e.newsId?0:"30px"}},[a("search",{ref:"search",attrs:{lists:e.searchLists},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("div",{attrs:{slot:"action"},slot:"action"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"success",disabled:e.disabledBatchAction},on:{click:function(t){return e.batchAgreeOrRefused("approve")}}},[e._v("批量通过")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"warning",disabled:e.disabledBatchAction},on:{click:function(t){return e.batchAgreeOrRefused("reject")}}},[e._v("批量拒绝")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableDead,(function(t,r){return a("el-table-column",e._b({key:r,scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.prop])+" ")]}}],null,!0)},"el-table-column",[t,{align:"center"}],!1))})),a("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:t.row.noTalkUser?"hfjy":"jy",label:t.row.noTalkUser?"取消禁言":"禁言"},on:{fatherMethod:function(a){return e.handleMsgAction(t.row)}}}),1!=t.row.status?a("Iconbutton",{attrs:{icontype:"shtg",label:"通过"},on:{fatherMethod:function(a){return e.handleAgreeOrRefused(t.row,"approve")}}}):e._e(),2!=t.row.status?a("Iconbutton",{attrs:{icontype:"shjj",label:"拒绝"},on:{fatherMethod:function(a){return e.handleAgreeOrRefused(t.row,"reject")}}}):e._e()],1)]}}])})],2),a("div",{staticClass:"verify-page"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.page.total>0,expression:"page.total > 0"}],attrs:{total:e.page.total,page:e.search.pageNo,limit:e.search.pageSize},on:{"update:page":function(t){return e.$set(e.search,"pageNo",t)},"update:limit":function(t){return e.$set(e.search,"pageSize",t)},pagination:e.getList}})],1),a("el-dialog",{attrs:{width:"500px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"reply",attrs:{size:"mini",model:e.dialog.reply,rules:e.dialog.replyRules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"回复昵称",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入昵称"},model:{value:e.dialog.reply.nikeName,callback:function(t){e.$set(e.dialog.reply,"nikeName",t)},expression:"dialog.reply.nikeName"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"回复内容",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autocomplete:"off"},model:{value:e.dialog.reply.remark,callback:function(t){e.$set(e.dialog.reply,"remark",t)},expression:"dialog.reply.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{width:"500px",title:e.addDialog.title,visible:e.addDialog.show},on:{"update:visible":function(t){return e.$set(e.addDialog,"show",t)}}},[a("el-dialog",{attrs:{width:"30%",title:"选择新闻",visible:e.innerDialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.innerDialog,"show",t)}}},[a("el-form",{ref:"innerForm",attrs:{model:e.innerDialog.queryParams,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"新闻标题:",prop:"title"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInnerQuery(t)}},model:{value:e.innerDialog.queryParams.title,callback:function(t){e.$set(e.innerDialog.queryParams,"title",t)},expression:"innerDialog.queryParams.title"}})],1),a("el-form-item",{attrs:{label:"创建时间:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleInnerDateChange},model:{value:e.innerDialog.dateValue,callback:function(t){e.$set(e.innerDialog,"dateValue",t)},expression:"innerDialog.dateValue"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleInnerReset}},[e._v(" 重置 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleInnerQuery}},[e._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerDialog.loading,expression:"innerDialog.loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"新闻ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"新闻标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.handleInnerChoose(t.row)}}},[e._v(" 选择 ")])]}}])})],1)],1),a("el-form",{ref:"addComments",attrs:{model:e.addDialog.form,rules:e.addDialog.rules,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"120px",label:"新闻标题",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"",autocomplete:"off",placeholder:"请选择新闻标题"},model:{value:e.addDialog.form.title,callback:function(t){e.$set(e.addDialog.form,"title",t)},expression:"addDialog.form.title"}}),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"}},[e._v("选择新闻")])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"评论昵称",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.addDialog.form.nikeName,callback:function(t){e.$set(e.addDialog.form,"nikeName",t)},expression:"addDialog.form.nikeName"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"评论内容",prop:"remark"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.addDialog.form.remark,callback:function(t){e.$set(e.addDialog.form,"remark",t)},expression:"addDialog.form.remark"}})],1)],1)],1)],1)},n=[],i=a("1c03"),l=a("99a5"),o=(a("6a61"),a("513c"),a("dbb3"),a("e35a"),a("9cf3"),a("2eeb"),a("e18c"),a("9302"),a("4194"),a("b4fb"),a("053b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-common-search"},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:e.value,inline:""}},[e._l(e.lists,(function(t,r){return a("el-form-item",{key:r,attrs:{label:t.label+":",prop:t.key}},["input"===t.component?a("el-input",{attrs:{size:t.componentSize,placeholder:t.placeholder},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}}):e._e(),"select"===t.component?a("el-select",{attrs:{size:t.componentSize,placeholder:t.placeholder},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}},e._l(t.selectOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"daterange"===t.component?a("el-date-picker",{attrs:{size:t.componentSize,type:"daterange",align:"right","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}}):e._e()],1)})),a("el-form-item",[e._t("action")],2)],2)],1)}),s=[],c={props:{lists:{type:Array,default:function(){return[]}},value:Object},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}}},u=c,d=(a("9fab"),a("4ac2")),m=Object(d["a"])(u,o,s,!1,null,"f5185a12",null),p=m.exports,f=a("0fea"),b=a("0191"),h=a("cc48"),g={name:"CommentVerify",components:{search:p},props:{newsId:{type:[String,Number],default:""}},data:function(){return{search:{sourceId:"",dataId:this.newsId,nickname:"",userId:"",status:"all",aduitStartTime:"",aduitEndTime:"",startTime:"",endTime:"",aduitTime:"",submitDate:"",pageSize:10,pageNo:1},searchLists:[{component:"select",componentSize:"small",placeholder:"请选择产品",label:"所属产品",selectOption:[],span:6,key:"sourceId"},{component:"input",componentSize:"small",placeholder:"请输入ID",label:"评论人ID",span:6,key:"userId"},{component:"select",componentSize:"small",placeholder:"请输入关键字",label:"状态",selectOption:[{label:"全部",value:"all"},{label:"待审核",value:0},{label:"审核通过",value:1},{label:"审核不通过",value:2}],span:6,key:"status"},{component:"daterange",componentSize:"small",placeholder:"请选择日期",label:"审核时间",span:8,key:"aduitTime"},{component:"daterange",componentSize:"small",placeholder:"请选择日期",label:"提交时间",span:8,key:"submitDate"},{component:"input",componentSize:"small",placeholder:"请输入评论人昵称",label:"评论人昵称",span:6,key:"nickname"}],tableDead:this.isMobile?[{label:"评论人",prop:"nickname",width:120,showOverflowTooltip:!1},{label:"评论内容",prop:"content",showOverflowTooltip:!0},{label:"状态",prop:"statusLabel",width:80,showOverflowTooltip:!1}]:[{label:"评论ID",prop:"id",width:80,showOverflowTooltip:!1},{label:"评论人",prop:"nickname",width:120,showOverflowTooltip:!1},{label:"评论内容",prop:"content",showOverflowTooltip:!0},{label:"所属新闻/帖子",prop:"dataTitle",hidden:!!this.newsId,showOverflowTooltip:!0},{label:"状态",prop:"statusLabel",width:80,showOverflowTooltip:!1},{label:"审核时间",prop:"aduitTime",width:120,showOverflowTooltip:!1},{label:"提交时间",prop:"creatTime",width:120,showOverflowTooltip:!1}].filter((function(e){return!e.hidden})),tableData:[],selection:[],loading:!1,page:{total:10},dialog:{show:!1,title:"回复",reply:{nikeName:"",remark:""},replyRules:{nikeName:{required:!0,message:"请输入昵称",trigger:"blur"},remark:{required:!0,message:"请输入备注",trigger:"blur"}}},addDialog:{show:!1,title:"新增评论",form:{title:"",nikeName:"",remark:""},rules:{title:{required:!0,message:"请选择新闻标题",trigger:"change"},nikeName:{required:!0,message:"请输入评论昵称",trigger:"blur"},remark:{required:!0,message:"请输入评论内容",trigger:"blur"}}},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},innerDialog:{show:!1,dateValue:"",loading:!1,queryParams:{startdate:"",enddate:"",page:1,pageSize:10}}}},computed:{site_id:function(){return this.$store.state.u_info.site_id},disabledBatchAction:function(){return 0===this.selection.length}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProductList();case 2:e.getList();case 3:case"end":return t.stop()}}),t)})))()},methods:{resetSearch:function(){var e,t=this.$refs.search.$refs.ruleForm;t.resetFields(),this.search.sourceId=null===(e=this.searchLists[0].selectOption[0])||void 0===e?void 0:e.value},handleQuery:function(){this.search.pageNo=1,this.getList()},handleSelectionChange:function(e){this.selection=e.map((function(e){return e.commentSn}))},getList:function(){var e=this,t=Object(i["a"])({},this.search);t.aduitTime&&(t.aduitStartTime=t.aduitTime[0],t.aduitEndTime=t.aduitTime[1]),t.submitDate&&(t.startTime=t.submitDate[0],t.endTime=t.submitDate[1]),delete t.aduitTime,delete t.submitDate,this.loading=!0,this.selection=[],Object(b["j"])(this.removePropertyOfNullFor0(t)).then((function(t){var a=t.data,r=a.totalCount,n=a.list;e.page.total=r;var l=n.map((function(e){return e.dataId})).join();Object(h["I"])({ids:l}).then((function(t){var a=t.data.reduce((function(e,t){return e[t.id]=t.title,e}),{});e.tableData=n.map((function(t){var r;return Object(i["a"])(Object(i["a"])({},t),{},{statusLabel:null===(r=e.searchLists[2].selectOption.find((function(e){return e.value===t.status})))||void 0===r?void 0:r.label,title:a[t.dataId]})}))}))})).finally((function(){e.loading=!1}))},closeDialog:function(){this.dialog.show=!1},enterDialog:function(){},handleDialogShow:function(e,t){Object.assign(this.dialog,{title:e,show:!0})},handleMsgAction:function(e){var t,a=this,r=e.userId,n=e.noTalkUser,l={sourceId:this.search.sourceId,userId:r};t=n?Object(b["v"])(l):Object(b["h"])(Object(i["a"])(Object(i["a"])({},l),{},{expiresIn:604800})),t.then((function(){a.$message.success(n?"取消禁言成功!":"禁言成功!"),a.getList()}))},handleAgreeOrRefused:function(e,t){var a=this,r="".concat(t,"/").concat(e.commentSn);Object(b["f"])(r).then((function(e){var t=e.code;t?(a.$message.success("操作成功!"),a.getList()):a.$message.error("操作失败!")}))},batchAgreeOrRefused:function(e){var t=this;Object(b["c"])({operateType:e,commentSnList:this.selection}).then((function(e){var a=e.code;200==a?(t.$message.success("批量操作成功!"),t.getList()):t.$message.error("批量操作失败!")}))},handleInnerDateChange:function(e){var t=e||["",""];this.innerDialog.queryParams.startdate=t[0],this.innerDialog.queryParams.enddate=t[1]},handleInnerQuery:function(){},handleInnerReset:function(){this.innerDialog.dateValue="",Object.assign(this.innerDialog.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("innerForm")},handleInnerChoose:function(e){},getProductList:function(){var e=this;return Object(f["Xb"])({}).then((function(t){var a,r=t.data||[];e.searchLists[0].selectOption=r.map((function(e){return{label:e.name,value:e.source_id}})),e.search.sourceId=null===r||void 0===r||null===(a=r[0])||void 0===a?void 0:a.source_id}))}}},v=g,x=(a("b0de"),Object(d["a"])(v,r,n,!1,null,"137e3364",null));t["default"]=x.exports},"9e2f":function(e,t,a){},"9fab":function(e,t,a){"use strict";a("44b5")},"9fd7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-upload-video"},[a("el-upload",{attrs:{name:"file",accept:"video/*",action:e.actionUrl,headers:e.uploadHeader,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.beforeUploadVideo,"on-progress":e.handleProgress,"on-error":e.handleUploadError}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}]},[e._v("上传视频"),a("i",{staticClass:"el-icon-upload el-icon--right",staticStyle:{"font-size":"14px"}})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"xl-upload-video--play",on:{click:e.play}},[e._v(e._s(e.value)+" "),a("i",{staticClass:"el-icon-video-play"})]),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.percentage,expression:"percentage"}],attrs:{percentage:e.percentage}}),e.dialog.show?a("el-dialog",{attrs:{width:"640px",title:"视频",visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("video",{attrs:{height:"400",width:"600",controls:""}},[a("source",{attrs:{src:e.dialog.url}}),e._v(" 您的浏览器不支持 video 标签。 ")])]):e._e()],1)},n=[],i=(a("e35a"),a("0d7a"),a("9302"),{props:{value:String},data:function(){return{percentage:0,dialog:{show:!1,url:""}}},computed:{actionUrl:function(){return this.videourl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}},type:function(){var e=this.value&&this.value.split(".");return(null===e||void 0===e?void 0:e[e.length-1])||""}},methods:{beforeUploadVideo:function(e){var t=e.size/1024/1024<=300,a=["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb","video/mov"];return-1==a.indexOf(e.type)?(this.$message.warning("请上传正确的视频格式: ".concat(a.join())),!1):t?(this.percentage=0,!0):(this.$message.warning("视频大小不能超过300MB"),!1)},handleProgress:function(){this.percentage=90},handleUploadSuccess:function(e,t,a){e.status_code>=200&&e.status_code<300?(this.percentage=100,this.$message.success("视频上传成功!"),this.$emit("input",e.path)):(this.$message.error("视频上传失败!"),this.percentage=0,a.length=0)},handleUploadError:function(){this.$message.error("上传失败, 请重新上传!"),this.percentage=0},play:function(){this.dialog={show:!0,url:this.value}}}}),l=i,o=(a("46f0"),a("4ac2")),s=Object(o["a"])(l,r,n,!1,null,"664e7a03",null);t["a"]=s.exports},af7f:function(e,t,a){},b0de:function(e,t,a){"use strict";a("d35b")},c73d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("keep-alive",{attrs:{exclude:e.exclude}},[a(e.component,{tag:"component",attrs:{id:e.id},on:{watchConsole:e.watchConsole,handleReturn:e.handleReturn}})],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"xl-studio-list"},[r("div",{staticClass:"search"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[r("el-form-item",{attrs:{label:"直播间名称:",prop:"keyword"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"类型:",prop:"broadcast_type"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:e.queryParams.broadcast_type,callback:function(t){e.$set(e.queryParams,"broadcast_type",t)},expression:"queryParams.broadcast_type"}},e._l(e.broadcast_typeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"直播状态:",prop:"live"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:e.queryParams.live,callback:function(t){e.$set(e.queryParams,"live",t)},expression:"queryParams.live"}},e._l(e.liveOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"审核状态:",prop:"status"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择状态",clearable:""},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.publishOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"创建时间:"}},[r("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.handleDateChange(t,"createDate")}},model:{value:e.createDate,callback:function(t){e.createDate=t},expression:"createDate"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增 ")])],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[e.isMobile?e._e():r("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),r("el-table-column",{attrs:{label:"直播间名称",align:"center",prop:"title","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"直播间类型",align:"center",prop:"broadcast_typeLabel"}}),r("el-table-column",{attrs:{label:"直播状态",align:"center",prop:"liveLabel"}}),r("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{size:"small"},on:{change:function(a){return e.publishChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.publishOptions.filter((function(e){return""!==e.value})),(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"开播时间",align:"center",prop:"start_time"}}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"end_time"}}),r("el-table-column",{attrs:{label:"运营",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.watchConsole(t.row)}}},[e._v(" 控制台 ")])]}}])}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at"}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"verify-table-action"},[r("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.handleEdit(t.row)}}}),r("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleDelete(t.row)}}}),r("Iconbutton",{attrs:{icontype:"fb",label:"栏目"},on:{fatherMethod:function(a){return e.handlePublish(t.row)}}})],1)]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{width:"600px",title:e.publishDialog.title,visible:e.publishDialog.show},on:{"update:visible":function(t){return e.$set(e.publishDialog,"show",t)}}},[r("el-form",{ref:"publishForm",attrs:{model:e.publishDialog.form,rules:e.publishDialog.rules}},[r("el-form-item",{attrs:{"label-width":"120px",label:"栏目",prop:"channel_id"}},[r("el-cascader",{staticStyle:{width:"350px"},attrs:{filterable:"",options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.publishDialog.form.channel_id,callback:function(t){e.$set(e.publishDialog.form,"channel_id",t)},expression:"publishDialog.form.channel_id"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.publishDialog.show=!1}}},[e._v(" 取 消 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterPublishDialog}},[e._v(" 确 定 ")])],1)],1),e.dialog.show?r("el-dialog",{attrs:{width:"800px",top:"20px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[r("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialog.rules,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{"label-width":"120px",label:"发布栏目:",prop:"channels"}},[r("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.dialog.form.channels,callback:function(t){e.$set(e.dialog.form,"channels",t)},expression:"dialog.form.channels"}})],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播间名称:",prop:"extra.title"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入直播间名称",clearable:"",size:"small"},model:{value:e.dialog.form.extra.title,callback:function(t){e.$set(e.dialog.form.extra,"title",t)},expression:"dialog.form.extra.title"}})],1),r("el-form-item",{attrs:{label:"直播封面:",prop:"extra.template_style"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.template_style,callback:function(t){e.$set(e.dialog.form.extra,"template_style",t)},expression:"dialog.form.extra.template_style"}},e._l(e.templateStyleLists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),r("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),r("el-form-item",{attrs:{prop:"extra.cover"}},[r("cropper",{attrs:{count:e.imgCount},model:{value:e.dialog.form.extra.cover,callback:function(t){e.$set(e.dialog.form.extra,"cover",t)},expression:"dialog.form.extra.cover"}})],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播类型:",prop:"extra.broadcast_type"}},[r("el-radio-group",{on:{change:e.statementChange},model:{value:e.dialog.form.extra.broadcast_type,callback:function(t){e.$set(e.dialog.form.extra,"broadcast_type",t)},expression:"dialog.form.extra.broadcast_type"}},e._l(e.broadcast_typeOptions.filter((function(e){return""!==e.value})),(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),"3"===e.dialog.form.extra.broadcast_type?r("el-form-item",{attrs:{"label-width":"120px",label:"顶部图片:",prop:"extra.banner"}},[r("upload-single",{model:{value:e.dialog.form.extra.banner,callback:function(t){e.$set(e.dialog.form.extra,"banner",t)},expression:"dialog.form.extra.banner"}})],1):e._e(),r("el-form-item",{attrs:{"label-width":"120px",label:"图文直播:",prop:"extra.statement"}},[r("el-radio-group",{attrs:{disabled:"3"===e.dialog.form.extra.broadcast_type},model:{value:e.dialog.form.extra.statement,callback:function(t){e.$set(e.dialog.form.extra,"statement",t)},expression:"dialog.form.extra.statement"}},e._l(e.statementOptions,(function(t){return r("el-radio",{key:t.value,staticStyle:{"margin-top":"10px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播时间:",prop:"extra.start_time"}},[r("el-date-picker",{attrs:{disabled:""!==e.dialog.id,type:"datetimerange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.handleDateChange(t,"liveTime")}},model:{value:e.liveTime,callback:function(t){e.liveTime=t},expression:"liveTime"}})],1),r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.end_time"}}),r("el-form-item",{attrs:{prop:"extra.allow_comment",label:"评论控制"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.allow_comment,callback:function(t){e.$set(e.dialog.form.extra,"allow_comment",t)},expression:"dialog.form.extra.allow_comment"}},[r("el-radio",{key:"0",attrs:{label:"0"}},[e._v("先审后发")]),r("el-radio",{key:"1",attrs:{label:"1"}},[e._v("先发后审")]),r("el-radio",{key:"2",attrs:{label:"2"}},[e._v("禁止评论")])],1)],1),r("el-form-item",{attrs:{prop:"extra.allow_share",label:"允许分享"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.allow_share,callback:function(t){e.$set(e.dialog.form.extra,"allow_share",t)},expression:"dialog.form.extra.allow_share"}},[r("el-radio",{key:"1",attrs:{label:"1"}},[e._v("是")]),r("el-radio",{key:"0",attrs:{label:"0"}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播间简介:",prop:"extra.intro"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入简介",clearable:"",type:"textarea",rows:"5"},model:{value:e.dialog.form.extra.intro,callback:function(t){e.$set(e.dialog.form.extra,"intro",t)},expression:"dialog.form.extra.intro"}})],1),r("el-form-item",{attrs:{label:"机器人数据",prop:"extra.robot_settings.enable"}},[r("el-switch",{attrs:{"active-value":1},model:{value:e.dialog.form.extra.robot_settings.enable,callback:function(t){e.$set(e.dialog.form.extra.robot_settings,"enable",t)},expression:"dialog.form.extra.robot_settings.enable"}})],1),r("el-form-item",{attrs:{label:"基础观看人数:"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.view_base_num"}},[r("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.view_base_num,callback:function(t){e.$set(e.dialog.form.extra,"view_base_num",t)},expression:"dialog.form.extra.view_base_num"}}),e._v(" 人 ")],1)],1)],1),r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.form.extra.robot_settings.enable,expression:"dialog.form.extra.robot_settings.enable"}],staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:24}},[e._v(" 每分钟额外显示 "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.view.min"}},[r("el-input-number",{attrs:{controls:!1,precision:0,max:e.dialog.form.extra.robot_settings.view.max||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.view.min,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.view,"min",t)},expression:"dialog.form.extra.robot_settings.view.min"}})],1),e._v(" ~ "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.view.max"}},[r("el-input-number",{attrs:{controls:!1,precision:0,min:e.dialog.form.extra.robot_settings.view.min||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.view.max,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.view,"max",t)},expression:"dialog.form.extra.robot_settings.view.max"}})],1),e._v(" 内的随机整数（最大值建议≤100） ")],1)],1)],1),r("el-form-item",{attrs:{label:"基础点赞数量:"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.praise_base_num"}},[r("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.praise_base_num,callback:function(t){e.$set(e.dialog.form.extra,"praise_base_num",t)},expression:"dialog.form.extra.praise_base_num"}}),e._v(" 个 ")],1)],1)],1),r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.form.extra.robot_settings.enable,expression:"dialog.form.extra.robot_settings.enable"}],staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:24}},[e._v(" 每分钟增加 "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.praise.min"}},[r("el-input-number",{attrs:{controls:!1,max:e.dialog.form.extra.robot_settings.praise.max||1/0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.praise.min,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.praise,"min",t)},expression:"dialog.form.extra.robot_settings.praise.min"}})],1),e._v(" ~ "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.praise.max"}},[r("el-input-number",{attrs:{controls:!1,min:e.dialog.form.extra.robot_settings.praise.min||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.praise.max,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.praise,"max",t)},expression:"dialog.form.extra.robot_settings.praise.max"}})],1),e._v(" 内的随机整数 ")],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"},{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{type:"primary"},on:{click:e.enterChangeDialog}},[e._v("确 定")])],1)],1):e._e()],1)},l=[],o=a("1c03"),s=(a("77ad"),a("4194"),a("2eeb"),a("9302"),a("e18c"),a("13cc")),c=a("0fea"),u=a("e60d"),d=a("b49d"),m={name:"studioList",components:{uploadSingle:u["a"],Cropper:d["a"]},data:function(){var e=this,t=function(t,a,r){var n=e.imgCount;Array.isArray(a)&&0!==a.length?a.slice(0,n).every((function(e){return e.path}))?r():r(new Error("请上传".concat(n,"张图片"))):r(new Error("请上传图片"))};return{loading:!1,queryParams:{keyword:"",live:"",broadcast_type:"",status:"",startdate:"",enddate:"",page:1,pageSize:10},tableData:[],total:0,cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},channelsList:[],broadcast_typeOptions:[{label:"全部",value:""},{label:"横版",value:"1"},{label:"竖版",value:"2"},{label:"纯图文",value:"3"}],liveOptions:[{label:"全部",value:""},{label:"未开始",value:0},{label:"进行中",value:1},{label:"已结束",value:2}],publishOptions:[{label:"全部",value:""},{label:"待审核",value:0},{label:"已发布",value:1},{label:"已下线",value:2}],statementOptions:[{label:"关闭（关闭后客户端不展示图文直播间）",value:"none"},{label:"关联直播间（该直播间中，多个机位共用同一图文直播）",value:"broadcast"},{label:"关联机位（该直播间中，不同机位对应各自图文直播）",value:"stream"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},liveTime:"",createDate:"",templateStyleLists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图5",value:"204",count:1,img:"1402-204.png"},{label:"大图6",value:"205",count:1,img:"1402-205.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"}],dialog:{title:"新增",id:"",show:!1,form:{channels:[],extra:{type:"broadcast",title:"",banner:"",template_style:"240",cover:[],allow_comment:"0",allow_share:"1",broadcast_type:"1",statement:"none",start_time:"",end_time:"",intro:"",view_base_num:"",praise_base_num:"",robot_settings:{enable:0,view:{min:"",max:""},praise:{min:"",max:""}}}},rules:{"extra.title":[{required:!0,message:"请输入直播间名称",trigger:"blur"}],"extra.template_style":[{required:!0,message:"请选择直播封面样式",trigger:"change"}],"extra.cover":[{validator:t,trigger:"change"}],"extra.broadcast_type":[{required:!0,message:"请选择直播类型",trigger:"change"}],"extra.start_time":[{required:!0,message:"请选择直播时间",trigger:"change"}],"extra.intro":[{required:!0,message:"请输入直播间简介",trigger:"blur"}],"extra.banner":[{required:!0,message:"请上传顶部图片",trigger:"change"}],"extra.allow_comment":[{required:!0,message:"请选择评论控制",trigger:"change"}],"extra.allow_share":[{required:!0,message:"请选择是否允许分享",trigger:"change"}]}},dialogLoading:!1,publishDialog:{show:!1,title:"发布栏目",form:{channel_id:"",broadcast_ids:""},rules:{channel_id:[{required:!0,message:"请选择栏目",trigger:"change"}]}}}},computed:{imgCount:function(e){var t,a,r=e.dialog,n=e.templateStyleLists;return null!==(t=null===(a=n.find((function(e){return e.value===r.form.extra.template_style})))||void 0===a?void 0:a.count)&&void 0!==t?t:1}},methods:{handleReset:function(){this.createDate="",Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handleAdd:function(){this.liveTime="",Object.assign(this.dialog,{title:"新增",id:"",show:!0,form:{channels:[],extra:{type:"broadcast",title:"",banner:"",allow_comment:"0",allow_share:"1",template_style:"240",cover:[],broadcast_type:"1",statement:"none",start_time:"",end_time:"",intro:"",view_base_num:"",praise_base_num:"",robot_settings:{enable:0,view:{min:"",max:""},praise:{min:"",max:""}}}}})},handleEdit:function(e){var t=this,a=e.id;this.liveTime="",Object(s["A"])(a).then((function(e){var r=e.data;t.liveTime=[r.extra.start_time,r.extra.end_time],t.$nextTick((function(){Object.assign(t.dialog,{title:"编辑",show:!0,id:a,form:{channels:r.channel.map((function(e){return e.id})),extra:Object(o["a"])(Object(o["a"])({},r.extra),{},{template_style:r.extra.template_style||"240",broadcast_type:r.extra.broadcast_type})}})}))}))},handleDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条ID为".concat(a,"的直播间, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["r"])(a).then((function(){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},publishChange:function(e){var t=this,a=e.id,r=e.status;Object(s["u"])(a,{status:r}).then((function(){t.$message.success("修改成功"),t.getList()}))},statementChange:function(e){"3"===e&&(this.dialog.form.extra.statement="broadcast")},handlePublish:function(e){var t,a=e.id,r=e.channel;Object.assign(this.publishDialog,{show:!0,form:{channel_id:r.map((function(e){return e.id})),broadcast_ids:a}}),null===(t=this.$refs.publishForm)||void 0===t||t.clearValidate()},watchConsole:function(e){var t=e.id;this.$emit("watchConsole",t)},handleDateChange:function(e,t){var a=e||["",""];"liveTime"===t?(this.dialog.form.extra.start_time=a[0],this.dialog.form.extra.end_time=a[1]):"createDate"===t&&(this.queryParams.startdate=a[0],this.queryParams.enddate=a[1])},enterChangeDialog:function(){var e,t,a=this,r=this.dialog.id,n={channels:this.dialog.form.channels.join(),extra:Object(o["a"])(Object(o["a"])({},this.dialog.form.extra),{},{cover:this.dialog.form.extra.cover.slice(0,this.imgCount)})};null===(e=this.$refs.dialogForm)||void 0===e||e.validate((function(e){e&&(a.dialogLoading=!0,t=r?Object(s["u"])(r,n):Object(s["f"])(n),t.then((function(){a.$message.success("".concat(a.dialog.title,"成功!")),a.dialog.show=!1,a.getList()})).finally((function(){a.dialogLoading=!1})))}))},enterPublishDialog:function(){var e,t=this;null===(e=this.$refs.publishForm)||void 0===e||e.validate((function(e){e&&Object(s["u"])(t.publishDialog.form.broadcast_ids,{channels:t.publishDialog.form.channel_id.join()}).then((function(){t.$message.success("发布成功"),t.publishDialog.show=!1,t.getList()}))}))},getList:function(){var e=this;this.loading=!0;var t=Object(o["a"])({},this.queryParams);Object(s["B"])(this.removePropertyOfNullFor0(t)).then((function(t){e.tableData=(t.data||[]).map((function(t){var a,r,n,i;return Object(o["a"])(Object(o["a"])({},t),{},{broadcast_typeLabel:null!==(a=null===(r=e.broadcast_typeOptions.find((function(e){return e.value===t.broadcast_type})))||void 0===r?void 0:r.label)&&void 0!==a?a:"",liveLabel:null!==(n=null===(i=e.liveOptions.find((function(e){return e.value===t.live})))||void 0===i?void 0:i.label)&&void 0!==n?n:""})})),e.total=t.total})).finally((function(){e.loading=!1}))},getChannels:function(){var e=this;Object(c["vb"])({with_special_channels:"topic"}).then((function(t){e.channelsList=t.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{disabled:!0})})),e.changeChannelName(e.channelsList)}))}},created:function(){var e;this.queryParams.keyword=(null===(e=this.$route.query)||void 0===e?void 0:e.title)||"",this.getChannels()},activated:function(){this.getList()}},p=m,f=(a("2522"),a("4ac2")),b=Object(f["a"])(p,i,l,!1,null,"6dca6b01",null),h=b.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"xl-watch-console-header",attrs:{height:"120px"}},[a("div",{staticClass:"header--left"},[a("el-image",{staticStyle:{width:"140px",height:"100px"},attrs:{lazy:"",src:e.detail.cover,fit:"contain"}}),a("div",{staticClass:"header--left-detail"},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{staticStyle:{"font-weight":"500"},attrs:{span:24}},[e._v(e._s(e.detail.title)+" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("(当前状态: "+e._s(e.detail.label)+")")])])],1),a("el-row",{staticStyle:{"margin-bottom":"10px","font-size":"12px"}},[a("el-col",{attrs:{span:24}},[a("span",[e._v(" 开播时间: "+e._s(e.detail.extra.start_time)+" "),0===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleStart}},[e._v("提前开播(点击立即开播)")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleDelayStart}},[e._v("调整开播时间")])],1):e._e()])])],1),a("el-row",{staticStyle:{"font-size":"12px"}},[a("el-col",{attrs:{span:24}},[a("span",[e._v(" 结束时间: "+e._s(e.detail.extra.end_time)+" "),0===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleSetEnd}},[e._v("调整直播结束时间")])],1):e._e(),1===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleEnd}},[e._v("提前停播(点击立即停播)")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleSetEnd}},[e._v("调整直播结束时间")])],1):e._e()])])],1)],1)],1),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"success",size:"mini"},on:{click:e.handleReturn}},[e._v(" 返回上一级 ")])],1),a("el-container",[a("el-aside",{staticStyle:{"background-color":"#fff"},attrs:{width:"145px"}},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:e.currentView,callback:function(t){e.currentView=t},expression:"currentView"}},e._l(e.lists,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})})),1)],1),a("el-main",{staticStyle:{position:"relative"}},[a(e.currentView,e._b({tag:"component"},"component",[e.$props,{newId:e.detail.news_id,uuid:e.detail.extra.comment_uuid}],!1))],1)],1),a("el-dialog",{attrs:{width:"600px",title:e.dialogStart.title,visible:e.dialogStart.show},on:{"update:visible":function(t){return e.$set(e.dialogStart,"show",t)}}},[a("el-form",{ref:"startForm",attrs:{model:e.dialogStart.form,rules:e.dialogStart.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"当前开播时间",prop:"old"}},[a("el-date-picker",{attrs:{disabled:"",type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogStart.form.old,callback:function(t){e.$set(e.dialogStart.form,"old",t)},expression:"dialogStart.form.old"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"调整到",prop:"now"}},[a("el-date-picker",{attrs:{type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogStart.form.now,callback:function(t){e.$set(e.dialogStart.form,"now",t)},expression:"dialogStart.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialogStart.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterStartDialog}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{width:"600px",title:e.dialogEnd.title,visible:e.dialogEnd.show},on:{"update:visible":function(t){return e.$set(e.dialogEnd,"show",t)}}},[a("el-form",{ref:"endForm",attrs:{model:e.dialogEnd.form,rules:e.dialogEnd.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"当前结束时间",prop:"old"}},[a("el-date-picker",{attrs:{disabled:"",type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogEnd.form.old,callback:function(t){e.$set(e.dialogEnd.form,"old",t)},expression:"dialogEnd.form.old"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"调整到",prop:"now"}},[a("el-date-picker",{attrs:{type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogEnd.form.now,callback:function(t){e.$set(e.dialogEnd.form,"now",t)},expression:"dialogEnd.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialogEnd.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterEndDialog}},[e._v(" 确 定 ")])],1)],1)],1)},v=[],x=(a("513c"),a("053b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-reservation"},[a("div",{staticClass:"xl-reservation-add"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增机位 ")])],1),a("el-tabs",{attrs:{closable:""},on:{"tab-remove":e.handleDelete},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"xl-reservation-save"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),e._l(e.lists,(function(t){return a("el-tab-pane",{key:t.extra.sort,attrs:{label:t.oldName,name:""+t.extra.sort}},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"机位状态"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.extra.is_valid,callback:function(a){e.$set(t.extra,"is_valid",a)},expression:"item.extra.is_valid"}})],1),a("el-form-item",{attrs:{label:"机位名称",prop:"extra.name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机位名称",clearable:"",size:"small"},model:{value:t.extra.name,callback:function(a){e.$set(t.extra,"name",a)},expression:"item.extra.name"}})],1),a("el-form-item",{attrs:{label:"机位头图",prop:"extra.cover"}},[a("upload-single",{model:{value:t.extra.cover,callback:function(a){e.$set(t.extra,"cover",a)},expression:"item.extra.cover"}})],1),a("el-form-item",{attrs:{label:"机位流地址",prop:"extra.stream_url"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机位流地址",clearable:"",size:"small"},model:{value:t.extra.stream_url,callback:function(a){e.$set(t.extra,"stream_url",a)},expression:"item.extra.stream_url"}})],1),a("el-form-item",{attrs:{label:"备用流地址",prop:"extra.stream_url_backup"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入备用流地址",clearable:"",size:"small"},model:{value:t.extra.stream_url_backup,callback:function(a){e.$set(t.extra,"stream_url_backup",a)},expression:"item.extra.stream_url_backup"}})],1),a("el-form-item",{attrs:{label:"支持回看:",prop:"extra.allow_replay"}},[a("el-radio-group",{model:{value:t.extra.allow_replay,callback:function(a){e.$set(t.extra,"allow_replay",a)},expression:"item.extra.allow_replay"}},e._l(e.replayOptions,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),"1"===t.extra.allow_replay?a("el-form-item",{attrs:{label:"回放流地址",prop:"extra.replay_stream"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入回放流地址",clearable:"",size:"small"},model:{value:t.extra.replay_stream,callback:function(a){e.$set(t.extra,"replay_stream",a)},expression:"item.extra.replay_stream"}})],1):e._e(),a("el-form-item",{attrs:{label:"直播引导片"}},[a("el-switch",{model:{value:t.guide,callback:function(a){e.$set(t,"guide",a)},expression:"item.guide"}})],1),t.guide?a("el-form-item",{attrs:{label:"播放时间",prop:"extra.guide_play_time"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.extra.guide_play_time,callback:function(a){e.$set(t.extra,"guide_play_time",a)},expression:"item.extra.guide_play_time"}})],1):e._e(),t.guide?a("el-form-item",{attrs:{label:"上传引导片",prop:"extra.guide_video"}},[a("upload-video",{model:{value:t.extra.guide_video,callback:function(a){e.$set(t.extra,"guide_video",a)},expression:"item.extra.guide_video"}})],1):e._e()],1)],1)}))],2)],1)}),y=[],w=a("99a5"),_=a("190b"),k=(a("6a61"),a("08d5"),a("6db4"),a("3466"),a("ea69"),a("1c2e"),a("9fd7")),O={components:{uploadSingle:u["a"],uploadVideo:k["a"]},props:{id:Number},data:function(){return{activeName:"",lists:[],replayOptions:[{label:"是",value:"1"},{label:"否",value:"0"}],rules:{"extra.name":[{required:!0,message:"请输入机位名称",trigger:"blur"}],"extra.cover":[{required:!0,message:"请上传机位头图",trigger:"change"}],"extra.replay_stream":[{required:!0,message:"请输入回放流地址",trigger:"blur"}],"extra.guide_play_time":[{required:!0,message:"请选择引导片播放时间",trigger:"change"}],"extra.guide_video":[{required:!0,message:"请上传引导片",trigger:"change"}]}}},methods:{handleAdd:function(){var e,t=this,a=((null===(e=Object(_["a"])(this.lists).pop())||void 0===e?void 0:e.extra.sort)||0)+1;this.$prompt("请输入机位名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入机位名",inputValidator:function(e){return null!=e&&""!==e.trim()}}).then((function(e){var r=e.value;t.lists.push({broadcast_id:t.id,oldName:r,extra:{sort:a,name:r,oldName:r,cover:"",is_valid:"1",stream_url:"",guide_video:"",allow_replay:"0",replay_stream:"",guide_play_time:"",stream_url_backup:""}}),t.activeName="".concat(a)})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},handleDelete:function(e){var t=this,a=this.lists.findIndex((function(t){return t.extra.sort==e}));if(a){var r=this.lists[a],n=r.extra,i=r.id;this.$confirm("此操作将永久删除这条名称为".concat(n.name,"的机位, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e,r=(null===(e=t.lists[a+1]||t.lists[a-1])||void 0===e?void 0:e.extra.sort)||"";null==i?(t.lists.splice(a,1),r&&(t.activeName="".concat(r))):Object(s["q"])(i).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$message({message:"删除成功",type:"success"}),e.next=3,t.getList();case 3:r&&(t.activeName="".concat(r));case 4:case"end":return e.stop()}}),e)}))))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},handleSave:function(){var e,t=this,a=this.lists.findIndex((function(e){return e.extra.sort==t.activeName}));null===(e=this.$refs.form[a])||void 0===e||e.validate((function(e){if(e){var r,n=t.lists[a],i=n.id,l=n.extra,c={broadcast_id:t.id,extra:Object(o["a"])({},l)};r=null!=i?Object(s["t"])(i,c):Object(s["e"])(c),r.then((function(){t.$message.success("保存成功!"),t.getList()}))}}))},getList:function(){var e=this;return Object(s["A"])(this.id).then((function(t){var a=t.data;e.lists=(a.extra.stream||[]).sort((function(e,t){return e.extra.sort-t.extra.sort})).map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{oldName:e.extra.name.toString(),guide:!(!e.extra.guide_video||!e.extra.guide_play_time)})}))}))}},created:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:r=null===(a=e.lists[0])||void 0===a?void 0:a.extra.sort,e.activeName=null!=r?"".concat(r):"";case 4:case"end":return t.stop()}}),t)})))()}},j=O,S=(a("d556"),Object(f["a"])(j,x,y,!1,null,"bbbbf6e8",null)),$=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-direct-seeding"},["none"!=e.statement?a("div",[a("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.streamlist,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:"stream"==e.statement?t.extra.name:"",name:t.extra.name}},[a("div",{staticStyle:{height:"400px","margin-bottom":"30px"}},[a("el-table",{ref:"tableList",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:e.dataList,height:"400"}},[a("el-table-column",{attrs:{prop:"created_at",label:"时间"}}),a("el-table-column",{attrs:{label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.row.content)}})]}}],null,!0)})],1)],1)])})),1),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"图片/视频",prop:"content"}},[a("editor",{model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("发送")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e()])},N=[],T=(a("08ba"),a("469d")),C=a("156b"),z={data:function(){return{activeName:"",statement:"",ruleForm:{broadcast_id:"",host_name:"",content:"",stream_id:"",time:"",file:"",image:""},rules:{content:[{required:!0,message:"请填写文字",trigger:"blur"}]},statementquery:{id:"",stream_id:""},dataList:[],streamlist:[]}},components:{Editor:C["a"]},props:{id:Number},created:function(){this.statementquery.id=this.id,this.getbroadcastStatement()},updated:function(){this.downscroll()},methods:{handleAvatarSuccess:function(e,t){this.ruleForm[e]=t.path},beforeAvatarUpload:function(e){var t=e.size/1024/1024<20;return t||this.$message.error("上传头像图片大小不能超过 20MB!"),t},downscroll:function(){try{this.$refs.tableList.forEach((function(e){e.bodyWrapper.scrollTop=e.bodyWrapper.scrollHeight}))}catch(e){}},getbroadcastStatement:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getbroadcasts();case 2:t.sent,e.getdatalist();case 4:case"end":return t.stop()}}),t)})))()},getdatalist:function(){var e=this;this.dataList=[],Object(c["Sb"])(this.statementquery.id,this.statementquery.stream_id).then((function(t){e.dataList=t.data.reverse(),console.log(e.dataList)}))},getbroadcasts:function(){var e=this;return new Promise((function(t,a){Object(c["Tb"])(e.id).then((function(a){console.log(a),e.streamlist=a.data.extra.stream,e.streamlist&&e.streamlist.length>0?(e.activeName=e.streamlist[0].extra.name,e.statementquery.stream_id=e.streamlist[0].id,e.statement=a.data.extra.statement):e.streamlist=[{extra:{name:""}}],t(e.streamlist)}))}))},handleClick:function(e,t){var a=parseInt(e.index);this.statementquery.stream_id=this.streamlist[a].id,this.getdatalist()},submitForm:function(e){var t=this;console.log(this.ruleForm),this.ruleForm.broadcast_id=this.statementquery.id,this.ruleForm.stream_id=this.statementquery.stream_id,this.ruleForm.host_name="测试",this.ruleForm.time=Object(T["b"])(new Date),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(c["j"])(t.ruleForm).then((function(e){t.$message({message:"发送成功",type:"success"}),t.resetForm("ruleForm"),t.getdatalist(),t.downscroll()}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},q=z,L=(a("3bbb"),a("3824"),Object(f["a"])(q,D,N,!1,null,"3bb6c31c",null)),F=L.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("comment-verify",{attrs:{"news-id":""+e.uuid}})},E=[],P=a("7d9b"),M={components:{commentVerify:P["default"]},props:{uuid:String}},R=M,A=Object(f["a"])(R,I,E,!1,null,null,null),H=A.exports,V={props:{id:Number},components:{reservation:$,directSeeding:F,comment:H},data:function(){var e=this,t=function(t,a,r){var n=new Date(a),i=new Date(e.detail.extra.end_time).getTime();n.getTime()>i?r(new Error("开播时间必须小于现结束时间")):n.getTime()>new Date?r():r(new Error("开播时间必须大于当前时间"))},a=function(e,t,a){var r=new Date(t);r.getTime()>new Date?a():a(new Error("结束时间必须大于当前时间"))};return{detail:{cover:"",extra:{}},currentView:"reservation",dialogStart:{title:"调整开播时间",show:!1,form:{old:"",now:""},rules:{now:[{required:!0,message:"请选择开播时间",trigger:"change"},{validator:t,trigger:"change"}]}},dialogEnd:{title:"调整结束时间",show:!1,form:{old:"",now:""},rules:{now:[{required:!0,message:"请选择结束时间",trigger:"change"},{validator:a,trigger:"change"}]}}}},computed:{lists:function(){var e=[];return"3"!==this.detail.extra.broadcast_type&&e.push({label:"机位管理",name:"reservation"}),"none"!==this.detail.extra.statement&&e.push({label:"图文直播",name:"directSeeding"}),e.push({label:"评论审核",name:"comment"}),e}},methods:{handleReturn:function(){this.$emit("handleReturn")},getList:function(){var e=this;Object(s["A"])(this.id).then((function(t){var a,r=t.data,n={0:"未开始",1:"进行中",2:"已结束"};e.detail=Object(o["a"])(Object(o["a"])({},r),{},{label:n[r.live],cover:null===(a=r.extra.cover[0])||void 0===a?void 0:a.path}),e.currentView=e.lists[0].name}))},handleStart:function(){var e=this;this.$confirm("确认提前开播?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])(e.id,{extra:{start_time:e.parseTime(new Date)},live:1}).then((function(){e.$message.success("修改成功!"),e.getList()}))})).catch((function(){}))},handleDelayStart:function(){var e=this;Object.assign(this.dialogStart,{show:!0,form:{old:this.detail.extra.start_time,now:""}}),this.$nextTick((function(){var t;null===(t=e.$refs.startForm)||void 0===t||t.resetFields()}))},enterStartDialog:function(){var e,t=this;null===(e=this.$refs.startForm)||void 0===e||e.validate((function(e){e&&Object(s["k"])(t.id,{extra:{start_time:t.dialogStart.form.now}}).then((function(){t.$message.success("修改成功!"),t.getList()})).finally((function(){t.dialogStart.show=!1}))}))},handleSetEnd:function(){var e=this;Object.assign(this.dialogEnd,{show:!0,form:{old:this.detail.extra.end_time,now:""}}),this.$nextTick((function(){var t;null===(t=e.$refs.endForm)||void 0===t||t.resetFields()}))},enterEndDialog:function(){var e,t=this;null===(e=this.$refs.endForm)||void 0===e||e.validate((function(e){e&&Object(s["k"])(t.id,{extra:{end_time:t.dialogStart.form.now}}).then((function(){t.$message.success("修改成功!"),t.getList()})).finally((function(){t.dialogEnd.show=!1}))}))},handleEnd:function(){var e=this;this.$confirm("确认提前停播?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])(e.id,{extra:{end_time:e.parseTime(new Date)},live:2}).then((function(){e.$message.success("修改成功!"),e.getList()}))})).catch((function(){}))}},created:function(){this.getList()}},B=V,U=(a("e12e"),Object(f["a"])(B,g,v,!1,null,"fbb85ed0",null)),Q=U.exports,J={components:{studioList:h,watchConsole:Q},data:function(){return{component:"studioList",id:0}},computed:{exclude:function(){return["watchConsole"]}},methods:{watchConsole:function(e){this.id=e,this.component="watchConsole"},handleReturn:function(){this.component="studioList"}}},W=J,X=Object(f["a"])(W,r,n,!1,null,"c7ece384",null);t["default"]=X.exports},c7b9:function(e,t,a){},d35b:function(e,t,a){},d556:function(e,t,a){"use strict";a("af7f")},dce4:function(e,t,a){},e12e:function(e,t,a){"use strict";a("9e2f")}}]);