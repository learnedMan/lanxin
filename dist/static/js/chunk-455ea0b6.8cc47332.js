(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-455ea0b6"],{"5e89":function(e,t,a){var o=a("861d"),i=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&i(e)===e}},"6fd2":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-convention"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"规则名称:",prop:"actionName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入规则名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.actionName,callback:function(t){e.$set(e.queryParams,"actionName",t)},expression:"queryParams.actionName"}})],1),a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.statusLists,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"行为Id",align:"center",prop:"actionCode",showOverflowTooltip:""}}),a("el-table-column",{attrs:{label:"规则名称",align:"center",prop:"actionName"}}),a("el-table-column",{attrs:{label:"所属模块",align:"center",prop:"modeName",showOverflowTooltip:""}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{on:{change:function(a){return e.handleChangeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.statusLists,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdAt"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.handleEdit(t.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.limit},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"limit",t)},pagination:e.getList}}),a("el-dialog",{attrs:{width:"600px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.dialogRules,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"所属模块",prop:"modeCode"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择所属模块",clearable:""},on:{change:e.typeAction},model:{value:e.dialogForm.modeCode,callback:function(t){e.$set(e.dialogForm,"modeCode",t)},expression:"dialogForm.modeCode"}},e._l(e.typeLists,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"行为名称",prop:"actionName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入行为名称"},model:{value:e.dialogForm.actionName,callback:function(t){e.$set(e.dialogForm,"actionName",t)},expression:"dialogForm.actionName"}})],1),a("el-form-item",{attrs:{label:"行为Id",prop:"actionCode"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:e.actionPlaceholder},model:{value:e.dialogForm.actionCode,callback:function(t){e.$set(e.dialogForm,"actionCode",e._n(t))},expression:"dialogForm.actionCode"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialog.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v(" 确 定 ")])],1)],1)],1)},i=[],n=a("5530"),l=(a("a9e3"),a("8ba4"),a("99af"),a("4de4"),a("d3b7"),a("d81d"),a("7db0"),a("b0c0"),a("0fea")),r={name:"Convention",data:function(){var e=this,t=function(t,a,o){var i=e.modeCode,n=Number(e.modeCode)+99;if(null==a||""===a)return o(new Error("行为ID不能为空"));!Number.isInteger(a)||a<i||a>n?o(new Error("请输入".concat(i,"-").concat(n,"整数"))):o()};return{productLists:[],statusLists:[{label:"启用",value:1},{label:"禁用",value:2}],typeLists:[{name:"新闻媒资",value:8e3},{name:"广电",value:8100},{name:"社区",value:8200},{name:"爆料",value:8300},{name:"互动",value:8400},{name:"个人信息/邀请注册",value:8500},{name:"举报反馈",value:8600},{name:"行为",value:8700}],actionLists:[],queryParams:{actionName:"",status:"",page:1,limit:10},total:0,loading:!1,tableData:[],dialog:{title:"新增",show:!1},actionPlaceholder:"请输入行为ID",modeCode:"",dialogForm:{modeCode:"",actionCode:"",actionName:"",status:1},dialogRules:{actionName:[{required:!0,message:"请输入行为名称",trigger:"blur"}],modeCode:[{required:!0,message:"请选择所属模块",trigger:"change"}],actionCode:[{required:!0,validator:t,trigger:"blur"}]}}},computed:{actionOfType:function(){var e=this;return this.actionLists.filter((function(t){return t.parent===e.dialogForm.type}))}},methods:{typeAction:function(e){this.dialogForm.actionName="",this.dialogForm.actionCode="",this.dialogForm.status=1,this.modeCode=e;var t=Number(e);this.actionPlaceholder="请输入行为ID"+"(".concat(t,"-").concat(t+99,")")},getActionList:function(){var e=this;return Object(l["Db"])().then((function(t){200==t.code&&(e.actionLists=(t.data||[]).map((function(e){return{label:e.remarkTwo,value:Number(e.dictValue),parent:Number(e.remark)}})))}))},handleReset:function(){Object.assign(this.queryParams,{page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handleAdd:function(){this.resetForm("dialogForm"),this.dialog={show:!0,title:"新增"}},handleEdit:function(e){var t=e.id;this.resetForm("dialogForm"),this.modeCode=e.modeCode,this.dialogForm={modeCode:e.modeCode,actionCode:e.actionCode,actionName:e.actionName,status:e.status},this.dialog={show:!0,title:"编辑",id:t}},enterDialog:function(){var e=this;this.$refs.dialogForm.validate((function(t){var a=function(t){var a=e.typeLists.find((function(e){return e.value==t}));return a.name};if(t){var o=a(e.modeCode),i=Object(n["a"])(Object(n["a"])({},e.dialogForm),{},{modeName:o});console.log("params",i);var r=e.dialog.id?Object(l["jb"])(Object(n["a"])(Object(n["a"])({},i),{},{id:e.dialog.id})):Object(l["a"])(i);r.then((function(t){200==t.code&&(e.$message.success(t.msg),e.dialog.show=!1,e.getList())}))}}))},handleDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条行为id为".concat(a,"的明细, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["J"])({id:a}).then((function(e){200==e.code&&(t.$message.success(e.msg),t.getList())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleChangeStatus:function(e){var t=this,a=e.actionCode,o=e.id,i=e.status,n=e.modeName,r=e.actionName,s=e.modeCode,c={actionCode:a,id:o,status:i,modeName:n,actionName:r,modeCode:s};Object(l["jb"])(c).then((function(e){200==e.code&&(t.$message.success(e.msg),t.getList())}))},getList:function(){var e=this,t=Object(n["a"])({},this.queryParams);this.loading=!0,Object(l["Gb"])(this.removePropertyOfNullFor0(t)).then((function(t){if(200==t.code){var a=t.data;e.tableData=a.list,e.total=a.totalCount}})).finally((function(){e.loading=!1}))}},created:function(){this.getList()}},s=r,c=(a("ca1f"),a("2877")),u=Object(c["a"])(s,o,i,!1,null,"a6b43888",null);t["default"]=u.exports},"8ba4":function(e,t,a){var o=a("23e7"),i=a("5e89");o({target:"Number",stat:!0},{isInteger:i})},ca1f:function(e,t,a){"use strict";a("e395")},e395:function(e,t,a){}}]);