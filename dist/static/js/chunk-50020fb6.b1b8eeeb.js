(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50020fb6"],{"133a":function(t,e,a){},"13cc":function(t,e,a){"use strict";a.d(e,"u",(function(){return r})),a.d(e,"e",(function(){return i})),a.d(e,"p",(function(){return n})),a.d(e,"t",(function(){return l})),a.d(e,"n",(function(){return s})),a.d(e,"i",(function(){return u})),a.d(e,"m",(function(){return c})),a.d(e,"o",(function(){return d})),a.d(e,"d",(function(){return p})),a.d(e,"r",(function(){return h})),a.d(e,"b",(function(){return f})),a.d(e,"f",(function(){return m})),a.d(e,"j",(function(){return g})),a.d(e,"q",(function(){return b})),a.d(e,"a",(function(){return v})),a.d(e,"g",(function(){return y})),a.d(e,"k",(function(){return w})),a.d(e,"s",(function(){return _})),a.d(e,"c",(function(){return k})),a.d(e,"h",(function(){return x})),a.d(e,"l",(function(){return O}));var o=a("b775");function r(t){return Object(o["a"])({url:"/api/broadcasts",method:"get",params:t})}function i(t){return Object(o["a"])({url:"/api/broadcasts",method:"post",data:t})}function n(t,e){return Object(o["a"])({url:"/api/broadcasts/".concat(t),method:"patch",data:e})}function l(t){return Object(o["a"])({url:"/api/broadcasts/".concat(t),method:"get"})}function s(t){return Object(o["a"])({url:"/api/broadcasts/".concat(t),method:"delete"})}function u(t,e){return Object(o["a"])({url:"/api/broadcasts/".concat(t),method:"patch",data:e})}function c(t){return Object(o["a"])({url:"/api/broadcastStreams/".concat(t),method:"delete"})}function d(t,e){return Object(o["a"])({url:"/api/broadcastStreams/".concat(t),method:"patch",data:e})}function p(t){return Object(o["a"])({url:"/api/broadcastStreams",method:"post",data:t})}function h(t){return Object(o["a"])({url:"/api/ad_places",method:"get",params:t})}function f(t){return Object(o["a"])({url:"/api/ad_places",method:"post",data:t})}function m(t,e){return Object(o["a"])({url:"/api/ad_places/".concat(t),method:"patch",data:e})}function g(t){return Object(o["a"])({url:"/api/product_versions/".concat(t),method:"delete"})}function b(t){return Object(o["a"])({url:"/api/ads",method:"get",params:t})}function v(t){return Object(o["a"])({url:"/api/ads",method:"post",data:t})}function y(t,e){return Object(o["a"])({url:"/api/ads/".concat(t),method:"patch",data:e})}function w(t){return Object(o["a"])({url:"/api/ads/".concat(t),method:"delete"})}function _(t){return Object(o["a"])({url:"/api/push",method:"get",params:t})}function k(t){return Object(o["a"])({url:"/api/push",method:"post",data:t})}function x(t,e){return Object(o["a"])({url:"/api/push/".concat(t),method:"patch",data:e})}function O(t){return Object(o["a"])({url:"/api/push/".concat(t),method:"delete"})}},"1da2":function(t,e,a){},"25eb":function(t,e,a){var o=a("23e7"),r=a("c20d");o({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},"734e":function(t,e,a){"use strict";a("133a")},"7abb":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xl-see-section"},[a("div",{staticClass:"xl-see-section--tree"},[a("el-tree",{ref:"tree",attrs:{data:t.channelsList,"node-key":"id",props:t.props,"expand-on-click-node":!1,"default-expanded-keys":t.defaultExpandedKeys},on:{"current-change":t.treeChange}})],1),a("div",{staticClass:"xl-see-section--content"},[a("div",{staticClass:"search"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"新闻名称:",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.keyword,callback:function(e){t.$set(t.queryParams,"keyword",e)},expression:"queryParams.keyword"}})],1),a("el-form-item",{attrs:{label:"新闻类型:",prop:"type"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:t.queryParams.type,callback:function(e){t.$set(t.queryParams,"type",e)},expression:"queryParams.type"}},t._l(t.typeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"新闻状态:",prop:"status"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择状态",clearable:""},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l([{value:"",label:"全部"}].concat(t.statusOptions),(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"创建日期:"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleDateChange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleReset}},[t._v(" 重置 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleQuery}},[t._v(" 搜索 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:t.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"新闻ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"新闻封面",align:"center",prop:"id",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.cover||t.useravatar,fit:"cover"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{slot:"error",src:t.useravatar,alt:""},slot:"error"})])]}}])}),a("el-table-column",{attrs:{label:"新闻标题",align:"center",prop:"title","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"watch-detail-btn",attrs:{type:"text"},on:{click:function(a){return t.handleWatch(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{label:"新闻类型",align:"center",prop:"typeLabel"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return t.statusChange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"作者",align:"center",prop:"author_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"排序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleSort(e.row)}}},[t._v(" "+t._s(e.row.sort)+" ")])]}}])}),a("el-table-column",{attrs:{label:"发布时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"440"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:1===e.row.top?"qxzd":"zd",label:1===e.row.top?"取消置顶":"置顶"},on:{fatherMethod:function(a){return t.handlePlaced(e.row)}}}),1===e.row.status?a("Iconbutton",{attrs:{icontype:"ckxq",label:"查看详情"},on:{fatherMethod:function(a){return t.handleWatch(e.row)}}}):t._e(),1!==e.row.status?a("Iconbutton",{attrs:{icontype:"xg",label:"编辑"},on:{fatherMethod:function(a){return t.handleEdit(e.row)}}}):t._e(),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.handleListDelete(e.row)}}}),a("Iconbutton",{attrs:{icontype:"yl",label:"预览"},on:{fatherMethod:function(a){return t.handlePreview(e.row)}}}),a("Iconbutton",{attrs:{icontype:"ts",label:"推送"},on:{fatherMethod:function(a){return t.handlePush(e.row)}}}),a("Iconbutton",{attrs:{icontype:"czjl",label:"操作记录"},on:{fatherMethod:function(a){return t.handleHistory(e.row)}}})],1)]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1),t.detailDialog.show?a("el-dialog",{attrs:{width:"1200px",title:"查看",top:"20px",visible:t.detailDialog.show},on:{"update:visible":function(e){return t.$set(t.detailDialog,"show",e)}}},[a("new-detail",{attrs:{id:t.detailDialog.id,visible:t.detailDialog.show,disabled:t.detailDialog.disabled},on:{"update:visible":function(e){return t.$set(t.detailDialog,"show",e)},refresh:t.refresh}})],1):t._e(),a("el-dialog",{attrs:{width:"400px",title:"调整排序",visible:t.sortDialog.show},on:{"update:visible":function(e){return t.$set(t.sortDialog,"show",e)}}},[a("el-form",{ref:"sortForm",attrs:{model:t.sortDialog.form,rules:t.sortDialog.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"当前排序:",prop:"old"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{disabled:""},model:{value:t.sortDialog.form.old,callback:function(e){t.$set(t.sortDialog.form,"old",e)},expression:"sortDialog.form.old"}})],1),a("el-form-item",{attrs:{label:"目标排序:",prop:"now"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入目标排序"},on:{change:t.numberChange},model:{value:t.sortDialog.form.now,callback:function(e){t.$set(t.sortDialog.form,"now",t._n(e))},expression:"sortDialog.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.sortDialog.show=!1}}},[t._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterSortDialog}},[t._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{width:"500px",title:t.pushDialog.title,visible:t.pushDialog.show},on:{"update:visible":function(e){return t.$set(t.pushDialog,"show",e)}}},[a("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,rules:t.dialogRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"推送终端:",prop:"push_to.terminal"}},[a("el-select",{attrs:{placeholder:"请选择终端",clearable:""},model:{value:t.dialogForm.push_to.terminal,callback:function(e){t.$set(t.dialogForm.push_to,"terminal",e)},expression:"dialogForm.push_to.terminal"}},t._l(t.terminal,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"消息内容:",prop:"title"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入消息内容",clearable:""},model:{value:t.dialogForm.title,callback:function(e){t.$set(t.dialogForm,"title",e)},expression:"dialogForm.title"}})],1),a("el-form-item",{attrs:{label:"消息详情:",prop:"content"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入消息详情",clearable:"",type:"textarea",row:4},model:{value:t.dialogForm.content,callback:function(e){t.$set(t.dialogForm,"content",e)},expression:"dialogForm.content"}})],1),a("el-form-item",{attrs:{label:"链接到:",prop:"linked_to.id"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{disabled:""},model:{value:t.dialogForm.linked_to.title,callback:function(e){t.$set(t.dialogForm.linked_to,"title",e)},expression:"dialogForm.linked_to.title"}})],1),a("el-form-item",{attrs:{label:"推送时间:",prop:"push_time"}},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.switchVal,expression:"switchVal"}],staticStyle:{width:"194px","margin-right":"10px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间","picker-options":t.pickerOptions},on:{focus:t.pickerFocus},model:{value:t.dialogForm.push_time,callback:function(e){t.$set(t.dialogForm,"push_time",e)},expression:"dialogForm.push_time"}}),a("el-switch",{attrs:{size:"small","active-text":"自定义时间","inactive-text":"立即推送"},on:{change:t.switchChange},model:{value:t.switchVal,callback:function(e){t.switchVal=e},expression:"switchVal"}})],1),a("el-form-item",{attrs:{label:"是否推送给个人:",prop:"push_to.type"}},[a("el-radio-group",{model:{value:t.dialogForm.push_to.type,callback:function(e){t.$set(t.dialogForm.push_to,"type",e)},expression:"dialogForm.push_to.type"}},[a("el-radio",{attrs:{label:"all"}},[t._v("否")]),a("el-radio",{attrs:{label:"single"}},[t._v("是")])],1)],1),"single"===t.dialogForm.push_to.type?a("el-form-item",{attrs:{label:"用户手机号:",prop:"push_to.cid"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入用户手机号",clearable:""},model:{value:t.dialogForm.push_to.cid,callback:function(e){t.$set(t.dialogForm.push_to,"cid",e)},expression:"dialogForm.push_to.cid"}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.pushDialog.show=!1}}},[t._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterPushDialog}},[t._v(" 确 定 ")])],1)],1),t.history.show?a("el-dialog",{attrs:{width:"700px",title:"操作记录",visible:t.history.show},on:{"update:visible":function(e){return t.$set(t.history,"show",e)}}},[a("version-history",{attrs:{id:t.history.id,type:"news"}})],1):t._e()],1)},r=[],i=a("ade3"),n=a("5530"),l=a("1da1"),s=(a("96cf"),a("99af"),a("dca8"),a("d81d"),a("9911"),a("25eb"),a("a9e3"),a("9129"),a("d3b7"),a("7db0"),a("0fea")),u=a("13cc"),c=a("cc48"),d=a("1d6e"),p=a("9d3e"),h=a("469d"),f={name:"SeeSection",components:{NewDetail:d["a"],VersionHistory:p["a"]},data:function(){var t=function(){var t=new Date((new Date).getTime()+1e3),e=t.getHours(),a=t.getMinutes(),o=t.getSeconds();return"".concat(e,":").concat(a,":").concat(o," - 23:59:59")};return{channelsList:[],typeOptions:[{label:"全部",value:""},{label:"新闻",value:"news"},{label:"图集",value:"album"},{label:"视频",value:"video"},{label:"外链",value:"outer_link"}],statusOptions:[{label:"已上线",value:1},{label:"待审核",value:0},{label:"已下线",value:2}],props:Object.freeze({label:"name"}),queryParams:{status:"",keyword:"",type:"",startdate:"",enddate:"",pageSize:10,page:1},switchVal:!1,pickerOptions:{selectableRange:t(),disabledDate:function(t){return t.getTime()<(new Date).getTime()-864e5}},useravatar:a("3f1e"),dateValue:"",tableData:[],currentKey:"",defaultExpandedKeys:[],total:0,loading:!1,detailDialog:{show:!1,id:"",disabled:!1},sortDialog:{show:!1,id:"",form:{old:"",now:""},rules:{now:[{required:!0,message:"请输入目标排序",trigger:"blur"}]}},pushDialog:{show:!1,title:"新增推送"},terminal:[{label:"全部",value:3},{label:"ios",value:2},{label:"安卓",value:1}],dialogForm:{title:"",content:"",cover:"",linked_to:{route_type:"news",type:"",id:"",title:""},push_to:{type:"all",terminal:"",cid:""},push_time:""},dialogRules:{title:[{required:!0,message:"请输入消息内容",trigger:"blur"}],content:[{required:!0,message:"请输入消息详情",trigger:"blur"}],push_time:[{required:!0,message:"请选择推送时间",trigger:"change"}],"push_to.cid":[{required:!0,message:"请输入用户手机号",trigger:"blur"}],"linked_to.id":[{required:!0,message:"请选择链接到的内容",trigger:"change"}],"push_to.terminal":[{required:!0,message:"请选择推送终端",trigger:"change"}]},product_id:"",history:{show:!1,id:""}}},created:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getChannels();case 2:t.$nextTick((function(){var e,a,o=t.$route.query.id||(null===(e=t.channelsList[0])||void 0===e?void 0:e.id);t.defaultExpandedKeys=[o],t.$refs.tree.setCurrentKey(o),t.product_id=(null===(a=t.$refs.tree.getCurrentNode())||void 0===a?void 0:a.product_id)||"",t.getList()}));case 3:case"end":return e.stop()}}),e)})))()},methods:{switchChange:function(){var t=this;this.$nextTick((function(){var e;null===(e=t.$refs.dialogForm)||void 0===e||e.clearValidate("push_time")}))},pickerFocus:function(){this.pickerOptions.selectableRange=this.updateSelectableRange()},filterNode:function(t){var e=this,a=[];return t.map((function(t){var o=t.children,r=void 0===o?[]:o;1===t.status&&a.push(Object(n["a"])(Object(n["a"])({},t),{},{children:e.filterNode(r)}))})),a},getChannels:function(){var t=this;return Object(s["mb"])({status:1}).then((function(e){t.channelsList=e}))},handleDateChange:function(t){var e=t||["",""];this.queryParams.startdate=e[0],this.queryParams.enddate=e[1]},handleReset:function(){this.dateValue="",Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handlePush:function(t){var e=t.type,a=t.id,o=t.title,r=t.link;this.resetForm("dialogForm"),this.switchVal=!1,Object.assign(this.dialogForm,{linked_to:Object(n["a"])({route_type:"news",type:e,id:a,title:o},r?{link:r}:{})}),this.pushDialog.show=!0},enterPushDialog:function(){var t,e=this;this.switchVal||(this.dialogForm.push_time=Object(h["a"])(new Date,"yyyy-MM-dd hh:mm:ss")),null===(t=this.$refs.dialogForm)||void 0===t||t.validate((function(t){if(t){var a=e.product_id,o=e.dialogForm,r=o.push_to.cid,i={product_id:a,extra:Object(n["a"])(Object(n["a"])({},o),{},{push_to:Object(n["a"])(Object(n["a"])({},o.push_to),{},{cid:r?[r]:[]})})};Object(u["c"])(i).then((function(t){e.$message.success(t.message),e.pushDialog.show=!1}))}}))},numberChange:function(t){t=Number.parseInt(t),this.sortDialog.form.now=Number.isNaN(t)?"":t},handleSort:function(t){var e=t.id,a=t.sort;Object.assign(this.sortDialog,{show:!0,id:e,form:{old:a,now:""}})},enterSortDialog:function(){var t,e=this;null===(t=this.$refs.sortForm)||void 0===t||t.validate((function(t){if(t){var a=e.sortDialog,o=a.id,r=a.form;Object(c["e"])(Object(i["a"])({},o,r.now)).then((function(){e.$message.success("修改成功"),e.sortDialog.show=!1,e.getList()}))}}))},handlePlaced:function(t){var e=this,a=t.top,o=t.id;Object(c["x"])({ids:o,top:1===a?0:1}).then((function(){e.$message.success(1===a?"取消置顶":"置顶"),e.getList()}))},handlePreview:function(t){var e=t.id;this.$router.push({name:"Preview",query:{id:e,type:"news"}})},handleHistory:function(t){var e=t.id;this.history={show:!0,id:e}},handleWatch:function(t){var e=t.id;this.detailDialog={id:e,show:!0,disabled:!0}},handleEdit:function(t){var e=t.id;this.detailDialog={id:e,show:!0,disabled:!1}},statusChange:function(t){var e=this,a=t.id,o=t.status;Object(c["f"])({ids:a,status:o}).then((function(){e.$message.success("修改状态成功"),e.getList()}))},handleListDelete:function(t){var e=this,a=t.id;this.$confirm("此操作将永久删除这条新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["j"])(a).then((function(){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},treeChange:function(t){this.product_id=t.product_id,this.handleReset(),this.getList()},getList:function(){var t=this,e=this.$refs.tree.getCurrentNode();this.$router.push({path:this.$route.path,query:{id:e.id}}),this.loading=!0;var a=Object(n["a"])(Object(n["a"])({},this.queryParams),{},{channel_id:e.id});Object(c["r"])(this.removePropertyOfNullFor0(a)).then((function(e){t.total=e.total,t.tableData=(e.data||[]).map((function(e){var a=t.typeOptions.find((function(t){return e.type===t.value})),o=e.cover[0];return Object(n["a"])(Object(n["a"])({},e),{},{typeLabel:a&&a.label||"",cover:o&&o.path||""})}))})).finally((function(){t.loading=!1}))},refresh:function(){this.getList(),this.detailDialog.id=""}}},m=f,g=(a("9f70"),a("2877")),b=Object(g["a"])(m,o,r,!1,null,null,null);e["default"]=b.exports},9129:function(t,e,a){var o=a("23e7");o({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},"9d3e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xl-version-history"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:t.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"created_at",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"user.name",label:"姓名","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"operation",label:"操作记录","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleWatch(e.row)}}},[t._v(" 查看详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getHistory}}),t.dialog.show?a("el-dialog",{attrs:{width:"1200px",top:"20px",title:t.dialog.title,visible:t.dialog.show,"append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},["news"===t.type?a("new-detail",{attrs:{id:t.id,visible:t.dialog.show,"fetch-suggestions":t.fetchSuggestions,disabled:!0},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}}):t._e(),"script"===t.type?a("scripts-details",{staticStyle:{padding:"10px",margin:"0"},attrs:{id:t.id,visible:t.dialog.show,"fetch-suggestions":t.fetchSuggestions,disabled:!0},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}}):t._e()],1):t._e()],1)},r=[],i=a("5530"),n=(a("a9e3"),a("d3b7"),a("cc48")),l=a("1d6e"),s=a("5fe8"),u={name:"versionHistory",components:{NewDetail:l["a"],scriptsDetails:s["default"]},props:{type:{type:String,default:"script"},id:{type:Number,required:!0}},data:function(){return{tableData:[],total:0,loading:!1,queryParams:{page:1,pageSize:10},dialog:{title:"查看详情",show:!1,id:""},fetchSuggestions:function(){return new Promise((function(t){return t()}))}}},methods:{getHistory:function(){var t=this,e=this.id,a=this.type;this.loading=!0,Object(n["o"])(Object(i["a"])({item_type:a,item_id:e},this.queryParams)).then((function(e){var a=e.data,o=e.total;t.tableData=a,t.total=o})).finally((function(){t.loading=!1}))},handleWatch:function(t){var e=t.extra;this.fetchSuggestions=function(){return new Promise((function(t){t(e.item)}))},this.dialog={title:"查看详情",show:!0}}},created:function(){this.getHistory()}},c=u,d=(a("734e"),a("2877")),p=Object(d["a"])(c,o,r,!1,null,"cb2618ba",null);e["a"]=p.exports},"9f70":function(t,e,a){"use strict";a("1da2")},c20d:function(t,e,a){var o=a("da84"),r=a("58a8").trim,i=a("5899"),n=o.parseInt,l=/^[+-]?0[Xx]/,s=8!==n(i+"08")||22!==n(i+"0x16");t.exports=s?function(t,e){var a=r(String(t));return n(a,e>>>0||(l.test(a)?16:10))}:n}}]);