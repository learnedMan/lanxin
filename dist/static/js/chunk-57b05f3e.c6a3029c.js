(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57b05f3e"],{"009a":function(e,t,a){},"0257":function(e,t,a){},"13cc":function(e,t,a){"use strict";a.d(t,"B",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"u",(function(){return o})),a.d(t,"A",(function(){return s})),a.d(t,"r",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"t",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"x",(function(){return f})),a.d(t,"b",(function(){return g})),a.d(t,"h",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"w",(function(){return h})),a.d(t,"a",(function(){return x})),a.d(t,"i",(function(){return _})),a.d(t,"o",(function(){return y})),a.d(t,"z",(function(){return w})),a.d(t,"d",(function(){return k})),a.d(t,"j",(function(){return O})),a.d(t,"p",(function(){return $})),a.d(t,"C",(function(){return S})),a.d(t,"g",(function(){return j})),a.d(t,"v",(function(){return D})),a.d(t,"m",(function(){return N})),a.d(t,"y",(function(){return q})),a.d(t,"c",(function(){return C})),a.d(t,"s",(function(){return L})),a.d(t,"l",(function(){return z}));var r=a("b775"),i=a("b60c");function n(e){return Object(r["a"])({url:"/api/broadcasts",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/api/broadcasts",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function s(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"get"})}function c(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"delete"})}function u(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function d(e){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"delete"})}function m(e,t){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"patch",data:t})}function p(e){return Object(r["a"])({url:"/api/broadcastStreams",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/api/ad_places",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/api/ad_places",method:"post",data:e})}function b(e,t){return Object(r["a"])({url:"/api/ad_places/".concat(e),method:"patch",data:t})}function v(e){return Object(r["a"])({url:"/api/product_versions/".concat(e),method:"delete"})}function h(e){return Object(r["a"])({url:"/api/ads",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/api/ads",method:"post",data:e})}function _(e,t){return Object(r["a"])({url:"/api/ads/".concat(e),method:"patch",data:t})}function y(e){return Object(r["a"])({url:"/api/ads/".concat(e),method:"delete"})}function w(e){return Object(r["a"])({url:"/api/push",method:"get",params:e})}function k(e){return Object(r["a"])({url:"/api/push",method:"post",data:e})}function O(e,t){return Object(r["a"])({url:"/api/push/".concat(e),method:"patch",data:t})}function $(e){return Object(r["a"])({url:"/api/push/".concat(e),method:"delete"})}function S(e){return Object(i["a"])({url:"/internal/social/topic/list",method:"post",params:e})}function j(e){return Object(i["a"])({url:"/internal/social/topic/add",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/internal/social/topic/update",method:"post",data:e})}function N(e){return Object(i["a"])({url:"/internal/social/topic/del",method:"post",data:e})}function q(e){return Object(i["a"])({url:"/internal/social/classify/list",method:"post",params:e})}function C(e){return Object(i["a"])({url:"/internal/social/classify/add",method:"post",data:e})}function L(e){return Object(i["a"])({url:"/internal/social/classify/update",method:"post",data:e})}function z(e){return Object(i["a"])({url:"/internal/social/classify/del",method:"post",data:e})}},"1cfd":function(e,t,a){e.exports=a.p+"static/img/1402-240.597930fe.png"},"31dc":function(e,t,a){e.exports=a.p+"static/img/1402-222.bdb2b7c8.png"},3824:function(e,t,a){"use strict";a("8c78")},"3bbb":function(e,t,a){"use strict";a("009a")},"46f0":function(e,t,a){"use strict";a("cd8a")},"48c5":function(e,t,a){e.exports=a.p+"static/img/1402-230.ad860dd5.png"},"4e52":function(e,t,a){e.exports=a.p+"static/img/1402-205.85451c9a.png"},"5a2d":function(e,t,a){e.exports=a.p+"static/img/1402-200.4003f04c.png"},"5e8e2":function(e,t,a){},"641c":function(e,t,a){e.exports=a.p+"static/img/1402-220.eb6d8b9e.png"},7680:function(e,t,a){e.exports=a.p+"static/img/1402-202.12cf8660.png"},"84ea":function(e,t,a){e.exports=a.p+"static/img/1402-231.e2c5c65a.png"},"8c78":function(e,t,a){},"96be":function(e,t,a){"use strict";a("5e8e2")},9795:function(e,t,a){var r={"./1402-200.png":"5a2d","./1402-201.png":"a98c","./1402-202.png":"7680","./1402-203.png":"dc2d","./1402-204.png":"dd6a","./1402-205.png":"4e52","./1402-206.png":"fe4c","./1402-210.png":"b9f9","./1402-211.png":"a656","./1402-212.png":"e21b","./1402-220.png":"641c","./1402-221.png":"a691","./1402-222.png":"31dc","./1402-230.png":"48c5","./1402-231.png":"84ea","./1402-240.png":"1cfd"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=n,e.exports=i,i.id="9795"},"9fd7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-upload-video"},[a("el-upload",{attrs:{name:"file",accept:"video/*",action:e.actionUrl,headers:e.uploadHeader,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.beforeUploadVideo,"on-progress":e.handleProgress,"on-error":e.handleUploadError}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}]},[e._v("上传视频"),a("i",{staticClass:"el-icon-upload el-icon--right",staticStyle:{"font-size":"14px"}})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"xl-upload-video--play",on:{click:e.play}},[e._v(e._s(e.value)+" "),a("i",{staticClass:"el-icon-video-play"})]),a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.percentage,expression:"percentage"}],attrs:{percentage:e.percentage}}),e.dialog.show?a("el-dialog",{attrs:{width:"640px",title:"视频",visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("video",{attrs:{height:"400",width:"600",controls:""}},[a("source",{attrs:{src:e.dialog.url}}),e._v(" 您的浏览器不支持 video 标签。 ")])]):e._e()],1)},i=[],n=(a("e35a"),a("0d7a"),a("9302"),{props:{value:String},data:function(){return{percentage:0,dialog:{show:!1,url:""}}},computed:{actionUrl:function(){return this.videourl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}},type:function(){var e=this.value&&this.value.split(".");return(null===e||void 0===e?void 0:e[e.length-1])||""}},methods:{beforeUploadVideo:function(e){var t=e.size/1024/1024<=300,a=["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb","video/mov"];return-1==a.indexOf(e.type)?(this.$message.warning("请上传正确的视频格式: ".concat(a.join())),!1):t?(this.percentage=0,!0):(this.$message.warning("视频大小不能超过300MB"),!1)},handleProgress:function(){this.percentage=90},handleUploadSuccess:function(e,t,a){e.status_code>=200&&e.status_code<300?(this.percentage=100,this.$message.success("视频上传成功!"),this.$emit("input",e.path)):(this.$message.error("视频上传失败!"),this.percentage=0,a.length=0)},handleUploadError:function(){this.$message.error("上传失败, 请重新上传!"),this.percentage=0},play:function(){this.dialog={show:!0,url:this.value}}}}),l=n,o=(a("46f0"),a("cba8")),s=Object(o["a"])(l,r,i,!1,null,"664e7a03",null);t["a"]=s.exports},a656:function(e,t,a){e.exports=a.p+"static/img/1402-211.f8b57eb1.png"},a691:function(e,t,a){e.exports=a.p+"static/img/1402-221.90d4e924.png"},a98c:function(e,t,a){e.exports=a.p+"static/img/1402-201.d761e3cb.png"},b9f9:function(e,t,a){e.exports=a.p+"static/img/1402-210.9fc2bc1e.png"},c73d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("keep-alive",{attrs:{exclude:e.exclude}},[a(e.component,{tag:"component",attrs:{id:e.id},on:{watchConsole:e.watchConsole,handleReturn:e.handleReturn}})],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"xl-studio-list"},[r("div",{staticClass:"search"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[r("el-form-item",{attrs:{label:"直播间名称:",prop:"keyword"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),r("el-form-item",{attrs:{label:"类型:",prop:"broadcast_type"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:e.queryParams.broadcast_type,callback:function(t){e.$set(e.queryParams,"broadcast_type",t)},expression:"queryParams.broadcast_type"}},e._l(e.broadcast_typeOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"直播状态:",prop:"live"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:e.queryParams.live,callback:function(t){e.$set(e.queryParams,"live",t)},expression:"queryParams.live"}},e._l(e.liveOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"审核状态:",prop:"status"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择状态",clearable:""},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.publishOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"创建时间:"}},[r("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.handleDateChange(t,"createDate")}},model:{value:e.createDate,callback:function(t){e.createDate=t},expression:"createDate"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增 ")])],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[e.isMobile?e._e():r("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),r("el-table-column",{attrs:{label:"直播间名称",align:"center",prop:"title","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"直播间类型",align:"center",prop:"broadcast_typeLabel"}}),r("el-table-column",{attrs:{label:"直播状态",align:"center",prop:"liveLabel"}}),r("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{size:"small"},on:{change:function(a){return e.publishChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.publishOptions.filter((function(e){return""!==e.value})),(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"开播时间",align:"center",prop:"start_time"}}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"end_time"}}),r("el-table-column",{attrs:{label:"运营",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:function(a){return e.watchConsole(t.row)}}},[e._v(" 控制台 ")])]}}])}),e.isMobile?e._e():r("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at"}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"verify-table-action"},[r("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.handleEdit(t.row)}}}),r("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleDelete(t.row)}}}),r("Iconbutton",{attrs:{icontype:"fb",label:"栏目"},on:{fatherMethod:function(a){return e.handlePublish(t.row)}}})],1)]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{width:"600px",title:e.publishDialog.title,visible:e.publishDialog.show},on:{"update:visible":function(t){return e.$set(e.publishDialog,"show",t)}}},[r("el-form",{ref:"publishForm",attrs:{model:e.publishDialog.form,rules:e.publishDialog.rules}},[r("el-form-item",{attrs:{"label-width":"120px",label:"栏目",prop:"channel_id"}},[r("el-cascader",{staticStyle:{width:"350px"},attrs:{filterable:"",options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.publishDialog.form.channel_id,callback:function(t){e.$set(e.publishDialog.form,"channel_id",t)},expression:"publishDialog.form.channel_id"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.publishDialog.show=!1}}},[e._v(" 取 消 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterPublishDialog}},[e._v(" 确 定 ")])],1)],1),e.dialog.show?r("el-dialog",{attrs:{width:"800px",top:"20px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[r("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialog.rules,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{"label-width":"120px",label:"发布栏目:",prop:"channels"}},[r("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.dialog.form.channels,callback:function(t){e.$set(e.dialog.form,"channels",t)},expression:"dialog.form.channels"}})],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播间名称:",prop:"extra.title"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入直播间名称",clearable:"",size:"small"},model:{value:e.dialog.form.extra.title,callback:function(t){e.$set(e.dialog.form.extra,"title",t)},expression:"dialog.form.extra.title"}})],1),r("el-form-item",{attrs:{label:"直播封面:",prop:"extra.template_style"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.template_style,callback:function(t){e.$set(e.dialog.form.extra,"template_style",t)},expression:"dialog.form.extra.template_style"}},e._l(e.templateStyleLists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),r("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),r("el-form-item",{attrs:{prop:"extra.cover"}},[r("cropper",{attrs:{count:e.imgCount},model:{value:e.dialog.form.extra.cover,callback:function(t){e.$set(e.dialog.form.extra,"cover",t)},expression:"dialog.form.extra.cover"}})],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播类型:",prop:"extra.broadcast_type"}},[r("el-radio-group",{on:{change:e.statementChange},model:{value:e.dialog.form.extra.broadcast_type,callback:function(t){e.$set(e.dialog.form.extra,"broadcast_type",t)},expression:"dialog.form.extra.broadcast_type"}},e._l(e.broadcast_typeOptions.filter((function(e){return""!==e.value})),(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),"3"===e.dialog.form.extra.broadcast_type?r("el-form-item",{attrs:{"label-width":"120px",label:"顶部图片:",prop:"extra.banner"}},[r("upload-single",{model:{value:e.dialog.form.extra.banner,callback:function(t){e.$set(e.dialog.form.extra,"banner",t)},expression:"dialog.form.extra.banner"}})],1):e._e(),r("el-form-item",{attrs:{"label-width":"120px",label:"图文直播:",prop:"extra.statement"}},[r("el-radio-group",{attrs:{disabled:"3"===e.dialog.form.extra.broadcast_type},model:{value:e.dialog.form.extra.statement,callback:function(t){e.$set(e.dialog.form.extra,"statement",t)},expression:"dialog.form.extra.statement"}},e._l(e.statementOptions,(function(t){return r("el-radio",{key:t.value,staticStyle:{"margin-top":"10px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播时间:",prop:"extra.start_time"}},[r("el-date-picker",{attrs:{disabled:""!==e.dialog.id,type:"datetimerange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.handleDateChange(t,"liveTime")}},model:{value:e.liveTime,callback:function(t){e.liveTime=t},expression:"liveTime"}})],1),r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.end_time"}}),r("el-form-item",{attrs:{prop:"extra.allow_comment",label:"评论控制"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.allow_comment,callback:function(t){e.$set(e.dialog.form.extra,"allow_comment",t)},expression:"dialog.form.extra.allow_comment"}},[r("el-radio",{key:"0",attrs:{label:"0"}},[e._v("先审后发")]),r("el-radio",{key:"1",attrs:{label:"1"}},[e._v("先发后审")]),r("el-radio",{key:"2",attrs:{label:"2"}},[e._v("禁止评论")])],1)],1),r("el-form-item",{attrs:{prop:"extra.allow_share",label:"允许分享"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.dialog.form.extra.allow_share,callback:function(t){e.$set(e.dialog.form.extra,"allow_share",t)},expression:"dialog.form.extra.allow_share"}},[r("el-radio",{key:"1",attrs:{label:"1"}},[e._v("是")]),r("el-radio",{key:"0",attrs:{label:"0"}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{"label-width":"120px",label:"直播间简介:",prop:"extra.intro"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入简介",clearable:"",type:"textarea",rows:"5"},model:{value:e.dialog.form.extra.intro,callback:function(t){e.$set(e.dialog.form.extra,"intro",t)},expression:"dialog.form.extra.intro"}})],1),r("el-form-item",{attrs:{label:"机器人数据",prop:"extra.robot_settings.enable"}},[r("el-switch",{attrs:{"active-value":1},model:{value:e.dialog.form.extra.robot_settings.enable,callback:function(t){e.$set(e.dialog.form.extra.robot_settings,"enable",t)},expression:"dialog.form.extra.robot_settings.enable"}})],1),r("el-form-item",{attrs:{label:"基础观看人数:"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.view_base_num"}},[r("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.view_base_num,callback:function(t){e.$set(e.dialog.form.extra,"view_base_num",t)},expression:"dialog.form.extra.view_base_num"}}),e._v(" 人 ")],1)],1)],1),r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.form.extra.robot_settings.enable,expression:"dialog.form.extra.robot_settings.enable"}],staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:24}},[e._v(" 每分钟额外显示 "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.view.min"}},[r("el-input-number",{attrs:{controls:!1,precision:0,max:e.dialog.form.extra.robot_settings.view.max||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.view.min,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.view,"min",t)},expression:"dialog.form.extra.robot_settings.view.min"}})],1),e._v(" ~ "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.view.max"}},[r("el-input-number",{attrs:{controls:!1,precision:0,min:e.dialog.form.extra.robot_settings.view.min||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.view.max,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.view,"max",t)},expression:"dialog.form.extra.robot_settings.view.max"}})],1),e._v(" 内的随机整数（最大值建议≤100） ")],1)],1)],1),r("el-form-item",{attrs:{label:"基础点赞数量:"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"extra.praise_base_num"}},[r("el-input-number",{attrs:{controls:!1,precision:0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.praise_base_num,callback:function(t){e.$set(e.dialog.form.extra,"praise_base_num",t)},expression:"dialog.form.extra.praise_base_num"}}),e._v(" 个 ")],1)],1)],1),r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.form.extra.robot_settings.enable,expression:"dialog.form.extra.robot_settings.enable"}],staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:24}},[e._v(" 每分钟增加 "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.praise.min"}},[r("el-input-number",{attrs:{controls:!1,max:e.dialog.form.extra.robot_settings.praise.max||1/0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.praise.min,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.praise,"min",t)},expression:"dialog.form.extra.robot_settings.praise.min"}})],1),e._v(" ~ "),r("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{prop:"extra.robot_settings.praise.max"}},[r("el-input-number",{attrs:{controls:!1,min:e.dialog.form.extra.robot_settings.praise.min||0,placeholder:"请输入",clearable:""},model:{value:e.dialog.form.extra.robot_settings.praise.max,callback:function(t){e.$set(e.dialog.form.extra.robot_settings.praise,"max",t)},expression:"dialog.form.extra.robot_settings.praise.max"}})],1),e._v(" 内的随机整数 ")],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialog.show=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"},{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{type:"primary"},on:{click:e.enterChangeDialog}},[e._v("确 定")])],1)],1):e._e()],1)},l=[],o=a("06c4"),s=(a("77ad"),a("4194"),a("2eeb"),a("9302"),a("e18c"),a("13cc")),c=a("0fea"),u=a("e60d"),d=a("b49d"),m={name:"studioList",components:{uploadSingle:u["a"],Cropper:d["a"]},data:function(){var e=this,t=function(t,a,r){var i=e.imgCount,n=e.dialog.form.extra.template_style;Array.isArray(a)&&0!==a.length||"240"==n?a.slice(0,i).every((function(e){return e.path}))||"240"==n?r():r(new Error("请上传".concat(i,"张图片"))):r(new Error("请上传图片"))};return{loading:!1,queryParams:{keyword:"",live:"",broadcast_type:"",status:"",startdate:"",enddate:"",page:1,pageSize:10},tableData:[],total:0,cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},channelsList:[],broadcast_typeOptions:[{label:"全部",value:""},{label:"横版",value:"1"},{label:"竖版",value:"2"},{label:"纯图文",value:"3"}],liveOptions:[{label:"全部",value:""},{label:"未开始",value:0},{label:"进行中",value:1},{label:"已结束",value:2}],publishOptions:[{label:"全部",value:""},{label:"待审核",value:0},{label:"已发布",value:1},{label:"已下线",value:2}],statementOptions:[{label:"关闭（关闭后客户端不展示图文直播间）",value:"none"},{label:"关联直播间（该直播间中，多个机位共用同一图文直播）",value:"broadcast"},{label:"关联机位（该直播间中，不同机位对应各自图文直播）",value:"stream"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},liveTime:"",createDate:"",templateStyleLists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图5",value:"204",count:1,img:"1402-204.png"},{label:"大图6",value:"205",count:1,img:"1402-205.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"}],dialog:{title:"新增",id:"",show:!1,form:{channels:[],extra:{type:"broadcast",title:"",banner:"",template_style:"240",cover:[],allow_comment:"0",allow_share:"1",broadcast_type:"1",statement:"none",start_time:"",end_time:"",intro:"",view_base_num:"",praise_base_num:"",robot_settings:{enable:0,view:{min:"",max:""},praise:{min:"",max:""}}}},rules:{"extra.title":[{required:!0,message:"请输入直播间名称",trigger:"blur"}],"extra.template_style":[{required:!0,message:"请选择直播封面样式",trigger:"change"}],"extra.cover":[{validator:t,trigger:"change"}],"extra.broadcast_type":[{required:!0,message:"请选择直播类型",trigger:"change"}],"extra.start_time":[{required:!0,message:"请选择直播时间",trigger:"change"}],"extra.intro":[{required:!0,message:"请输入直播间简介",trigger:"blur"}],"extra.banner":[{required:!0,message:"请上传顶部图片",trigger:"change"}],"extra.allow_comment":[{required:!0,message:"请选择评论控制",trigger:"change"}],"extra.allow_share":[{required:!0,message:"请选择是否允许分享",trigger:"change"}]}},dialogLoading:!1,publishDialog:{show:!1,title:"发布栏目",form:{channel_id:"",broadcast_ids:""},rules:{channel_id:[{required:!0,message:"请选择栏目",trigger:"change"}]}}}},computed:{imgCount:function(e){var t,a,r=e.dialog,i=e.templateStyleLists;return null!==(t=null===(a=i.find((function(e){return e.value===r.form.extra.template_style})))||void 0===a?void 0:a.count)&&void 0!==t?t:1}},methods:{handleReset:function(){this.createDate="",Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handleAdd:function(){this.liveTime="",Object.assign(this.dialog,{title:"新增",id:"",show:!0,form:{channels:[],extra:{type:"broadcast",title:"",banner:"",allow_comment:"0",allow_share:"1",template_style:"240",cover:[],broadcast_type:"1",statement:"none",start_time:"",end_time:"",intro:"",view_base_num:"",praise_base_num:"",robot_settings:{enable:0,view:{min:"",max:""},praise:{min:"",max:""}}}}})},handleEdit:function(e){var t=this,a=e.id;this.liveTime="",Object(s["A"])(a).then((function(e){var r=e.data;t.liveTime=[r.extra.start_time,r.extra.end_time],t.$nextTick((function(){Object.assign(t.dialog,{title:"编辑",show:!0,id:a,form:{channels:r.channel.map((function(e){return e.id})),extra:Object(o["a"])(Object(o["a"])({},r.extra),{},{template_style:r.extra.template_style||"240",broadcast_type:r.extra.broadcast_type})}})}))}))},handleDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条ID为".concat(a,"的直播间, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["r"])(a).then((function(){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},publishChange:function(e){var t=this,a=e.id,r=e.status;Object(s["u"])(a,{status:r}).then((function(){t.$message.success("修改成功"),t.getList()}))},statementChange:function(e){"3"===e&&(this.dialog.form.extra.statement="broadcast")},handlePublish:function(e){var t,a=e.id,r=e.channel;Object.assign(this.publishDialog,{show:!0,form:{channel_id:r.map((function(e){return e.id})),broadcast_ids:a}}),null===(t=this.$refs.publishForm)||void 0===t||t.clearValidate()},watchConsole:function(e){var t=e.id;this.$emit("watchConsole",t)},handleDateChange:function(e,t){var a=e||["",""];"liveTime"===t?(this.dialog.form.extra.start_time=a[0],this.dialog.form.extra.end_time=a[1]):"createDate"===t&&(this.queryParams.startdate=a[0],this.queryParams.enddate=a[1])},enterChangeDialog:function(){var e,t,a=this,r=this.dialog.id,i={channels:this.dialog.form.channels.join(),extra:Object(o["a"])(Object(o["a"])({},this.dialog.form.extra),{},{cover:this.dialog.form.extra.cover.slice(0,this.imgCount)})};null===(e=this.$refs.dialogForm)||void 0===e||e.validate((function(e){e&&(a.dialogLoading=!0,t=r?Object(s["u"])(r,i):Object(s["f"])(i),t.then((function(){a.$message.success("".concat(a.dialog.title,"成功!")),a.dialog.show=!1,a.getList()})).finally((function(){a.dialogLoading=!1})))}))},enterPublishDialog:function(){var e,t=this;null===(e=this.$refs.publishForm)||void 0===e||e.validate((function(e){e&&Object(s["u"])(t.publishDialog.form.broadcast_ids,{channels:t.publishDialog.form.channel_id.join()}).then((function(){t.$message.success("发布成功"),t.publishDialog.show=!1,t.getList()}))}))},getList:function(){var e=this;this.loading=!0;var t=Object(o["a"])({},this.queryParams);Object(s["B"])(this.removePropertyOfNullFor0(t)).then((function(t){e.tableData=(t.data||[]).map((function(t){var a,r,i,n;return Object(o["a"])(Object(o["a"])({},t),{},{broadcast_typeLabel:null!==(a=null===(r=e.broadcast_typeOptions.find((function(e){return e.value===t.broadcast_type})))||void 0===r?void 0:r.label)&&void 0!==a?a:"",liveLabel:null!==(i=null===(n=e.liveOptions.find((function(e){return e.value===t.live})))||void 0===n?void 0:n.label)&&void 0!==i?i:""})})),e.total=t.total})).finally((function(){e.loading=!1}))},getChannels:function(){var e=this;Object(c["xb"])({with_special_channels:"topic"}).then((function(t){e.channelsList=t.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{disabled:!0})})),e.changeChannelName(e.channelsList)}))}},created:function(){var e;this.queryParams.keyword=(null===(e=this.$route.query)||void 0===e?void 0:e.title)||"",this.getChannels()},activated:function(){this.getList()}},p=m,f=(a("96be"),a("cba8")),g=Object(f["a"])(p,n,l,!1,null,"671a4618",null),b=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"xl-watch-console-header",attrs:{height:"120px"}},[a("div",{staticClass:"header--left"},[a("el-image",{staticStyle:{width:"140px",height:"100px"},attrs:{lazy:"",src:e.detail.cover,fit:"contain"}}),a("div",{staticClass:"header--left-detail"},[a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{staticStyle:{"font-weight":"500"},attrs:{span:24}},[e._v(e._s(e.detail.title)+" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("(当前状态: "+e._s(e.detail.label)+")")])])],1),a("el-row",{staticStyle:{"margin-bottom":"10px","font-size":"12px"}},[a("el-col",{attrs:{span:24}},[a("span",[e._v(" 开播时间: "+e._s(e.detail.extra.start_time)+" "),0===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleStart}},[e._v("提前开播(点击立即开播)")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleDelayStart}},[e._v("调整开播时间")])],1):e._e()])])],1),a("el-row",{staticStyle:{"font-size":"12px"}},[a("el-col",{attrs:{span:24}},[a("span",[e._v(" 结束时间: "+e._s(e.detail.extra.end_time)+" "),0===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleSetEnd}},[e._v("调整直播结束时间")])],1):e._e(),1===e.detail.live?a("span",{staticStyle:{"margin-left":"10px"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleEnd}},[e._v("提前停播(点击立即停播)")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:e.handleSetEnd}},[e._v("调整直播结束时间")])],1):e._e()])])],1)],1)],1),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"success",size:"mini"},on:{click:e.handleReturn}},[e._v(" 返回上一级 ")])],1),a("el-container",[a("el-aside",{staticStyle:{"background-color":"#fff"},attrs:{width:"145px"}},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:e.currentView,callback:function(t){e.currentView=t},expression:"currentView"}},e._l(e.lists,(function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})})),1)],1),a("el-main",{staticStyle:{position:"relative"}},[a(e.currentView,e._b({tag:"component"},"component",[e.$props,{newId:e.detail.news_id,uuid:e.detail.extra.comment_uuid}],!1))],1)],1),a("el-dialog",{attrs:{width:"600px",title:e.dialogStart.title,visible:e.dialogStart.show},on:{"update:visible":function(t){return e.$set(e.dialogStart,"show",t)}}},[a("el-form",{ref:"startForm",attrs:{model:e.dialogStart.form,rules:e.dialogStart.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"当前开播时间",prop:"old"}},[a("el-date-picker",{attrs:{disabled:"",type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogStart.form.old,callback:function(t){e.$set(e.dialogStart.form,"old",t)},expression:"dialogStart.form.old"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"调整到",prop:"now"}},[a("el-date-picker",{attrs:{type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogStart.form.now,callback:function(t){e.$set(e.dialogStart.form,"now",t)},expression:"dialogStart.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialogStart.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterStartDialog}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{width:"600px",title:e.dialogEnd.title,visible:e.dialogEnd.show},on:{"update:visible":function(t){return e.$set(e.dialogEnd,"show",t)}}},[a("el-form",{ref:"endForm",attrs:{model:e.dialogEnd.form,rules:e.dialogEnd.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"当前结束时间",prop:"old"}},[a("el-date-picker",{attrs:{disabled:"",type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogEnd.form.old,callback:function(t){e.$set(e.dialogEnd.form,"old",t)},expression:"dialogEnd.form.old"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"调整到",prop:"now"}},[a("el-date-picker",{attrs:{type:"datetime",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dialogEnd.form.now,callback:function(t){e.$set(e.dialogEnd.form,"now",t)},expression:"dialogEnd.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialogEnd.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterEndDialog}},[e._v(" 确 定 ")])],1)],1)],1)},h=[],x=(a("513c"),a("053b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-reservation"},[a("div",{staticClass:"xl-reservation-add"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增机位 ")])],1),a("el-tabs",{attrs:{closable:""},on:{"tab-remove":e.handleDelete},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{staticClass:"xl-reservation-save"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),e._l(e.lists,(function(t){return a("el-tab-pane",{key:t.extra.sort,attrs:{label:t.oldName,name:""+t.extra.sort}},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"机位状态"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.extra.is_valid,callback:function(a){e.$set(t.extra,"is_valid",a)},expression:"item.extra.is_valid"}})],1),a("el-form-item",{attrs:{label:"机位名称",prop:"extra.name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机位名称",clearable:"",size:"small"},model:{value:t.extra.name,callback:function(a){e.$set(t.extra,"name",a)},expression:"item.extra.name"}})],1),a("el-form-item",{attrs:{label:"机位头图",prop:"extra.cover"}},[a("upload-single",{model:{value:t.extra.cover,callback:function(a){e.$set(t.extra,"cover",a)},expression:"item.extra.cover"}})],1),a("el-form-item",{attrs:{label:"机位流地址",prop:"extra.stream_url"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机位流地址",clearable:"",size:"small"},model:{value:t.extra.stream_url,callback:function(a){e.$set(t.extra,"stream_url",a)},expression:"item.extra.stream_url"}})],1),a("el-form-item",{attrs:{label:"备用流地址",prop:"extra.stream_url_backup"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入备用流地址",clearable:"",size:"small"},model:{value:t.extra.stream_url_backup,callback:function(a){e.$set(t.extra,"stream_url_backup",a)},expression:"item.extra.stream_url_backup"}})],1),a("el-form-item",{attrs:{label:"支持回看:",prop:"extra.allow_replay"}},[a("el-radio-group",{model:{value:t.extra.allow_replay,callback:function(a){e.$set(t.extra,"allow_replay",a)},expression:"item.extra.allow_replay"}},e._l(e.replayOptions,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),"1"===t.extra.allow_replay?a("el-form-item",{attrs:{label:"回放流地址",prop:"extra.replay_stream"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入回放流地址",clearable:"",size:"small"},model:{value:t.extra.replay_stream,callback:function(a){e.$set(t.extra,"replay_stream",a)},expression:"item.extra.replay_stream"}})],1):e._e(),a("el-form-item",{attrs:{label:"直播引导片"}},[a("el-switch",{model:{value:t.guide,callback:function(a){e.$set(t,"guide",a)},expression:"item.guide"}})],1),t.guide?a("el-form-item",{attrs:{label:"播放时间",prop:"extra.guide_play_time"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.extra.guide_play_time,callback:function(a){e.$set(t.extra,"guide_play_time",a)},expression:"item.extra.guide_play_time"}})],1):e._e(),t.guide?a("el-form-item",{attrs:{label:"上传引导片",prop:"extra.guide_video"}},[a("upload-video",{model:{value:t.extra.guide_video,callback:function(a){e.$set(t.extra,"guide_video",a)},expression:"item.extra.guide_video"}})],1):e._e()],1)],1)}))],2)],1)}),_=[],y=a("e9ff"),w=a("0344"),k=(a("e186"),a("08d5"),a("6db4"),a("3466"),a("ea69"),a("1c2e"),a("9fd7")),O={components:{uploadSingle:u["a"],uploadVideo:k["a"]},props:{id:Number},data:function(){return{activeName:"",lists:[],replayOptions:[{label:"是",value:"1"},{label:"否",value:"0"}],rules:{"extra.name":[{required:!0,message:"请输入机位名称",trigger:"blur"}],"extra.cover":[{required:!0,message:"请上传机位头图",trigger:"change"}],"extra.replay_stream":[{required:!0,message:"请输入回放流地址",trigger:"blur"}],"extra.guide_play_time":[{required:!0,message:"请选择引导片播放时间",trigger:"change"}],"extra.guide_video":[{required:!0,message:"请上传引导片",trigger:"change"}]}}},methods:{handleAdd:function(){var e,t=this,a=((null===(e=Object(w["a"])(this.lists).pop())||void 0===e?void 0:e.extra.sort)||0)+1;this.$prompt("请输入机位名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入机位名",inputValidator:function(e){return null!=e&&""!==e.trim()}}).then((function(e){var r=e.value;t.lists.push({broadcast_id:t.id,oldName:r,extra:{sort:a,name:r,oldName:r,cover:"",is_valid:"1",stream_url:"",guide_video:"",allow_replay:"0",replay_stream:"",guide_play_time:"",stream_url_backup:""}}),t.activeName="".concat(a)})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},handleDelete:function(e){var t=this,a=this.lists.findIndex((function(t){return t.extra.sort==e}));if(a){var r=this.lists[a],i=r.extra,n=r.id;this.$confirm("此操作将永久删除这条名称为".concat(i.name,"的机位, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e,r=(null===(e=t.lists[a+1]||t.lists[a-1])||void 0===e?void 0:e.extra.sort)||"";null==n?(t.lists.splice(a,1),r&&(t.activeName="".concat(r))):Object(s["q"])(n).then(Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$message({message:"删除成功",type:"success"}),e.next=3,t.getList();case 3:r&&(t.activeName="".concat(r));case 4:case"end":return e.stop()}}),e)}))))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},handleSave:function(){var e,t=this,a=this.lists.findIndex((function(e){return e.extra.sort==t.activeName}));null===(e=this.$refs.form[a])||void 0===e||e.validate((function(e){if(e){var r,i=t.lists[a],n=i.id,l=i.extra,c={broadcast_id:t.id,extra:Object(o["a"])({},l)};r=null!=n?Object(s["t"])(n,c):Object(s["e"])(c),r.then((function(){t.$message.success("保存成功!"),t.getList()}))}}))},getList:function(){var e=this;return Object(s["A"])(this.id).then((function(t){var a=t.data;e.lists=(a.extra.stream||[]).sort((function(e,t){return e.extra.sort-t.extra.sort})).map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{oldName:e.extra.name.toString(),guide:!(!e.extra.guide_video||!e.extra.guide_play_time)})}))}))}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:r=null===(a=e.lists[0])||void 0===a?void 0:a.extra.sort,e.activeName=null!=r?"".concat(r):"";case 4:case"end":return t.stop()}}),t)})))()}},$=O,S=(a("d556"),Object(f["a"])($,x,_,!1,null,"bbbbf6e8",null)),j=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-direct-seeding"},["none"!=e.statement?a("div",[a("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.streamlist,(function(t,r){return a("el-tab-pane",{key:r,attrs:{label:"stream"==e.statement?t.extra.name:"",name:t.extra.name}},[a("div",{staticStyle:{height:"400px","margin-bottom":"30px"}},[a("el-table",{ref:"tableList",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:e.dataList,height:"400"}},[a("el-table-column",{attrs:{prop:"created_at",label:"时间"}}),a("el-table-column",{attrs:{label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.row.content)}})]}}],null,!0)})],1)],1)])})),1),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"图片/视频",prop:"content"}},[a("editor",{model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("发送")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1):e._e()])},N=[],q=(a("08ba"),a("469d")),C=a("156b"),L={data:function(){return{activeName:"",statement:"",ruleForm:{broadcast_id:"",host_name:"",content:"",stream_id:"",time:"",file:"",image:""},rules:{content:[{required:!0,message:"请填写文字",trigger:"blur"}]},statementquery:{id:"",stream_id:""},dataList:[],streamlist:[]}},components:{Editor:C["a"]},props:{id:Number},created:function(){this.statementquery.id=this.id,this.getbroadcastStatement()},updated:function(){this.downscroll()},methods:{handleAvatarSuccess:function(e,t){this.ruleForm[e]=t.path},beforeAvatarUpload:function(e){var t=e.size/1024/1024<20;return t||this.$message.error("上传头像图片大小不能超过 20MB!"),t},downscroll:function(){try{this.$refs.tableList.forEach((function(e){e.bodyWrapper.scrollTop=e.bodyWrapper.scrollHeight}))}catch(e){}},getbroadcastStatement:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getbroadcasts();case 2:t.sent,e.getdatalist();case 4:case"end":return t.stop()}}),t)})))()},getdatalist:function(){var e=this;this.dataList=[],Object(c["Vb"])(this.statementquery.id,this.statementquery.stream_id).then((function(t){e.dataList=t.data.reverse(),console.log(e.dataList)}))},getbroadcasts:function(){var e=this;return new Promise((function(t,a){Object(c["Wb"])(e.id).then((function(a){console.log(a),e.streamlist=a.data.extra.stream,e.streamlist&&e.streamlist.length>0?(e.activeName=e.streamlist[0].extra.name,e.statementquery.stream_id=e.streamlist[0].id,e.statement=a.data.extra.statement):e.streamlist=[{extra:{name:""}}],t(e.streamlist)}))}))},handleClick:function(e,t){var a=parseInt(e.index);this.statementquery.stream_id=this.streamlist[a].id,this.getdatalist()},submitForm:function(e){var t=this;console.log(this.ruleForm),this.ruleForm.broadcast_id=this.statementquery.id,this.ruleForm.stream_id=this.statementquery.stream_id,this.ruleForm.host_name="测试",this.ruleForm.time=Object(q["b"])(new Date),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(c["k"])(t.ruleForm).then((function(e){t.$message({message:"发送成功",type:"success"}),t.resetForm("ruleForm"),t.getdatalist(),t.downscroll()}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},z=L,E=(a("3bbb"),a("3824"),Object(f["a"])(z,D,N,!1,null,"3bb6c31c",null)),F=E.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("comment-verify",{attrs:{"news-id":""+e.uuid}})},P=[],M=a("7d9b"),H={components:{commentVerify:M["default"]},props:{uuid:String}},B=H,R=Object(f["a"])(B,T,P,!1,null,null,null),A=R.exports,V={props:{id:Number},components:{reservation:j,directSeeding:F,comment:A},data:function(){var e=this,t=function(t,a,r){var i=new Date(a),n=new Date(e.detail.extra.end_time).getTime();i.getTime()>n?r(new Error("开播时间必须小于现结束时间")):i.getTime()>new Date?r():r(new Error("开播时间必须大于当前时间"))},a=function(e,t,a){var r=new Date(t);r.getTime()>new Date?a():a(new Error("结束时间必须大于当前时间"))};return{detail:{cover:"",extra:{}},currentView:"reservation",dialogStart:{title:"调整开播时间",show:!1,form:{old:"",now:""},rules:{now:[{required:!0,message:"请选择开播时间",trigger:"change"},{validator:t,trigger:"change"}]}},dialogEnd:{title:"调整结束时间",show:!1,form:{old:"",now:""},rules:{now:[{required:!0,message:"请选择结束时间",trigger:"change"},{validator:a,trigger:"change"}]}}}},computed:{lists:function(){var e=[];return"3"!==this.detail.extra.broadcast_type&&e.push({label:"机位管理",name:"reservation"}),"none"!==this.detail.extra.statement&&e.push({label:"图文直播",name:"directSeeding"}),e.push({label:"评论审核",name:"comment"}),e}},methods:{handleReturn:function(){this.$emit("handleReturn")},getList:function(){var e=this;Object(s["A"])(this.id).then((function(t){var a,r=t.data,i={0:"未开始",1:"进行中",2:"已结束"};e.detail=Object(o["a"])(Object(o["a"])({},r),{},{label:i[r.live],cover:null===(a=r.extra.cover[0])||void 0===a?void 0:a.path}),e.currentView=e.lists[0].name}))},handleStart:function(){var e=this;this.$confirm("确认提前开播?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])(e.id,{extra:{start_time:e.parseTime(new Date)},live:1}).then((function(){e.$message.success("修改成功!"),e.getList()}))})).catch((function(){}))},handleDelayStart:function(){var e=this;Object.assign(this.dialogStart,{show:!0,form:{old:this.detail.extra.start_time,now:""}}),this.$nextTick((function(){var t;null===(t=e.$refs.startForm)||void 0===t||t.resetFields()}))},enterStartDialog:function(){var e,t=this;null===(e=this.$refs.startForm)||void 0===e||e.validate((function(e){e&&Object(s["k"])(t.id,{extra:{start_time:t.dialogStart.form.now}}).then((function(){t.$message.success("修改成功!"),t.getList()})).finally((function(){t.dialogStart.show=!1}))}))},handleSetEnd:function(){var e=this;Object.assign(this.dialogEnd,{show:!0,form:{old:this.detail.extra.end_time,now:""}}),this.$nextTick((function(){var t;null===(t=e.$refs.endForm)||void 0===t||t.resetFields()}))},enterEndDialog:function(){var e,t=this;null===(e=this.$refs.endForm)||void 0===e||e.validate((function(e){e&&Object(s["k"])(t.id,{extra:{end_time:t.dialogStart.form.now}}).then((function(){t.$message.success("修改成功!"),t.getList()})).finally((function(){t.dialogEnd.show=!1}))}))},handleEnd:function(){var e=this;this.$confirm("确认提前停播?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])(e.id,{extra:{end_time:e.parseTime(new Date)},live:2}).then((function(){e.$message.success("修改成功!"),e.getList()}))})).catch((function(){}))}},created:function(){this.getList()}},I=V,U=(a("e12e"),Object(f["a"])(I,v,h,!1,null,"fbb85ed0",null)),Q=U.exports,W={components:{studioList:b,watchConsole:Q},data:function(){return{component:"studioList",id:0}},computed:{exclude:function(){return["watchConsole"]}},methods:{watchConsole:function(e){this.id=e,this.component="watchConsole"},handleReturn:function(){this.component="studioList"}}},J=W,G=Object(f["a"])(J,r,i,!1,null,"c7ece384",null);t["default"]=G.exports},cd8a:function(e,t,a){},d175:function(e,t,a){},d556:function(e,t,a){"use strict";a("0257")},dc2d:function(e,t,a){e.exports=a.p+"static/img/1402-203.c56ffd4a.png"},dd6a:function(e,t,a){e.exports=a.p+"static/img/1402-204.4307cd3c.png"},e12e:function(e,t,a){"use strict";a("d175")},e21b:function(e,t,a){e.exports=a.p+"static/img/1402-212.af2ef322.png"},fe4c:function(e,t,a){e.exports=a.p+"static/img/1402-206.7d6de951.png"}}]);