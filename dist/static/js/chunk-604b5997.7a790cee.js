(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-604b5997"],{"0385":function(t,e,a){"use strict";a("d3b7");var r=a("bc3a"),i=a.n(r),o=a("5c96"),n=a("a18c"),s=i.a.create({baseURL:"http://10.30.10.158/api",timeout:5e3});s.interceptors.request.use((function(t){return t.headers.Authorization=sessionStorage.getItem("token"),t}),(function(t){return Object(o["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),s.interceptors.response.use((function(t){return 200==t.data.code||"true"===t.headers.success?t.data:(Object(o["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),n["d"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(o["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)})),e["a"]=s},"0fea":function(t,e,a){"use strict";a.d(e,"jb",(function(){return n})),a.d(e,"i",(function(){return s})),a.d(e,"Z",(function(){return l})),a.d(e,"K",(function(){return c})),a.d(e,"G",(function(){return u})),a.d(e,"sb",(function(){return d})),a.d(e,"m",(function(){return p})),a.d(e,"eb",(function(){return m})),a.d(e,"Q",(function(){return f})),a.d(e,"H",(function(){return h})),a.d(e,"Jb",(function(){return b})),a.d(e,"s",(function(){return g})),a.d(e,"wb",(function(){return v})),a.d(e,"mb",(function(){return y})),a.d(e,"r",(function(){return w})),a.d(e,"hb",(function(){return _})),a.d(e,"y",(function(){return x})),a.d(e,"S",(function(){return k})),a.d(e,"I",(function(){return L})),a.d(e,"Ob",(function(){return O})),a.d(e,"t",(function(){return $})),a.d(e,"Pb",(function(){return S})),a.d(e,"u",(function(){return j})),a.d(e,"Kb",(function(){return P})),a.d(e,"n",(function(){return F})),a.d(e,"fb",(function(){return T})),a.d(e,"Rb",(function(){return V})),a.d(e,"Lb",(function(){return q})),a.d(e,"Fb",(function(){return D})),a.d(e,"k",(function(){return I})),a.d(e,"bb",(function(){return C})),a.d(e,"M",(function(){return M})),a.d(e,"Gb",(function(){return A})),a.d(e,"j",(function(){return N})),a.d(e,"ab",(function(){return z})),a.d(e,"L",(function(){return U})),a.d(e,"g",(function(){return B})),a.d(e,"C",(function(){return H})),a.d(e,"Wb",(function(){return E})),a.d(e,"Cb",(function(){return J})),a.d(e,"X",(function(){return R})),a.d(e,"Hb",(function(){return K})),a.d(e,"Vb",(function(){return Q})),a.d(e,"Db",(function(){return G})),a.d(e,"h",(function(){return Y})),a.d(e,"Y",(function(){return W})),a.d(e,"J",(function(){return X})),a.d(e,"Ib",(function(){return Z})),a.d(e,"l",(function(){return tt})),a.d(e,"db",(function(){return et})),a.d(e,"P",(function(){return at})),a.d(e,"Eb",(function(){return rt})),a.d(e,"Mb",(function(){return it})),a.d(e,"o",(function(){return ot})),a.d(e,"R",(function(){return nt})),a.d(e,"gb",(function(){return st})),a.d(e,"Nb",(function(){return lt})),a.d(e,"p",(function(){return ct})),a.d(e,"cb",(function(){return ut})),a.d(e,"N",(function(){return dt})),a.d(e,"Qb",(function(){return pt})),a.d(e,"q",(function(){return mt})),a.d(e,"nb",(function(){return ft})),a.d(e,"T",(function(){return ht})),a.d(e,"B",(function(){return bt})),a.d(e,"rb",(function(){return gt})),a.d(e,"O",(function(){return vt})),a.d(e,"Bb",(function(){return yt})),a.d(e,"Ab",(function(){return wt})),a.d(e,"f",(function(){return _t})),a.d(e,"w",(function(){return xt})),a.d(e,"Xb",(function(){return kt})),a.d(e,"yb",(function(){return Lt})),a.d(e,"xb",(function(){return Ot})),a.d(e,"U",(function(){return $t})),a.d(e,"pb",(function(){return St})),a.d(e,"lb",(function(){return jt})),a.d(e,"v",(function(){return Pt})),a.d(e,"tb",(function(){return Ft})),a.d(e,"d",(function(){return Tt})),a.d(e,"W",(function(){return Vt})),a.d(e,"F",(function(){return qt})),a.d(e,"vb",(function(){return Dt})),a.d(e,"ib",(function(){return It})),a.d(e,"kb",(function(){return Ct})),a.d(e,"x",(function(){return Mt})),a.d(e,"ub",(function(){return At})),a.d(e,"a",(function(){return Nt})),a.d(e,"Ub",(function(){return zt})),a.d(e,"D",(function(){return Ut})),a.d(e,"ob",(function(){return Bt})),a.d(e,"b",(function(){return Ht})),a.d(e,"Tb",(function(){return Et})),a.d(e,"E",(function(){return Jt})),a.d(e,"zb",(function(){return Rt})),a.d(e,"e",(function(){return Kt})),a.d(e,"A",(function(){return Qt})),a.d(e,"qb",(function(){return Gt})),a.d(e,"z",(function(){return Yt})),a.d(e,"Sb",(function(){return Wt})),a.d(e,"c",(function(){return Xt})),a.d(e,"V",(function(){return Zt}));a("99af");var r=a("b775"),i=a("b60c"),o=a("0385");a("2ab73");function n(){return Object(r["a"])({url:"/api/permissions/getAllPermissions",method:"get"})}function s(t){return Object(r["a"])({url:"/api/permissions",method:"post",params:t})}function l(t,e){return Object(r["a"])({url:"/api/permissions/"+t,method:"patch",params:e})}function c(t){return Object(r["a"])({url:"/api/permissions/"+t,method:"delete"})}function u(t){return Object(r["a"])({url:"/api/permissions/deletePermissions",method:"post",params:{ids:t}})}function d(t){return Object(r["a"])({url:"/api/system/data",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/api/roles",method:"post",params:t})}function m(t,e){return Object(r["a"])({url:"/api/roles/"+t,method:"patch",params:e})}function f(t){return Object(r["a"])({url:"/api/roles/"+t,method:"delete"})}function h(t){return Object(r["a"])({url:"/api/roles/deleteRoles",method:"post",params:{ids:t}})}function b(t){return Object(r["a"])({url:"/api/roles/"+t+"/permission",method:"get"})}function g(t,e){return Object(r["a"])({url:"/api/roles/"+t+"/assignPermission",method:"post",params:{permissions:e}})}function v(t){return Object(r["a"])({url:"/api/system/data",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/api/channels",method:"get",params:t})}function w(t){return Object(r["a"])({url:"/api/users",method:"post",data:t})}function _(t,e){return Object(r["a"])({url:"/api/user/"+t,method:"patch",data:e})}function x(t,e){return Object(r["a"])({url:"/api/users/setStatus",method:"post",params:{ids:t,status:e}})}function k(t){return Object(r["a"])({url:"/api/user/"+t,method:"delete"})}function L(t){return Object(r["a"])({url:"/api/user/deleteUsers",method:"post",params:{ids:t}})}function O(t){return Object(r["a"])({url:"/api/user/"+t+"/directPermission",method:"get"})}function $(t,e){return Object(r["a"])({url:"/api/user/"+t+"/assignPermission",method:"post",params:{permissions:e}})}function S(t){return Object(r["a"])({url:"/api/user/"+t+"/roles",method:"get"})}function j(t,e){return Object(r["a"])({url:"/api/user/"+t+"/assignRole",method:"post",params:{roles:e}})}function P(t){return Object(r["a"])({url:"/api/sites",method:"get",params:t})}function F(t){return Object(r["a"])({url:"/api/sites",method:"post",data:t})}function T(t,e){return Object(r["a"])({url:"/api/sites/"+t,method:"patch",data:e})}function V(){return Object(r["a"])({url:"/api/zones",method:"get"})}function q(t){return Object(r["a"])({url:"/api/sites/"+t,method:"get"})}function D(t){return Object(r["a"])({url:"/api/products",method:"get",params:t})}function I(t){return Object(r["a"])({url:"/api/products",method:"post",data:t})}function C(t,e){return Object(r["a"])({url:"/api/products/"+t,method:"patch",data:e})}function M(t){return Object(r["a"])({url:"/api/products/"+t,method:"delete"})}function A(t){return Object(r["a"])({url:"/api/product_versions",method:"get",params:t})}function N(t){return Object(r["a"])({url:"/api/product_versions",method:"post",data:t})}function z(t,e){return Object(r["a"])({url:"/api/product_versions/"+t,method:"patch",data:e})}function U(t){return Object(r["a"])({url:"/api/product_versions/"+t,method:"delete"})}function B(t){return Object(r["a"])({url:"/api/channels",method:"post",data:t})}function H(t){return Object(r["a"])({url:"/api/channels/"+t,method:"delete"})}function E(t){return Object(r["a"])({url:"/api/channels/setSort",method:"post",data:t})}function J(t){return Object(r["a"])({url:"/api/channels/"+t,method:"get"})}function R(t,e){return Object(r["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function K(t){return Object(r["a"])({url:"/api/news/recycleBin",method:"get",params:t})}function Q(t){return Object(r["a"])({url:"/api/news/restore",method:"post",params:{ids:t}})}function G(t){return Object(r["a"])({url:"/api/categories",method:"get",params:t})}function Y(t){return Object(r["a"])({url:"/api/categories",method:"post",data:t})}function W(t,e){return Object(r["a"])({url:"/api/categories/"+t,method:"patch",data:e})}function X(t){return Object(r["a"])({url:"/api/categories/"+t,method:"delete"})}function Z(t){return Object(r["a"])({url:"/api/resources",method:"get",params:t})}function tt(t){return Object(r["a"])({url:"/api/resources",method:"post",data:t})}function et(t,e){return Object(r["a"])({url:"/api/resources/"+t,method:"post",data:e})}function at(t){return Object(r["a"])({url:"/api/resources/"+t,method:"delete"})}function rt(t){return Object(r["a"])({url:"/api/resources/myResources",method:"get",params:t})}function it(t){return Object(r["a"])({url:"/api/channels/getSpecialChannels",method:"get",params:t})}function ot(t){return Object(r["a"])({url:"/api/channels",method:"post",data:t})}function nt(t){return Object(r["a"])({url:"/api/channels/"+t,method:"delete"})}function st(t,e){return Object(r["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function lt(t){return Object(r["a"])({url:"/api/programs",method:"get",params:t})}function ct(t){return Object(r["a"])({url:"/api/programs",method:"post",data:t})}function ut(t,e){return Object(r["a"])({url:"/api/programs/"+t,method:"patch",data:e})}function dt(t){return Object(r["a"])({url:"/api/programs/"+t,method:"delete"})}function pt(t){return Object(r["a"])({url:"/api/videos/vms_channels/?cloud=".concat(t),method:"get"})}function mt(t){return Object(r["a"])({url:"/api/channels",method:"post",data:t})}function ft(t){return Object(r["a"])({url:"/api/channels/".concat(t,"/getChild"),method:"get"})}function ht(t,e){return Object(r["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function bt(t){return Object(r["a"])({url:"/api/channels/"+t,method:"delete"})}function gt(t){return Object(r["a"])({url:"/api/replays/getReplaysByChannel",method:"get",params:t})}function vt(t){return Object(r["a"])({url:"/api/replays/"+t,method:"delete"})}function yt(t){return Object(r["a"])({url:"/api/broadcasts/".concat(t),method:"get"})}function wt(t,e){return Object(r["a"])({url:"/api/broadcastStatement?broadcast_id=".concat(t,"&stream_id=").concat(e),method:"get"})}function _t(t){return Object(r["a"])({url:"/api/broadcastStatement",method:"post",data:t})}function xt(){return Object(i["a"])({url:"/catalog/list",method:"get"})}function kt(t){return Object(i["a"])({url:"/style/catalogCodeStyle",method:"post",data:t})}function Lt(t){return Object(i["a"])({url:"/internal/uc/queryUserList",method:"post",data:t})}function Ot(t){return Object(i["a"])({url:"/internal/uc/queryUserInfo",method:"get",params:t})}function $t(t){return Object(i["a"])({url:"/internal/uc/updateUserInfo",method:"post",data:t})}function St(t){return Object(i["a"])({url:"/internal/uc/queryInvitationcodeList",method:"post",data:t})}function jt(t){return Object(o["a"])({url:"/new/intranet/comment/getNoTalkUserList/page",method:"post",data:t})}function Pt(t){return Object(o["a"])({url:"/new/intranet/comment/cancelNoTalkUser",method:"post",data:t})}function Ft(t){return Object(i["a"])({url:"/internal/points/getRuleList",method:"post",data:t})}function Tt(t){return Object(i["a"])({url:"/internal/points/ruleSave",method:"post",data:t})}function Vt(t){return Object(i["a"])({url:"/internal/points/ruleUpdate",method:"post",data:t})}function qt(t){return Object(i["a"])({url:"/internal/points/ruleDelete",method:"post",data:t})}function Dt(){return Object(i["a"])({url:"/internal/points/rule/typelist",method:"get"})}function It(){return Object(i["a"])({url:"/internal/points/rule/actionlist",method:"get"})}function Ct(t){return Object(r["a"])({url:"/api/products/".concat(t),method:"get"})}function Mt(t,e){return Object(r["a"])({url:"/api/products/".concat(t),method:"patch",data:e})}function At(){return Object(r["a"])({url:"/api/upload/getH5Dir",method:"get"})}function Nt(t){return Object(r["a"])({url:"/api/upload/mkdir",method:"post",data:t})}function zt(t){return Object(r["a"])({url:"/api/upload/mkdir",method:"post",data:t})}function Ut(t){return Object(r["a"])({url:"/api/upload/rmdir",method:"post",data:t})}function Bt(t){return Object(r["a"])({url:"/api/h5",method:"get",params:t})}function Ht(t){return Object(r["a"])({url:"/api/h5",method:"post",data:t})}function Et(t,e){return Object(r["a"])({url:"/api/h5/".concat(t),method:"post",data:e})}function Jt(t){return Object(r["a"])({url:"/api/h5/".concat(t),method:"delete"})}function Rt(t){return Object(o["a"])({url:"/sensitive/whitetxt/list",method:"get",params:t})}function Kt(t){return Object(o["a"])({url:"/sensitive/whitetxt/add",method:"post",data:t})}function Qt(t){return Object(o["a"])({url:"/sensitive/whitetxt/del",method:"DELETE",data:t})}function Gt(t){return Object(i["a"])({url:"/publish/list",method:"post",data:t})}function Yt(t){return Object(i["a"])({url:"/publish/delete?id=".concat(t),method:"post"})}function Wt(t){return Object(i["a"])({url:"/meal/openList",method:"post",data:t})}function Xt(t){return Object(i["a"])({url:"/publish/setPublish",method:"post",data:t})}function Zt(t){return Object(i["a"])({url:"/publish/update",method:"post",data:t})}},"206f":function(t,e,a){"use strict";a("a7a4")},2206:function(t,e,a){"use strict";a("c1fc")},2699:function(t,e,a){},"2ab73":function(t,e,a){"use strict";a("d3b7");var r=a("bc3a"),i=a.n(r),o=a("5c96"),n=a("a18c"),s=i.a.create({baseURL:"http://10.30.10.71:8080",timeout:6e4});s.interceptors.request.use((function(t){return t.headers.Authorization=sessionStorage.getItem("token"),t}),(function(t){return Object(o["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),s.interceptors.response.use((function(t){return 200==t.data.code||"true"===t.headers.success?t.data:(Object(o["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),n["d"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(o["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)}))},"301f":function(t,e,a){"use strict";a("d2d2")},"395d":function(t,e,a){},"415e":function(t,e,a){},"4ec6":function(t,e,a){},5316:function(t,e,a){"use strict";a("6598")},"580a":function(t,e,a){"use strict";a("ea03")},"5fc3":function(t,e,a){"use strict";a("afe9")},6598:function(t,e,a){},"667e":function(t,e,a){"use strict";a("b1b9")},"66b3":function(t,e,a){},6995:function(t,e,a){"use strict";a("e829")},"721b":function(t,e,a){"use strict";a("b85e")},7426:function(t,e,a){},"75ce":function(t,e,a){"use strict";a("9ec4")},"77fa":function(t,e,a){},"79fa":function(t,e,a){},"832c":function(t,e,a){},"91de":function(t,e,a){"use strict";a("79fa")},"9ac6":function(t,e,a){"use strict";a("4ec6")},"9cd2":function(t,e,a){},"9ec4":function(t,e,a){},a7a4:function(t,e,a){},af32:function(t,e,a){"use strict";a("9cd2")},afe9:function(t,e,a){},b1b9:function(t,e,a){},b39c7:function(t,e,a){"use strict";a("2699")},b60c:function(t,e,a){"use strict";a("d3b7");var r=a("bc3a"),i=a.n(r),o=a("5c96"),n=a("a18c"),s=i.a.create({baseURL:"http://10.30.10.158/adm/fusion",timeout:5e3});s.interceptors.request.use((function(t){return t.headers.Authorization=sessionStorage.getItem("token"),t}),(function(t){return Object(o["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),s.interceptors.response.use((function(t){return 200==t.data.code||"true"===t.headers.success?t.data:(Object(o["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),n["d"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(o["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)})),e["a"]=s},b85e:function(t,e,a){},c1fc:function(t,e,a){},c362:function(t,e,a){"use strict";a("395d")},c99a:function(t,e,a){"use strict";a("832c")},d1e6:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"radioTV",staticStyle:{padding:"30px"}},[a("el-form",[a("el-form-item",{attrs:{label:"所属产品："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"电视频道",name:"page_a"}},[a("pagea",{attrs:{productId:t.product_id,productList:t.productList}})],1),a("el-tab-pane",{attrs:{label:"电视直播",name:"page_b"}},[a("pageb",{ref:"page_b",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"电视点播",name:"page_c"}},[a("pagec",{ref:"page_c",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"广播频道",name:"page_d"}},[a("paged",{attrs:{productId:t.product_id,productList:t.productList}})],1),a("el-tab-pane",{attrs:{label:"广播直播",name:"page_e"}},[a("pagee",{ref:"page_e",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"广播点播",name:"page_f"}},[a("pagef",{ref:"page_f",attrs:{productId:t.product_id}})],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_a"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"频道logo",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{src:t.row.extra.logo}})]}}])}),a("el-table-column",{attrs:{label:"频道名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"频道状态",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"模板状态",align:"center",prop:"extra.template.type||'未启用'","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formattemplate")(e.row.extra.template)))])]}}])}),a("el-table-column",{attrs:{label:"节目模板",align:"center",prop:"en_name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.program(e.row)}}},[t._v("模板管理")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{width:"700px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"频道名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入频道名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重",prop:"sort"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入权重(排序)"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"所属产品",prop:"product_id"}},[a("el-select",{attrs:{disabled:"edit"==t.dialogType,placeholder:"请选择"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"频道LOGO：",prop:"extra.logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.extra.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"适用于",prop:"forway"}},[a("el-checkbox-group",{on:{change:function(e){return t.$forceUpdate()}},model:{value:t.form.forway,callback:function(e){t.$set(t.form,"forway",e)},expression:"form.forway"}},[a("el-checkbox",{attrs:{label:"直播"}}),a("el-checkbox",{attrs:{label:"点播"}})],1)],1),t.form.forway.indexOf("直播")>-1?a("el-form-item",{attrs:{"label-width":"120px",label:"流地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[0].url,callback:function(e){t.$set(t.form.extra.stream_urls[0],"url",e)},expression:"form.extra.stream_urls[0].url"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[1].url,callback:function(e){t.$set(t.form.extra.stream_urls[1],"url",e)},expression:"form.extra.stream_urls[1].url"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[2].url,callback:function(e){t.$set(t.form.extra.stream_urls[2],"url",e)},expression:"form.extra.stream_urls[2].url"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"简介",prop:"extra.intro"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{autosize:{minRows:4},type:"textarea",autocomplete:"off",placeholder:"请输入简介"},model:{value:t.form.extra.intro,callback:function(e){t.$set(t.form.extra,"intro",e)},expression:"form.extra.intro"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1),a("Pagedialog",{ref:"Pagedialog"})],1)},n=[],s=a("ade3"),l=(a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_a_dialog"},[t.dialogFormVisible?a("el-dialog",{attrs:{width:"1200px","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"编辑节目单模板",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1),a("span",[t._v("直播节日模板：")]),a("el-radio-group",{on:{change:t.chooseradio},model:{value:t.data.extra.template.type,callback:function(e){t.$set(t.data.extra.template,"type",e)},expression:"data.extra.template.type"}},[a("el-radio",{attrs:{label:"daily"}},[t._v("每日重复(创建单日节目单模板，每日重复)")]),a("el-radio",{attrs:{label:"weekly"}},[t._v("每周重复(创建周一至周日节目单模板，每周循环)")]),a("el-radio",{attrs:{label:"none"}},[t._v("不启用模板")])],1),a("div",{staticStyle:{"min-height":"500px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"daily"==t.data.extra.template.type||"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='daily'||data.extra.template.type=='weekly'"}],staticStyle:{"margin-top":"30px",display:"flex"}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='weekly'"}],staticClass:"left",staticStyle:{height:"500px","margin-right":"10px",width:"100px"},attrs:{"tab-position":"left"},on:{"tab-click":t.changeweek},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}},[a("el-tab-pane",{attrs:{label:"周一",name:"1"}}),a("el-tab-pane",{attrs:{label:"周二",name:"2"}}),a("el-tab-pane",{attrs:{label:"周三",name:"3"}}),a("el-tab-pane",{attrs:{label:"周四",name:"4"}}),a("el-tab-pane",{attrs:{label:"周五",name:"5"}}),a("el-tab-pane",{attrs:{label:"周六",name:"6"}}),a("el-tab-pane",{attrs:{label:"周日",name:"7"}})],1),a("div",{staticClass:"right",staticStyle:{"flex-grow":"1"}},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")]),t.tableflag?a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"播放时长",align:"center",prop:"extra.duration","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}],null,!1,1769245459)}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e)}}})]}}],null,!1,593115993)})],1):t._e()],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1):t._e()],1)}),c=[],u=(a("b0c0"),a("a434"),a("0fea")),d=a("61f7"),p={name:"page_a_dialog",data:function(){return{dialogFormVisible:!1,innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",editIndex:"",dataList:[],dayList:[],weekList:{},tableflag:!0,weekday:"1",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}],data:""}},filters:{formatallow_replay:function(t){return 1==t?"是":"否"}},created:function(){this.initForm()},methods:{getdata:function(t){this.data=JSON.parse(JSON.stringify(t))},changeweek:function(t,e){this.returndataList()},closeDialog:function(){this.dialogFormVisible=!1},enterDialog:function(){var t=this;if("weekly"!=this.data.extra.template.type||this.weekList["1"]&&this.weekList["1"].length>0&&this.weekList["2"]&&this.weekList["2"].length>0&&this.weekList["3"]&&this.weekList["3"].length>0&&this.weekList["4"]&&this.weekList["4"].length>0&&this.weekList["5"]&&this.weekList["5"].length>0&&this.weekList["6"]&&this.weekList["6"].length>0&&this.weekList["7"]&&this.weekList["7"].length>0){this.data.father=this.data.father.id;var e={list:{daily:[],weekly:{}},type:""};e.list.daily=this.dayList,e.list.weekly=this.weekList,e.type=this.data.extra.template.type,this.data.extra.template=e,Object(u["gb"])(this.data.id,this.data).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.$parent.getList(),t.weekday="1"}))}else this.$message({message:"选择每周重复，请保证每天至少有一个节目",type:"warning"})},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{duration:"",allow_replay:1}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){this.initForm(),this.editIndex=t.$index,this.form=JSON.parse(JSON.stringify(t.row)),this.innerVisible=!0,this.dialogTitle="修改节目",this.dialogType="edit"},deldata:function(t){var e=this,a=t.row;this.editIndex=t.$index,this.$confirm("此操作将永久删除节目名称为"+a.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"daily"==e.data.extra.template.type?(e.dayList.splice(e.editIndex,1),e.datalistformat(e.dayList),e.dataList=e.dayList,e.innerVisible=!1,e.$message({message:"删除成功",type:"success"})):"weekly"==e.data.extra.template.type&&(e.weekList[e.weekday].splice(e.editIndex,1),e.datalistformat(e.weekList[e.weekday]),e.dataList=e.weekList[e.weekday],e.innerVisible=!1,e.$message({message:"删除成功",type:"success"}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},returntime:function(t,e){function a(t){return t<10?"0"+t:t}var r="1970/1/1 ",i=(t=t||"09:01:22",e=e||"22:22:22",new Date(r+t)),o=new Date(r+e),n=parseInt((o.getTime()-i.getTime())/1e3);Math.floor(n/86400/365);n%=31536e3;Math.floor(n/86400/30);n%=2592e3;Math.floor(n/86400);n%=86400;var s=Math.floor(n/3600);n%=3600;var l=Math.floor(n/60);n%=60;var c=n;return a(s)+":"+a(l)+":"+a(c)},datalistformat:function(t){t.sort((function(t,e){return e.time<t.time?1:-1}));for(var e=0;e<t.length;e++)e<t.length-1?t[e].extra.duration=this.returntime(t[e].time,t[e+1].time):t[e].extra.duration=this.returntime(t[e].time,"24:00:00");return t},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.form));if("edit"==t.dialogType){if("daily"==t.data.extra.template.type){for(var r=0;r<t.dayList.length;r++)if(a.time==t.dayList[r].time&&r!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.splice(t.editIndex,1,a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){for(r=0;r<t.weekList[t.weekday].length;r++)if(a.time==t.weekList[t.weekday][r].time&&r!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].splice(t.editIndex,1,a),t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}else if("daily"==t.data.extra.template.type){for(r=0;r<t.dayList.length;r++)if(a.time==t.dayList[r].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.push(a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){if(Object(d["a"])(t.weekList[t.weekday])){for(r=0;r<t.weekList[t.weekday].length;r++)if(a.time==t.weekList[t.weekday][r].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].push(a)}else t.weekList[t.weekday]=[],t.weekList[t.weekday].push(a);t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}}))},chooseradio:function(){var t=this;this.tableflag=!1,this.$nextTick((function(){t.tableflag=!0})),this.returndataList()},returndataList:function(){if(this.dataList=[],!this.data.extra.template){var t={list:{daily:[],weekly:{}},type:"none"};this.data.extra.template=t}"daily"==this.data.extra.template.type?(this.dayList=this.data.extra.template.list.daily,this.dataList=this.dayList):"weekly"==this.data.extra.template.type?(this.weekList=this.data.extra.template.list.weekly,this.weekList||(this.weekList={},this.weekList[this.weekday]=[]),this.dataList=this.weekList[this.weekday]):this.dataList=[]}}},m=p,f=(a("fad9"),a("af32"),a("2877")),h=Object(f["a"])(m,l,c,!1,null,"11132100",null),b=h.exports,g={components:{Pagedialog:b},props:{productId:{type:Number,default:0},productList:{type:Array,default:[]}},name:"page_a",data:function(){var t,e=sessionStorage.getItem("token");return{importHeaders:{Authorization:e},queryParams:{page:1,pageSize:10,product_id:0,type:"tv_channel"},loading:!0,dataList:[],total:0,statusoptions:[{value:1,label:"启用"},{value:2,label:"禁用"}],dialogFormVisible:!1,form:{},rules:(t={name:[{required:!0,message:"请输入频道姓名",trigger:"blur"}],sort:[{required:!0,message:"请输入权重(排序)",trigger:"blur"}],product_id:[{required:!0,message:"请选择所属产品",trigger:"blur"}]},Object(s["a"])(t,"extra.logo",[{required:!0,message:"请选择频道logo",trigger:"blur"}]),Object(s["a"])(t,"forway",[{required:!0,message:"请选择适用场景",trigger:"blur"}]),Object(s["a"])(t,"status",[{required:!0,message:"请选择是否启用",trigger:"blur"}]),t),dialogType:"add",dialogTitle:""}},filters:{formattemplate:function(t){return t?"daily"==t.type?"每日循环":"weekly"==t.type?"每周循环":"未启用":"未启用"}},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"}},watch:{productId:function(t){this.queryParams.product_id=t,this.getList()}},created:function(){this.initForm()},methods:{program:function(t){this.$refs.Pagedialog.getdata(t),this.$refs.Pagedialog.dialogFormVisible=!0,this.$refs.Pagedialog.returndataList()},handleAvatarSuccess:function(t,e,a){this.form.extra.logo=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["Mb"])(e).then((function(e){t.loading=!1,t.dataList=e.data,t.total=e.total}))},statuschange:function(t){var e=this;t.father=t.father.id,Object(u["gb"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(){this.initForm(),this.dialogTitle="新增频道",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={type:"tv_channel",father:0,name:"",sort:0,product_id:"",forway:[],extra:{has_live:"",has_replay:"",intro:"",logo:"",stream_urls:[{name:"超清",url:""},{name:"高清",url:""},{name:"标清",url:""}]},status:""}},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑频道",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),e.form.forway=[],1==e.form.extra.has_replay&&e.form.forway.push("点播"),1==e.form.extra.has_live&&e.form.forway.push("直播"),console.log(e.form)})),this.dialogFormVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.id+"的频道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["R"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.form.forway.indexOf("直播")>-1?this.form.extra.has_live=1:this.form.extra.has_live=0,this.form.forway.indexOf("点播")>-1?this.form.extra.has_replay=1:this.form.extra.has_replay=0,console.log(this.form),this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=JSON.parse(JSON.stringify(t.form));a.father=a.father.id,Object(u["gb"])(a.id,a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else Object(u["o"])(t.form).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}))}}},v=g,y=(a("91de"),a("c99a"),Object(f["a"])(v,o,n,!1,null,"d5f9d82a",null)),w=y.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_b"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_b",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[a("div",[a("div",{staticClass:"top",staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:"选择日期"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}})],1),a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}},[a("el-radio-button",{attrs:{label:t.nowDate(0)}},[t._v(t._s(t._f("dateformat")(t.nowDate(0),"today")))]),t._l(6,(function(e,r){return[a("el-radio-button",{attrs:{label:t.nowDate(e)}},[t._v(t._s(t._f("dateformat")(t.nowDate(e))))])]}))],2),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}])}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1)],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},x=[],k=(a("4de4"),a("d3b7"),a("25f0"),{name:"page_b",props:{productId:{type:Number,default:0}},data:function(){var t=this.getDay(0);return{pickerOptions:{disabledDate:function(t){return t.getTime()-5184e5>Date.now()||t.getTime()+6048e5<Date.now()}},loading:!0,dataList:[],tvList:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"tv_channel"},queryParams:{page:1,pageSize:999,channel_id:"",date:t},innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}]}},created:function(){this.getList(),this.initForm()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList(),this.getList()}},filters:{dateformat:function(t,e){t=new Date(t);var a=t.getDay(),r=["(周日)","(周一)","(周二)","(周三)","(周四)","(周五)","(周六)"],i=r[a],o=t.getMonth()+1,n=String(t.getDate()<10?"0"+t.getDate():t.getDate());return e?o+"."+n+" (今天)":o+"."+n+" "+i},formatallow_replay:function(t){return 1==t?"是":"否"}},computed:{nowDate:function(){var t=this;return function(e){return t.getDay(e)}},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live}))}},methods:{pickerdatechange:function(){this.getList()},getDay:function(t){var e=new Date,a=e.getTime()+864e5*t;e.setTime(a);var r=e.getFullYear(),i=e.getMonth(),o=e.getDate();return i=this.doHandleMonth(i+1),o=this.doHandleMonth(o),r+"-"+i+"-"+o},doHandleMonth:function(t){var e=t;return 1===t.toString().length&&(e="0"+t),e},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["Nb"])(e).then((function(e){t.loading=!1,t.dataList=e.data}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["Mb"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{allow_replay:""}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除节目名称为"+t.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["N"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={type:"1"};a.channel_id=t.queryParams.channel_id,a.date=t.queryParams.date;var r=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["cb"])(r.id,r).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["p"])(r).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}}),L=k,O=(a("6995"),Object(f["a"])(L,_,x,!1,null,null,null)),$=O.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_c",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px","margin-right":"20px",width:"180px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right",staticStyle:{width:"1400px"}},[t.showlist?t._e():a("div",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),t.showlist?t._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,4181223627)}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"280px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"dbjmd",label:"点播节目单"},on:{fatherMethod:function(a){return t.golist(e.row)}}}),a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}],null,!1,3520136552)})],1),t.showlist?a("Pageclist",{attrs:{showlist:t.showlist,_channel_id:t._channel_id},on:{back:t.back}}):t._e()],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目Logo/封面:",prop:"extra.cover[0].path"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"cover"),"before-upload":t.beforeAvatarUpload}},[t.form.extra.cover[0].path?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.cover[0].path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重(排序):",prop:"sort"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入权重"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"绑定视频栏目",prop:"extra.vms_channel_type"}},[a("el-radio-group",{model:{value:t.form.extra.vms_channel_type,callback:function(e){t.$set(t.form.extra,"vms_channel_type",e)},expression:"form.extra.vms_channel_type"}},[a("el-radio",{attrs:{label:"cloud"}},[t._v("蓝云视频栏目")]),a("el-radio",{attrs:{label:"vms"}},[t._v("VMS视频栏目")])],1)],1),"cloud"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"蓝云视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"1",attrs:{props:{value:"code",label:"name",emitPath:!1},options:t.videocatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),"vms"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"VMS视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"2",attrs:{props:{value:"id",label:"name",emitPath:!1},options:t.vmscatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},j=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c_list"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("返回上一级")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"script.id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"script.title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属节目",align:"center",prop:"channel.name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"script.status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.script.status,callback:function(a){t.$set(e.row.script,"status",a)},expression:"scope.row.script.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"script.created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"740px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"点播节目单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入点播节目单名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目单封面:",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"name"),"before-upload":t.beforeAvatarUpload}},[t.form.name?a("img",{staticClass:"avatar",attrs:{src:t.form.name}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"资源地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"播放时间:",prop:"play_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.play_time,callback:function(e){t.$set(t.form,"play_time",e)},expression:"form.play_time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"基础点击量:",prop:"view_base_num"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入基础点击量"},model:{value:t.form.view_base_num,callback:function(e){t.$set(t.form,"view_base_num",e)},expression:"form.view_base_num"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"name"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},F=[],T={name:"page_c_list",props:{_channel_id:{type:Number,default:0},showlist:{type:Boolean,default:!0}},data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},dataList:[],loading:!0,statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],dialogTitle:"",innerVisible:!1,form:{},rules:{}}},created:function(){this.getList()},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"}},methods:{handleAvatarSuccess:function(t,e){this.form.name=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},back:function(){this.$emit("back",!1)},getList:function(){var t=this;this.loading=!0;var e={channel_id:this._channel_id,type:"tv_replay"};Object(u["rb"])(e).then((function(e){t.loading=!1,console.log(e),t.dataList=e.data}))},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.script.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["O"])(t.script.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){this.innerVisible=!1},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={status:1,extra:{cover:[{path:"",intro:""}],title:"",stream:[{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_h264_128k_mp3.mp3",rate:"128",format:"mp3",video_id:"581e88ee8cb649fa9692a07d0726c889",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#h264_128k_mp3.mp3"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_1500K_MP4.mp4",rate:"1500",format:"mp4",video_id:"455d73bc95d14f6a9fbaba3f1b03eda4",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_1500K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_800K_MP4.mp4",rate:"800",format:"mp4",video_id:"ef2418a8e8b4480fa172668c8e82734e",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_800K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_450K_MP4.mp4",rate:"450",format:"mp4",video_id:"07df38e0829a480abef854674ee6685f",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_450K_MP4.mp4"}]}}},editdata:function(t){console.log(t),this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.innerVisible=!0}}},V=T,q=(a("d7cf"),a("c362"),Object(f["a"])(V,P,F,!1,null,"2382fd9a",null)),D=q.exports,I={name:"page_c",props:{productId:{type:Number,default:0}},components:{Pageclist:D},data:function(){var t=sessionStorage.getItem("token");return{showlist:!1,_channel_id:"",importHeaders:{Authorization:t},loading:!0,dataList:[],tvList:[],videocatalogoptions:[],vmscatalogoptions:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"tv_channel"},queryParams:{page:1,pageSize:999,channel_id:"",type:"tv_replay"},innerVisible:!1,dialogTitle:"",form:{},rules:{sort:[{required:!0,message:"请输入权重",trigger:"blur"}],status:[{required:!0,message:"请选择是否允许回看",trigger:"blur"}],"extra.cover[0].path":[{required:!0,message:"请选择节目Logo/封面",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}]}},created:function(){this.getList(),this.initForm(),this.getvms_channels()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList()}},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay}))}},methods:{back:function(t){this.showlist=t},golist:function(t){this._channel_id=t.id,this.showlist=!0},statuschange:function(t){var e=this;Object(u["T"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},getvms_channels:function(){var t=this;Object(u["Qb"])(1).then((function(e){t.videocatalogoptions=e})),Object(u["Qb"])(0).then((function(e){function a(t){for(var e=0;e<t.length;e++)t[e].id=String(t[e].id),t[e].children&&a(t[e].children);return t}t.vmscatalogoptions=e,a(t.vmscatalogoptions)}))},handleAvatarSuccess:function(t,e){this.form.extra.cover[0].path=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},getList:function(){var t=this;this.showlist=!1,this.loading=!0;var e=this.queryParams.channel_id;e&&Object(u["nb"])(e).then((function(e){t.loading=!1,t.dataList=e}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["Mb"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",product_id:this.productId,father:this.queryParams.channel_id,sort:0,status:1,type:"tv_replay",extra:{cover:[{path:"",intro:""}],vms_channel:"",vms_channel_type:"cloud"}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),console.log(e.form)})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除栏目id为"+t.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["B"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={};a.channel_id=t.queryParams.channel_id;var r=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["T"])(r.id,r).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["q"])(r).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},C=I,M=(a("e994"),a("75ce"),a("b39c7"),Object(f["a"])(C,S,j,!1,null,"78138c95",null)),A=M.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"频道logo",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{src:t.row.extra.logo}})]}}])}),a("el-table-column",{attrs:{label:"频道名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"频道状态",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"模板状态",align:"center",prop:"extra.template.type||'未启用'","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formattemplate")(e.row.extra.template)))])]}}])}),a("el-table-column",{attrs:{label:"节目模板",align:"center",prop:"en_name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.program(e.row)}}},[t._v("模板管理")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{width:"700px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"频道名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入频道名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重",prop:"sort"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入权重(排序)"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"所属产品",prop:"product_id"}},[a("el-select",{attrs:{disabled:"edit"==t.dialogType,placeholder:"请选择"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"频道LOGO：",prop:"extra.logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.extra.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"适用于",prop:"forway"}},[a("el-checkbox-group",{on:{change:function(e){return t.$forceUpdate()}},model:{value:t.form.forway,callback:function(e){t.$set(t.form,"forway",e)},expression:"form.forway"}},[a("el-checkbox",{attrs:{label:"直播"}}),a("el-checkbox",{attrs:{label:"点播"}})],1)],1),t.form.forway.indexOf("直播")>-1?a("el-form-item",{attrs:{"label-width":"120px",label:"流地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[0].url,callback:function(e){t.$set(t.form.extra.stream_urls[0],"url",e)},expression:"form.extra.stream_urls[0].url"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"简介",prop:"extra.intro"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{autosize:{minRows:4},type:"textarea",autocomplete:"off",placeholder:"请输入简介"},model:{value:t.form.extra.intro,callback:function(e){t.$set(t.form.extra,"intro",e)},expression:"form.extra.intro"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1),a("Pagedialog",{ref:"Pagedialog"})],1)},z=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d_dialog"},[t.dialogFormVisible?a("el-dialog",{attrs:{width:"1200px","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,title:"编辑节目单模板",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1),a("span",[t._v("直播节日模板：")]),a("el-radio-group",{on:{change:t.chooseradio},model:{value:t.data.extra.template.type,callback:function(e){t.$set(t.data.extra.template,"type",e)},expression:"data.extra.template.type"}},[a("el-radio",{attrs:{label:"daily"}},[t._v("每日重复(创建单日节目单模板，每日重复)")]),a("el-radio",{attrs:{label:"weekly"}},[t._v("每周重复(创建周一至周日节目单模板，每周循环)")]),a("el-radio",{attrs:{label:"none"}},[t._v("不启用模板")])],1),a("div",{staticStyle:{"min-height":"500px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"daily"==t.data.extra.template.type||"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='daily'||data.extra.template.type=='weekly'"}],staticStyle:{"margin-top":"30px",display:"flex"}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='weekly'"}],staticClass:"left",staticStyle:{height:"500px","margin-right":"10px",width:"100px"},attrs:{"tab-position":"left"},on:{"tab-click":t.changeweek},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}},[a("el-tab-pane",{attrs:{label:"周一",name:"1"}}),a("el-tab-pane",{attrs:{label:"周二",name:"2"}}),a("el-tab-pane",{attrs:{label:"周三",name:"3"}}),a("el-tab-pane",{attrs:{label:"周四",name:"4"}}),a("el-tab-pane",{attrs:{label:"周五",name:"5"}}),a("el-tab-pane",{attrs:{label:"周六",name:"6"}}),a("el-tab-pane",{attrs:{label:"周日",name:"7"}})],1),a("div",{staticClass:"right",staticStyle:{"flex-grow":"1"}},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")]),t.tableflag?a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"播放时长",align:"center",prop:"extra.duration","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}],null,!1,1769245459)}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e)}}})]}}],null,!1,593115993)})],1):t._e()],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1):t._e()],1)},B=[],H={name:"page_d_dialog",data:function(){return{dialogFormVisible:!1,innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",editIndex:"",dataList:[],dayList:[],weekList:{},tableflag:!0,weekday:"1",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}],data:""}},filters:{formatallow_replay:function(t){return 1==t?"是":"否"}},created:function(){this.initForm()},methods:{getdata:function(t){this.data=JSON.parse(JSON.stringify(t))},changeweek:function(t,e){this.returndataList()},closeDialog:function(){this.dialogFormVisible=!1},enterDialog:function(){var t=this;if("weekly"!=this.data.extra.template.type||this.weekList["1"]&&this.weekList["1"].length>0&&this.weekList["2"]&&this.weekList["2"].length>0&&this.weekList["3"]&&this.weekList["3"].length>0&&this.weekList["4"]&&this.weekList["4"].length>0&&this.weekList["5"]&&this.weekList["5"].length>0&&this.weekList["6"]&&this.weekList["6"].length>0&&this.weekList["7"]&&this.weekList["7"].length>0){this.data.father=this.data.father.id;var e={list:{daily:[],weekly:{}},type:""};e.list.daily=this.dayList,e.list.weekly=this.weekList,e.type=this.data.extra.template.type,this.data.extra.template=e,Object(u["gb"])(this.data.id,this.data).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.$parent.getList(),t.weekday="1"}))}else this.$message({message:"选择每周重复，请保证每天至少有一个节目",type:"warning"})},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{duration:"",allow_replay:1}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){this.initForm(),this.editIndex=t.$index,this.form=JSON.parse(JSON.stringify(t.row)),this.innerVisible=!0,this.dialogTitle="修改节目",this.dialogType="edit"},deldata:function(t){var e=this,a=t.row;this.editIndex=t.$index,this.$confirm("此操作将永久删除节目名称为"+a.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"daily"==e.data.extra.template.type?(e.dayList.splice(e.editIndex,1),e.datalistformat(e.dayList),e.dataList=e.dayList,e.innerVisible=!1,e.$message({message:"删除成功",type:"success"})):"weekly"==e.data.extra.template.type&&(e.weekList[e.weekday].splice(e.editIndex,1),e.datalistformat(e.weekList[e.weekday]),e.dataList=e.weekList[e.weekday],e.innerVisible=!1,e.$message({message:"删除成功",type:"success"}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},returntime:function(t,e){function a(t){return t<10?"0"+t:t}var r="1970/1/1 ",i=(t=t||"09:01:22",e=e||"22:22:22",new Date(r+t)),o=new Date(r+e),n=parseInt((o.getTime()-i.getTime())/1e3);Math.floor(n/86400/365);n%=31536e3;Math.floor(n/86400/30);n%=2592e3;Math.floor(n/86400);n%=86400;var s=Math.floor(n/3600);n%=3600;var l=Math.floor(n/60);n%=60;var c=n;return a(s)+":"+a(l)+":"+a(c)},datalistformat:function(t){t.sort((function(t,e){return e.time<t.time?1:-1}));for(var e=0;e<t.length;e++)e<t.length-1?t[e].extra.duration=this.returntime(t[e].time,t[e+1].time):t[e].extra.duration=this.returntime(t[e].time,"24:00:00");return t},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.form));if("edit"==t.dialogType){if("daily"==t.data.extra.template.type){for(var r=0;r<t.dayList.length;r++)if(a.time==t.dayList[r].time&&r!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.splice(t.editIndex,1,a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){for(r=0;r<t.weekList[t.weekday].length;r++)if(a.time==t.weekList[t.weekday][r].time&&r!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].splice(t.editIndex,1,a),t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}else if("daily"==t.data.extra.template.type){for(r=0;r<t.dayList.length;r++)if(a.time==t.dayList[r].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.push(a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){if(Object(d["a"])(t.weekList[t.weekday])){for(r=0;r<t.weekList[t.weekday].length;r++)if(a.time==t.weekList[t.weekday][r].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].push(a)}else t.weekList[t.weekday]=[],t.weekList[t.weekday].push(a);t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}}))},chooseradio:function(){var t=this;this.tableflag=!1,this.$nextTick((function(){t.tableflag=!0})),this.returndataList()},returndataList:function(){if(this.dataList=[],!this.data.extra.template){var t={list:{daily:[],weekly:{}},type:"none"};this.data.extra.template=t}"daily"==this.data.extra.template.type?(this.dayList=this.data.extra.template.list.daily,this.dataList=this.dayList):"weekly"==this.data.extra.template.type?(this.weekList=this.data.extra.template.list.weekly,this.weekList||(this.weekList={},this.weekList[this.weekday]=[]),this.dataList=this.weekList[this.weekday]):this.dataList=[]}}},E=H,J=(a("206f"),a("721b"),Object(f["a"])(E,U,B,!1,null,"32289550",null)),R=J.exports,K={components:{Pagedialog:R},props:{productId:{type:Number,default:0},productList:{type:Array,default:[]}},name:"page_d",data:function(){var t,e=sessionStorage.getItem("token");return{importHeaders:{Authorization:e},queryParams:{page:1,pageSize:10,product_id:0,type:"radio_channel"},loading:!0,dataList:[],total:0,statusoptions:[{value:1,label:"启用"},{value:2,label:"禁用"}],dialogFormVisible:!1,form:{},rules:(t={name:[{required:!0,message:"请输入频道姓名",trigger:"blur"}],sort:[{required:!0,message:"请输入权重(排序)",trigger:"blur"}],product_id:[{required:!0,message:"请选择所属产品",trigger:"blur"}]},Object(s["a"])(t,"extra.logo",[{required:!0,message:"请选择频道logo",trigger:"blur"}]),Object(s["a"])(t,"forway",[{required:!0,message:"请选择适用场景",trigger:"blur"}]),Object(s["a"])(t,"status",[{required:!0,message:"请选择是否启用",trigger:"blur"}]),t),dialogType:"add",dialogTitle:""}},filters:{formattemplate:function(t){return t?"daily"==t.type?"每日循环":"weekly"==t.type?"每周循环":"未启用":"未启用"}},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"}},watch:{productId:function(t){this.queryParams.product_id=t,this.getList()}},created:function(){this.initForm()},methods:{program:function(t){this.$refs.Pagedialog.getdata(t),this.$refs.Pagedialog.dialogFormVisible=!0,this.$refs.Pagedialog.returndataList()},handleAvatarSuccess:function(t,e,a){this.form.extra.logo=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["Mb"])(e).then((function(e){t.loading=!1,t.dataList=e.data,t.total=e.total}))},statuschange:function(t){var e=this;t.father=t.father.id,Object(u["gb"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(){this.initForm(),this.dialogTitle="新增频道",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={type:"radio_channel",father:0,name:"",sort:0,product_id:"",forway:[],extra:{has_live:"",has_replay:"",intro:"",logo:"",stream_urls:[{name:"标清",url:""}]},status:""}},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑频道",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),e.form.forway=[],1==e.form.extra.has_replay&&e.form.forway.push("点播"),1==e.form.extra.has_live&&e.form.forway.push("直播"),console.log(e.form)})),this.dialogFormVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.id+"的频道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["R"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.form.forway.indexOf("直播")>-1?this.form.extra.has_live=1:this.form.extra.has_live=0,this.form.forway.indexOf("点播")>-1?this.form.extra.has_replay=1:this.form.extra.has_replay=0,this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=JSON.parse(JSON.stringify(t.form));a.father=a.father.id,Object(u["gb"])(a.id,a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else Object(u["o"])(t.form).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}))}}},Q=K,G=(a("2206"),a("667e"),Object(f["a"])(Q,N,z,!1,null,"026000f4",null)),Y=G.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_e"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_e",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[a("div",[a("div",{staticClass:"top",staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:"选择日期"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}})],1),a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}},[a("el-radio-button",{attrs:{label:t.nowDate(0)}},[t._v(t._s(t._f("dateformat")(t.nowDate(0),"today")))]),t._l(6,(function(e,r){return[a("el-radio-button",{attrs:{label:t.nowDate(e)}},[t._v(t._s(t._f("dateformat")(t.nowDate(e))))])]}))],2),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}])}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1)],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},X=[],Z={name:"page_e",props:{productId:{type:Number,default:0}},data:function(){var t=this.getDay(0);return{pickerOptions:{disabledDate:function(t){return t.getTime()-5184e5>Date.now()||t.getTime()+6048e5<Date.now()}},loading:!0,dataList:[],tvList:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"radio_channel"},queryParams:{page:1,pageSize:999,channel_id:"",date:t},innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}]}},created:function(){this.initForm()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList(),this.getList()}},filters:{dateformat:function(t,e){t=new Date(t);var a=t.getDay(),r=["(周日)","(周一)","(周二)","(周三)","(周四)","(周五)","(周六)"],i=r[a],o=t.getMonth()+1,n=String(t.getDate()<10?"0"+t.getDate():t.getDate());return e?o+"."+n+" (今天)":o+"."+n+" "+i},formatallow_replay:function(t){return 1==t?"是":"否"}},computed:{nowDate:function(){var t=this;return function(e){return t.getDay(e)}},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live}))}},methods:{pickerdatechange:function(){this.getList()},getDay:function(t){var e=new Date,a=e.getTime()+864e5*t;e.setTime(a);var r=e.getFullYear(),i=e.getMonth(),o=e.getDate();return i=this.doHandleMonth(i+1),o=this.doHandleMonth(o),r+"-"+i+"-"+o},doHandleMonth:function(t){var e=t;return 1===t.toString().length&&(e="0"+t),e},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));this.dataList=[],Object(u["Nb"])(e).then((function(e){t.loading=!1,t.dataList=e.data}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["Mb"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{allow_replay:""}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除节目名称为"+t.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["N"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={type:"2"};a.channel_id=t.queryParams.channel_id,a.date=t.queryParams.date;var r=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["cb"])(r.id,r).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["p"])(r).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},tt=Z,et=(a("5316"),Object(f["a"])(tt,W,X,!1,null,null,null)),at=et.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_f"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_f",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[t.showlist?t._e():a("div",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),t.showlist?t._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,4181223627)}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"280px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"dbjmd",label:"点播节目单"},on:{fatherMethod:function(a){return t.golist(e.row)}}}),a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}],null,!1,3520136552)})],1),t.showlist?a("Pageclist",{attrs:{showlist:t.showlist,_channel_id:t._channel_id},on:{back:t.back}}):t._e()],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目Logo/封面:",prop:"extra.cover[0].path"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"cover"),"before-upload":t.beforeAvatarUpload}},[t.form.extra.cover[0].path?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.cover[0].path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重(排序):",prop:"sort"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入权重"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"绑定视频栏目",prop:"extra.vms_channel_type"}},[a("el-radio-group",{model:{value:t.form.extra.vms_channel_type,callback:function(e){t.$set(t.form.extra,"vms_channel_type",e)},expression:"form.extra.vms_channel_type"}},[a("el-radio",{attrs:{label:"cloud"}},[t._v("蓝云视频栏目")]),a("el-radio",{attrs:{label:"vms"}},[t._v("VMS视频栏目")])],1)],1),"cloud"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"蓝云视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"1",attrs:{props:{value:"code",label:"name",emitPath:!1},options:t.videocatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),"vms"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"VMS视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"2",attrs:{props:{value:"id",label:"name",emitPath:!1},options:t.vmscatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},it=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c_list"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("返回上一级")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"script.id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"script.title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属节目",align:"center",prop:"channel.name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"script.status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.script.status,callback:function(a){t.$set(e.row.script,"status",a)},expression:"scope.row.script.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"script.created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"740px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"点播节目单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入点播节目单名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目单封面:",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"name"),"before-upload":t.beforeAvatarUpload}},[t.form.name?a("img",{staticClass:"avatar",attrs:{src:t.form.name}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"资源地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"播放时间:",prop:"play_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.play_time,callback:function(e){t.$set(t.form,"play_time",e)},expression:"form.play_time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"基础点击量:",prop:"view_base_num"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入基础点击量"},model:{value:t.form.view_base_num,callback:function(e){t.$set(t.form,"view_base_num",e)},expression:"form.view_base_num"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"name"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},nt=[],st={name:"page_c_list",props:{_channel_id:{type:Number,default:0},showlist:{type:Boolean,default:!0}},data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},dataList:[],loading:!0,statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],dialogTitle:"",innerVisible:!1,form:{},rules:{}}},created:function(){this.getList()},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"}},methods:{handleAvatarSuccess:function(t,e){this.form.name=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},back:function(){this.$emit("back",!1)},getList:function(){var t=this;this.loading=!0;var e={channel_id:this._channel_id,type:"tv_replay"};Object(u["rb"])(e).then((function(e){t.loading=!1,console.log(e),t.dataList=e.data}))},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.script.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["O"])(t.script.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){this.innerVisible=!1},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={status:1,extra:{cover:[{path:"",intro:""}],title:"",stream:[{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_h264_128k_mp3.mp3",rate:"128",format:"mp3",video_id:"581e88ee8cb649fa9692a07d0726c889",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#h264_128k_mp3.mp3"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_1500K_MP4.mp4",rate:"1500",format:"mp4",video_id:"455d73bc95d14f6a9fbaba3f1b03eda4",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_1500K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_800K_MP4.mp4",rate:"800",format:"mp4",video_id:"ef2418a8e8b4480fa172668c8e82734e",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_800K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_450K_MP4.mp4",rate:"450",format:"mp4",video_id:"07df38e0829a480abef854674ee6685f",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_450K_MP4.mp4"}]}}},editdata:function(t){console.log(t),this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.innerVisible=!0}}},lt=st,ct=(a("d3a4"),a("301f"),Object(f["a"])(lt,ot,nt,!1,null,"2d014793",null)),ut=ct.exports,dt={name:"page_f",props:{productId:{type:Number,default:0}},components:{Pageclist:ut},data:function(){var t=sessionStorage.getItem("token");return{showlist:!1,_channel_id:"",importHeaders:{Authorization:t},loading:!0,dataList:[],tvList:[],videocatalogoptions:[],vmscatalogoptions:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"radio_channel"},queryParams:{page:1,pageSize:999,channel_id:"",type:"radio_replay"},innerVisible:!1,dialogTitle:"",form:{},rules:{sort:[{required:!0,message:"请输入权重",trigger:"blur"}],status:[{required:!0,message:"请选择是否允许回看",trigger:"blur"}],"extra.cover[0].path":[{required:!0,message:"请选择节目Logo/封面",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}]}},created:function(){this.getList(),this.initForm(),this.getvms_channels()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList()}},computed:{VUE_APP_BASE_API:function(){return"http://batrix-local.cztv.com"},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay}))}},methods:{back:function(t){this.showlist=t},golist:function(t){this._channel_id=t.id,this.showlist=!0},statuschange:function(t){var e=this;Object(u["T"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},getvms_channels:function(){var t=this;Object(u["Qb"])(1).then((function(e){t.videocatalogoptions=e})),Object(u["Qb"])(0).then((function(e){function a(t){for(var e=0;e<t.length;e++)t[e].id=String(t[e].id),t[e].children&&a(t[e].children);return t}t.vmscatalogoptions=e,a(t.vmscatalogoptions)}))},handleAvatarSuccess:function(t,e){this.form.extra.cover[0].path=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},getList:function(){var t=this;this.showlist=!1,this.loading=!0;var e=this.queryParams.channel_id;e&&Object(u["nb"])(e).then((function(e){t.loading=!1,t.dataList=e}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["Mb"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",product_id:this.productId,father:this.queryParams.channel_id,sort:0,status:1,type:"tv_replay",extra:{cover:[{path:"",intro:""}],vms_channel:"",vms_channel_type:"cloud"}},console.log(this.form)},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除栏目id为"+t.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["B"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={};a.channel_id=t.queryParams.channel_id;var r=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["T"])(r.id,r).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["q"])(r).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},pt=dt,mt=(a("5fc3"),a("9ac6"),a("580a"),Object(f["a"])(pt,rt,it,!1,null,"10170d79",null)),ft=mt.exports,ht={name:"radioTV",components:{Pagea:w,Pageb:$,Pagec:A,Paged:Y,Pagee:at,Pagef:ft},data:function(){return{activeName:"page_a",product_id:0,productList:[]}},created:function(){this.getproductList()},methods:{handleClick:function(t,e){1==t.index&&(this.$refs.page_b.gettvList(),this.$refs.page_b.initForm()),2==t.index&&(this.$refs.page_c.initForm(),this.$refs.page_c.gettvList()),4==t.index&&(this.$refs.page_e.gettvList(),this.$refs.page_e.initForm()),5==t.index&&(this.$refs.page_f.initForm(),this.$refs.page_f.gettvList())},getproductList:function(){var t=this;Object(u["Fb"])({}).then((function(e){t.productList=e.data,t.product_id=t.productList[0].id}))}}},bt=ht,gt=Object(f["a"])(bt,r,i,!1,null,null,null);e["default"]=gt.exports},d2d2:function(t,e,a){},d3a4:function(t,e,a){"use strict";a("77fa")},d7cf:function(t,e,a){"use strict";a("7426")},e829:function(t,e,a){},e994:function(t,e,a){"use strict";a("66b3")},ea03:function(t,e,a){},fad9:function(t,e,a){"use strict";a("415e")}}]);