(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60e65263"],{"0849":function(e,t,a){"use strict";a("25a0")},"25a0":function(e,t,a){},"612c":function(e,t,a){},dfe6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column",staticStyle:{padding:"30px"}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.adddata}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:e.dataList,"row-key":"id","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{label:"部门名称",align:"left",prop:"name"}}),a("el-table-column",{attrs:{label:"部门ID",align:"center",prop:"id","show-overflow-tooltip":!0}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"360px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.editdata(t.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"600px","close-on-click-modal":!1,title:e.dialogTitle,top:"10vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{staticClass:"placeholderdiv",attrs:{"label-width":"150px",label:"上级部门:",prop:"father"}},[a("el-cascader",{staticStyle:{width:"350px"},attrs:{"show-all-levels":!1,placeholder:e.form.placeholder,options:e.dataList,props:{emitPath:!1,checkStrictly:!0,value:"id",label:"name"},clearable:""},model:{value:e.form.father,callback:function(t){e.$set(e.form,"father",t)},expression:"form.father"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"部门:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入部门名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"150px",label:"描述:",prop:""}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入部门描述",autosize:{minRows:4},type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1)],1)},o=[],r=(a("b0c0"),a("e9c4"),a("a9e3"),a("b49d")),s=a("0fea"),l={name:"column",components:{Cropper:r["a"]},data:function(){var e=sessionStorage.getItem("token");return{forceRefresh:!1,userdata:[],importHeaders:{Authorization:e},queryParams:{keyword:"",product_id:"",createDate:"",start_date:"",endd_ate:""},catalogid:"",productList:{},sourceId:"",statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],catalogoptions:[],styleoptions:[],checkedmedias:[],loading:!0,dataList:[],dialogFormVisible:!1,form:{},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}]},dialogType:"add",dialogTitle:""}},created:function(){this.initForm(),this.getList()},methods:{handleDateChange:function(e){var t=e||["",""];this.queryParams.start_date=t[0],this.queryParams.endd_ate=t[1]},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={father:"",name:"",description:""}},getList:function(){var e=this;console.log(this.queryParams),this.loading=!0,Object(s["Kb"])(this.removePropertyOfNullFor0(this.queryParams)).then((function(t){e.loading=!1,e.dataList=t}))},adddata:function(e){this.initForm(),this.form.father=[e.id]||!1,this.form.placeholder=e.name||"",this.dialogTitle="新增部门",this.dialogType="add",this.dialogFormVisible=!0},editdata:function(e){var t=this;this.initForm(),this.catalogid="",this.dialogTitle="编辑部门",this.dialogType="edit",Object(s["Lb"])(e.id).then((function(e){t.form=JSON.parse(JSON.stringify(e)),t.dialogFormVisible=!0,t.form.placeholder=e.father?e.name:""}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除id为"+e.id+"的部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["R"])(e.id).then((function(e){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=JSON.parse(JSON.stringify(e.form));a.father=Number(a.father),"edit"==e.dialogType?Object(s["F"])(a.id,a).then((function(t){e.$message({message:"修改成功",type:"success"}),e.dialogFormVisible=!1,e.getList()})):Object(s["b"])(a).then((function(t){e.$message({message:"新增成功",type:"success"}),e.dialogFormVisible=!1,e.getList()}))}}))}}},n=l,c=(a("0849"),a("fa1c"),a("2877")),d=Object(c["a"])(n,i,o,!1,null,"5591f174",null);t["default"]=d.exports},fa1c:function(e,t,a){"use strict";a("612c")}}]);