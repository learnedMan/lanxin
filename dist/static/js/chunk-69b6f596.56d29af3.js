(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69b6f596","chunk-201002bc","chunk-20447de9"],{"01d6":function(e,t,a){"use strict";a("d6f4")},"0385":function(e,t,a){"use strict";a("b130"),a("90aa"),a("e18c");var r=a("f753"),i=a.n(r),n=a("b705"),o=a("a18c"),s=a("5f87"),l=a("5041"),u=i.a.create({baseURL:l["d"],timeout:5e3});u.interceptors.request.use((function(e){return sessionStorage.getItem("token")&&Object(s["d"])()&&!e.url.includes("/api/authorizations/refresh")?new Promise((function(t){i()({url:"/api/authorizations/refresh",method:"post",baseURL:"/",timeout:5e3,headers:{Authorization:sessionStorage.getItem("token")}}).then((function(a){if(console.log(a.data),200===a.status){var r=a.data,i=r.token_type+" "+r.access_token,n=(new Date).getTime();sessionStorage.setItem("token",i),sessionStorage.setItem("tokenQueryTime",n),e.headers.Authorization=i,t(e)}else sessionStorage.removeItem("token"),o["c"].push({path:"/login"})})).catch((function(){sessionStorage.removeItem("token"),o["c"].push({path:"/login"})}))})):(e.headers.Authorization=sessionStorage.getItem("token"),e)}),(function(e){return Object(n["Message"])({showClose:!0,message:e,duration:5e3,type:"error.data.error.message"}),Promise.reject(e.data.error.message)})),u.interceptors.response.use((function(e){var t=(new Date).getTime();return sessionStorage.setItem("tokenQueryTime",t),200==e.data.code||"true"===e.headers.success?e.data:(Object(n["Message"])({showClose:!0,message:e.data.msg||decodeURI(e.headers.msg),type:"error"}),e.data.data&&e.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(e.data.msg))}),(function(e){return Object(n["Message"])({showClose:!0,message:e,type:"error"}),Promise.reject(e)})),t["a"]=u},"0530":function(e,t,a){},"0a03":function(e,t,a){},"0fea":function(e,t,a){"use strict";a.d(t,"zb",(function(){return o})),a.d(t,"o",(function(){return s})),a.d(t,"pb",(function(){return l})),a.d(t,"X",(function(){return u})),a.d(t,"T",(function(){return m})),a.d(t,"Nb",(function(){return c})),a.d(t,"s",(function(){return p})),a.d(t,"ub",(function(){return d})),a.d(t,"db",(function(){return b})),a.d(t,"U",(function(){return f})),a.d(t,"lc",(function(){return h})),a.d(t,"y",(function(){return _})),a.d(t,"Xb",(function(){return v})),a.d(t,"Cb",(function(){return x})),a.d(t,"x",(function(){return g})),a.d(t,"xb",(function(){return y})),a.d(t,"G",(function(){return w})),a.d(t,"fb",(function(){return O})),a.d(t,"V",(function(){return k})),a.d(t,"qc",(function(){return j})),a.d(t,"z",(function(){return F})),a.d(t,"rc",(function(){return S})),a.d(t,"A",(function(){return I})),a.d(t,"mc",(function(){return P})),a.d(t,"t",(function(){return N})),a.d(t,"vb",(function(){return C})),a.d(t,"tc",(function(){return D})),a.d(t,"nc",(function(){return q})),a.d(t,"hc",(function(){return L})),a.d(t,"q",(function(){return $})),a.d(t,"rb",(function(){return z})),a.d(t,"Z",(function(){return T})),a.d(t,"Ub",(function(){return M})),a.d(t,"Sb",(function(){return E})),a.d(t,"h",(function(){return V})),a.d(t,"kb",(function(){return R})),a.d(t,"J",(function(){return H})),a.d(t,"ic",(function(){return A})),a.d(t,"p",(function(){return B})),a.d(t,"qb",(function(){return U})),a.d(t,"Y",(function(){return J})),a.d(t,"m",(function(){return K})),a.d(t,"N",(function(){return Q})),a.d(t,"yc",(function(){return W})),a.d(t,"ec",(function(){return G})),a.d(t,"nb",(function(){return X})),a.d(t,"jc",(function(){return Y})),a.d(t,"xc",(function(){return Z})),a.d(t,"fc",(function(){return ee})),a.d(t,"n",(function(){return te})),a.d(t,"ob",(function(){return ae})),a.d(t,"W",(function(){return re})),a.d(t,"kc",(function(){return ie})),a.d(t,"r",(function(){return ne})),a.d(t,"tb",(function(){return oe})),a.d(t,"cb",(function(){return se})),a.d(t,"gc",(function(){return le})),a.d(t,"ac",(function(){return ue})),a.d(t,"j",(function(){return me})),a.d(t,"lb",(function(){return ce})),a.d(t,"oc",(function(){return pe})),a.d(t,"u",(function(){return de})),a.d(t,"eb",(function(){return be})),a.d(t,"wb",(function(){return fe})),a.d(t,"pc",(function(){return he})),a.d(t,"v",(function(){return _e})),a.d(t,"sb",(function(){return ve})),a.d(t,"ab",(function(){return xe})),a.d(t,"sc",(function(){return ge})),a.d(t,"w",(function(){return ye})),a.d(t,"Db",(function(){return we})),a.d(t,"gb",(function(){return Oe})),a.d(t,"M",(function(){return ke})),a.d(t,"Mb",(function(){return je})),a.d(t,"bb",(function(){return Fe})),a.d(t,"dc",(function(){return Se})),a.d(t,"cc",(function(){return Ie})),a.d(t,"l",(function(){return Pe})),a.d(t,"mb",(function(){return Ne})),a.d(t,"L",(function(){return Ce})),a.d(t,"C",(function(){return De})),a.d(t,"zc",(function(){return qe})),a.d(t,"Zb",(function(){return Le})),a.d(t,"Yb",(function(){return $e})),a.d(t,"hb",(function(){return ze})),a.d(t,"Jb",(function(){return Te})),a.d(t,"Ib",(function(){return Me})),a.d(t,"Kb",(function(){return Ee})),a.d(t,"Hb",(function(){return Ve})),a.d(t,"Qb",(function(){return Re})),a.d(t,"Pb",(function(){return He})),a.d(t,"f",(function(){return Ae})),a.d(t,"F",(function(){return Be})),a.d(t,"S",(function(){return Ue})),a.d(t,"Bb",(function(){return Je})),a.d(t,"B",(function(){return Ke})),a.d(t,"Ob",(function(){return Qe})),a.d(t,"e",(function(){return We})),a.d(t,"jb",(function(){return Ge})),a.d(t,"R",(function(){return Xe})),a.d(t,"Wb",(function(){return Ye})),a.d(t,"yb",(function(){return Ze})),a.d(t,"i",(function(){return et})),a.d(t,"Tb",(function(){return tt})),a.d(t,"Eb",(function(){return at})),a.d(t,"a",(function(){return rt})),a.d(t,"Fb",(function(){return it})),a.d(t,"E",(function(){return nt})),a.d(t,"O",(function(){return ot})),a.d(t,"Ab",(function(){return st})),a.d(t,"D",(function(){return lt})),a.d(t,"Vb",(function(){return ut})),a.d(t,"b",(function(){return mt})),a.d(t,"wc",(function(){return ct})),a.d(t,"P",(function(){return pt})),a.d(t,"Gb",(function(){return dt})),a.d(t,"c",(function(){return bt})),a.d(t,"vc",(function(){return ft})),a.d(t,"Q",(function(){return ht})),a.d(t,"bc",(function(){return _t})),a.d(t,"Rb",(function(){return vt})),a.d(t,"g",(function(){return xt})),a.d(t,"I",(function(){return gt})),a.d(t,"k",(function(){return yt})),a.d(t,"K",(function(){return wt})),a.d(t,"Lb",(function(){return Ot})),a.d(t,"H",(function(){return kt})),a.d(t,"uc",(function(){return jt})),a.d(t,"d",(function(){return Ft})),a.d(t,"ib",(function(){return St}));a("b4fb");var r=a("b775"),i=a("b60c"),n=a("0385");a("2ab73");function o(){return Object(r["a"])({url:"/api/permissions/getAllPermissions",method:"get"})}function s(e){return Object(r["a"])({url:"/api/permissions",method:"post",params:e})}function l(e,t){return Object(r["a"])({url:"/api/permissions/"+e,method:"patch",params:t})}function u(e){return Object(r["a"])({url:"/api/permissions/"+e,method:"delete"})}function m(e){return Object(r["a"])({url:"/api/permissions/deletePermissions",method:"post",params:{ids:e}})}function c(e){return Object(r["a"])({url:"/api/system/data",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/api/roles",method:"post",params:e})}function d(e,t){return Object(r["a"])({url:"/api/roles/"+e,method:"patch",params:t})}function b(e){return Object(r["a"])({url:"/api/roles/"+e,method:"delete"})}function f(e){return Object(r["a"])({url:"/api/roles/deleteRoles",method:"post",params:{ids:e}})}function h(e){return Object(r["a"])({url:"/api/roles/"+e+"/permission",method:"get"})}function _(e,t){return Object(r["a"])({url:"/api/roles/"+e+"/assignPermission",method:"post",params:{permissions:t}})}function v(e){return Object(r["a"])({url:"/api/system/data",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/api/channels",method:"get",params:e})}function g(e){return Object(r["a"])({url:"/api/users",method:"post",data:e})}function y(e,t){return Object(r["a"])({url:"/api/user/"+e,method:"patch",data:t})}function w(e,t){return Object(r["a"])({url:"/api/users/setStatus",method:"post",params:{ids:e,status:t}})}function O(e){return Object(r["a"])({url:"/api/user/"+e,method:"delete"})}function k(e){return Object(r["a"])({url:"/api/user/deleteUsers",method:"post",params:{ids:e}})}function j(e){return Object(r["a"])({url:"/api/user/"+e+"/permission",method:"get"})}function F(e,t){return Object(r["a"])({url:"/api/user/"+e+"/assignPermission",method:"post",params:{permissions:t}})}function S(e){return Object(r["a"])({url:"/api/user/"+e+"/roles",method:"get"})}function I(e,t){return Object(r["a"])({url:"/api/user/"+e+"/assignRole",method:"post",params:{roles:t}})}function P(e){return Object(r["a"])({url:"/api/sites",method:"get",params:e})}function N(e){return Object(r["a"])({url:"/api/sites",method:"post",data:e})}function C(e,t){return Object(r["a"])({url:"/api/sites/"+e,method:"patch",data:t})}function D(){return Object(r["a"])({url:"/api/zones",method:"get"})}function q(e){return Object(r["a"])({url:"/api/sites/"+e,method:"get"})}function L(e){return Object(r["a"])({url:"/api/products",method:"get",params:e})}function $(e){return Object(r["a"])({url:"/api/products",method:"post",data:e})}function z(e,t){return Object(r["a"])({url:"/api/products/"+e,method:"patch",data:t})}function T(e){return Object(r["a"])({url:"/api/products/"+e,method:"delete"})}function M(e){return Object(r["a"])({url:"/api/sync_settings",method:"get",params:e})}function E(){return Object(r["a"])({url:"/api/sync_settings/info",method:"get"})}function V(e){return Object(r["a"])({url:"/api/sync_settings",method:"post",data:e})}function R(e,t){return Object(r["a"])({url:"/api/sync_settings/"+e,method:"patch",data:t})}function H(e){return Object(r["a"])({url:"/api/sync_settings/"+e,method:"delete"})}function A(e){return Object(r["a"])({url:"/api/product_versions",method:"get",params:e})}function B(e){return Object(r["a"])({url:"/api/product_versions",method:"post",data:e})}function U(e,t){return Object(r["a"])({url:"/api/product_versions/"+e,method:"patch",data:t})}function J(e){return Object(r["a"])({url:"/api/product_versions/"+e,method:"delete"})}function K(e){return Object(r["a"])({url:"/api/channels",method:"post",data:e})}function Q(e){return Object(r["a"])({url:"/api/channels/"+e,method:"delete"})}function W(e){return Object(r["a"])({url:"/api/channels/setSort",method:"post",data:e})}function G(e){return Object(r["a"])({url:"/api/channels/"+e,method:"get"})}function X(e,t){return Object(r["a"])({url:"/api/channels/"+e,method:"patch",data:t})}function Y(e){return Object(r["a"])({url:"/api/news/recycleBin",method:"get",params:e})}function Z(e){return Object(r["a"])({url:"/api/news/restore",method:"post",params:{ids:e}})}function ee(e){return Object(r["a"])({url:"/api/categories",method:"get",params:e})}function te(e){return Object(r["a"])({url:"/api/categories",method:"post",data:e})}function ae(e,t){return Object(r["a"])({url:"/api/categories/"+e,method:"patch",data:t})}function re(e){return Object(r["a"])({url:"/api/categories/"+e,method:"delete"})}function ie(e){return Object(r["a"])({url:"/api/resources",method:"get",params:e})}function ne(e){return Object(r["a"])({url:"/api/resources",method:"post",data:e})}function oe(e,t){return Object(r["a"])({url:"/api/resources/"+e,method:"post",data:t})}function se(e){return Object(r["a"])({url:"/api/resources/"+e,method:"delete"})}function le(e){return Object(r["a"])({url:"/api/resources/myResources",method:"get",params:e})}function ue(e){return Object(r["a"])({url:"/api/cloud_vms_channels",method:"get",params:e})}function me(e){return Object(r["a"])({url:"/api/cloud_vms_channels",method:"post",data:e})}function ce(e,t){return Object(r["a"])({url:"/api/cloud_vms_channels/"+e,method:"patch",data:t})}function pe(e){return Object(r["a"])({url:"/api/channels/getSpecialChannels",method:"get",params:e})}function de(e){return Object(r["a"])({url:"/api/channels",method:"post",data:e})}function be(e){return Object(r["a"])({url:"/api/channels/"+e,method:"delete"})}function fe(e,t){return Object(r["a"])({url:"/api/channels/"+e,method:"patch",data:t})}function he(e){return Object(r["a"])({url:"/api/programs",method:"get",params:e})}function _e(e){return Object(r["a"])({url:"/api/programs",method:"post",data:e})}function ve(e,t){return Object(r["a"])({url:"/api/programs/"+e,method:"patch",data:t})}function xe(e){return Object(r["a"])({url:"/api/programs/"+e,method:"delete"})}function ge(e){return Object(r["a"])({url:"/api/videos/vms_channels/?cloud=".concat(e),method:"get"})}function ye(e){return Object(r["a"])({url:"/api/channels",method:"post",data:e})}function we(e){return Object(r["a"])({url:"/api/channels/".concat(e,"/getChild"),method:"get"})}function Oe(e,t){return Object(r["a"])({url:"/api/channels/"+e,method:"patch",data:t})}function ke(e){return Object(r["a"])({url:"/api/channels/"+e,method:"delete"})}function je(e){return Object(r["a"])({url:"/api/replays/getReplaysByChannel",method:"get",params:e})}function Fe(e){return Object(r["a"])({url:"/api/replays/"+e,method:"delete"})}function Se(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"get"})}function Ie(e,t){return Object(r["a"])({url:"/api/broadcastStatement?broadcast_id=".concat(e,"&stream_id=").concat(t),method:"get"})}function Pe(e){return Object(r["a"])({url:"/api/broadcastStatement",method:"post",data:e})}function Ne(e,t){return Object(r["a"])({url:"/api/broadcastStatement/".concat(e),method:"patch",data:t})}function Ce(e){return Object(r["a"])({url:"/api/broadcastStatement/"+e,method:"delete"})}function De(){return Object(i["a"])({url:"/catalog/list",method:"get"})}function qe(e){return Object(i["a"])({url:"/style/catalogCodeStyle",method:"post",data:e})}function Le(e){return Object(i["a"])({url:"/internal/uc/queryUserList",method:"post",data:e})}function $e(e){return Object(i["a"])({url:"/internal/uc/queryUserInfo",method:"get",params:e})}function ze(e){return Object(i["a"])({url:"/internal/uc/updateUserInfo",method:"post",data:e})}function Te(e){return Object(i["a"])({url:"/internal/uc/queryInvitationcodeList",method:"post",data:e})}function Me(e){return Object(i["a"])({url:"/intranet/uc/queryInvitationCountDatas",method:"post",data:e})}function Ee(e){return Object(i["a"])({url:"/internal/uc/queryLoginLogList",method:"post",data:e})}function Ve(e){return Object(i["a"])({url:"/internal/points/queryPointsLog",method:"post",data:e})}function Re(e){return Object(i["a"])({url:"/internal/uc/qeurySrcretList",method:"post",data:e})}function He(e){return Object(i["a"])({url:"/internal/uc/querySrcretSet",method:"post",data:e})}function Ae(e){return Object(i["a"])({url:"/internal/uc/addSrcretSet",method:"post",data:e})}function Be(e){return Object(i["a"])({url:"/internal/uc/updateSrcretSet",method:"post",data:e})}function Ue(e){return Object(i["a"])({url:"/internal/uc/deleteSrcretSet",method:"post",data:e})}function Je(e){return Object(n["a"])({url:"/new/intranet/comment/getNoTalkUserList/page",method:"post",data:e})}function Ke(e){return Object(n["a"])({url:"/new/intranet/comment/cancelNoTalkUser",method:"post",data:e})}function Qe(e){return Object(i["a"])({url:"/internal/points/getRuleList",method:"post",data:e})}function We(e){return Object(i["a"])({url:"/internal/points/ruleSave",method:"post",data:e})}function Ge(e){return Object(i["a"])({url:"/internal/points/ruleUpdate",method:"post",data:e})}function Xe(e){return Object(i["a"])({url:"/internal/points/ruleDelete",method:"post",data:e})}function Ye(){return Object(i["a"])({url:"/internal/points/rule/typelist",method:"get"})}function Ze(){return Object(i["a"])({url:"/internal/points/rule/actionlist",method:"get"})}function et(e){return Object(i["a"])({url:"/internal/points/pointLoginCreate",method:"post",data:e})}function tt(e){return Object(i["a"])({url:"/internal/points/pointLoginList",method:"post",data:e})}function at(e){return Object(r["a"])({url:"/api/departments",method:"get",params:e})}function rt(e){return Object(r["a"])({url:"/api/departments",method:"post",data:e})}function it(e){return Object(r["a"])({url:"/api/departments/"+e,method:"get"})}function nt(e,t){return Object(r["a"])({url:"/api/departments/".concat(e),method:"patch",data:t})}function ot(e){return Object(r["a"])({url:"/api/departments/".concat(e),method:"delete"})}function st(e){return Object(r["a"])({url:"/api/products/".concat(e),method:"get"})}function lt(e,t){return Object(r["a"])({url:"/api/products/".concat(e),method:"patch",data:t})}function ut(){return Object(r["a"])({url:"/api/upload/getH5Dir",method:"get"})}function mt(e){return Object(r["a"])({url:"/api/upload/mkdir",method:"post",data:e})}function ct(e){return Object(r["a"])({url:"/api/upload/mkdir",method:"post",data:e})}function pt(e){return Object(r["a"])({url:"/api/upload/rmdir",method:"post",data:e})}function dt(e){return Object(r["a"])({url:"/api/h5",method:"get",params:e})}function bt(e){return Object(r["a"])({url:"/api/h5",method:"post",data:e})}function ft(e,t){return Object(r["a"])({url:"/api/h5/".concat(e),method:"post",data:t})}function ht(e){return Object(r["a"])({url:"/api/h5/".concat(e),method:"delete"})}function _t(e){return Object(n["a"])({url:"/sensitive/whitetxt/list",method:"get",params:e})}function vt(e){return Object(n["a"])({url:"/sensitive/setting/list",method:"get",params:e})}function xt(e){return Object(n["a"])({url:"/sensitive/setting/add",method:"post",data:e})}function gt(e){return Object(n["a"])({url:"/sensitive/setting/del",method:"DELETE",data:e})}function yt(e){return Object(n["a"])({url:"/sensitive/whitetxt/add",method:"post",data:e})}function wt(e){return Object(n["a"])({url:"/sensitive/whitetxt/del",method:"DELETE",data:e})}function Ot(e){return Object(i["a"])({url:"/publish/list",method:"post",data:e})}function kt(e){return Object(i["a"])({url:"/publish/delete?id=".concat(e),method:"post"})}function jt(e){return Object(i["a"])({url:"/meal/openList",method:"post",data:e})}function Ft(e){return Object(i["a"])({url:"/publish/setPublish",method:"post",data:e})}function St(e){return Object(i["a"])({url:"/publish/update",method:"post",data:e})}},"10b1":function(e,t,a){var r=a("1c8b"),i=a("b747");r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},"13cc":function(e,t,a){"use strict";a.d(t,"B",(function(){return n})),a.d(t,"f",(function(){return o})),a.d(t,"u",(function(){return s})),a.d(t,"A",(function(){return l})),a.d(t,"r",(function(){return u})),a.d(t,"k",(function(){return m})),a.d(t,"q",(function(){return c})),a.d(t,"t",(function(){return p})),a.d(t,"e",(function(){return d})),a.d(t,"x",(function(){return b})),a.d(t,"b",(function(){return f})),a.d(t,"h",(function(){return h})),a.d(t,"n",(function(){return _})),a.d(t,"w",(function(){return v})),a.d(t,"a",(function(){return x})),a.d(t,"i",(function(){return g})),a.d(t,"o",(function(){return y})),a.d(t,"z",(function(){return w})),a.d(t,"d",(function(){return O})),a.d(t,"j",(function(){return k})),a.d(t,"p",(function(){return j})),a.d(t,"C",(function(){return F})),a.d(t,"g",(function(){return S})),a.d(t,"v",(function(){return I})),a.d(t,"m",(function(){return P})),a.d(t,"y",(function(){return N})),a.d(t,"c",(function(){return C})),a.d(t,"s",(function(){return D})),a.d(t,"l",(function(){return q}));var r=a("b775"),i=a("b60c");function n(e){return Object(r["a"])({url:"/api/broadcasts",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/api/broadcasts",method:"post",data:e})}function s(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function l(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"delete"})}function m(e,t){return Object(r["a"])({url:"/api/broadcasts/".concat(e),method:"patch",data:t})}function c(e){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"delete"})}function p(e,t){return Object(r["a"])({url:"/api/broadcastStreams/".concat(e),method:"patch",data:t})}function d(e){return Object(r["a"])({url:"/api/broadcastStreams",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/api/ad_places",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/api/ad_places",method:"post",data:e})}function h(e,t){return Object(r["a"])({url:"/api/ad_places/".concat(e),method:"patch",data:t})}function _(e){return Object(r["a"])({url:"/api/product_versions/".concat(e),method:"delete"})}function v(e){return Object(r["a"])({url:"/api/ads",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/api/ads",method:"post",data:e})}function g(e,t){return Object(r["a"])({url:"/api/ads/".concat(e),method:"patch",data:t})}function y(e){return Object(r["a"])({url:"/api/ads/".concat(e),method:"delete"})}function w(e){return Object(r["a"])({url:"/api/push",method:"get",params:e})}function O(e){return Object(r["a"])({url:"/api/push",method:"post",data:e})}function k(e,t){return Object(r["a"])({url:"/api/push/".concat(e),method:"patch",data:t})}function j(e){return Object(r["a"])({url:"/api/push/".concat(e),method:"delete"})}function F(e){return Object(i["a"])({url:"/internal/social/topic/list",method:"post",params:e})}function S(e){return Object(i["a"])({url:"/internal/social/topic/add",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/internal/social/topic/update",method:"post",data:e})}function P(e){return Object(i["a"])({url:"/internal/social/topic/del",method:"post",data:e})}function N(e){return Object(i["a"])({url:"/internal/social/classify/list",method:"post",params:e})}function C(e){return Object(i["a"])({url:"/internal/social/classify/add",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/internal/social/classify/update",method:"post",data:e})}function q(e){return Object(i["a"])({url:"/internal/social/classify/del",method:"post",data:e})}},"18d2":function(e,t,a){"use strict";a.d(t,"b",(function(){return m}));a("e18c"),a("08ba"),a("fe8a"),a("de68"),a("96db"),a("af86"),a("f1a9");var r=a("f753"),i=a.n(r),n=a("b705"),o=a("a18c"),s=a("5041"),l=i.a.create({baseURL:s["f"],timeout:6e4});function u(e){var t="";return Object.keys(e).forEach((function(a){Object.is(e[a],void 0)||Object.is(e[a],null)||Object.is(JSON.stringify(e[a]),"{}")||(t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&")})),t}function m(e,t,a){return l.post(e,t,{transformRequest:[function(e){return u(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"blob"}).then((function(e){var t=e,r=new Blob([t]);if("download"in document.createElement("a")){var i=document.createElement("a");i.download=a,i.style.display="none",i.href=URL.createObjectURL(r),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(r,a)})).catch((function(e){console.error(e)}))}l.interceptors.request.use((function(e){return e.headers.Authorization=sessionStorage.getItem("token"),e}),(function(e){return Object(n["Message"])({showClose:!0,message:e,duration:5e3,type:"error.data.error.message"}),Promise.reject(e.data.error.message)})),l.interceptors.response.use((function(e){return 200==e.data.code||200==e.data.status_code||"true"===e.headers.success||e.data instanceof Blob?e.data:(Object(n["Message"])({showClose:!0,message:e.data.msg||decodeURI(e.headers.msg),type:"error"}),e.data.data&&e.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(e.data.msg))}),(function(e){return Object(n["Message"])({showClose:!0,message:e,type:"error"}),Promise.reject(e)})),t["a"]=l},"1b2e":function(e,t,a){var r=a("1c8b");r({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},"1cfd":function(e,t,a){e.exports=a.p+"static/img/1402-240.597930fe.png"},"1d6e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"xl-news-media"},[!e.disabled&&e.editorPerson?r("el-header",{staticStyle:{"background-color":"#fff","line-height":"40px"},attrs:{height:"40px"}},[r("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿 ")]):e._e(),r("el-main",{staticStyle:{padding:"10px 0"}},[r("el-tabs",{staticClass:"xl-news-media--tab",on:{"tab-click":function(t){return e.handleTabChange("tab")}},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(e){return r("el-tab-pane",{key:e.value,attrs:{disabled:"",label:e.label,name:e.value}})})),1),r("el-form",{ref:"submitForm",staticStyle:{"max-height":"600px",overflow:"auto"},attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[r("el-row",{staticClass:"xl-news-media--bc",staticStyle:{"margin-bottom":"20px"}},[r("el-col",{attrs:{span:24}},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.tagLists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),r("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[r("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[r("script-select",{attrs:{value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.use_watermarks"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)}}},"el-select",e.formOptions["extra.use_watermarks"].item.componentProps,!1),e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[e.editorInit?r("editor",{attrs:{watermark:e.watermark,position:e.parseObj(e.formOptions["extra.use_watermarks"].item),disabled:e.disabled,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)},changeVideoList:e.changeVideoList}}):e._e()],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[r("div",{staticClass:"xl-news-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?r("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{lazy:"",src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):r("i",{staticClass:"el-icon-video-camera-solid"})],1)]),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[r("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_address"),expression:"initFrom().includes('extra.activity_address')"}]},"el-form-item",e.formOptions["extra.activity_address"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.activity_address"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_address"].item)}}},"el-input",e.formOptions["extra.activity_address"].item.componentProps,!1))],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_start_time"),expression:"initFrom().includes('extra.activity_start_time')"}]},"el-form-item",e.formOptions["extra.activity_start_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_start_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_start_time"].item)}}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_end_time"),expression:"initFrom().includes('extra.activity_end_time')"}]},"el-form-item",e.formOptions["extra.activity_end_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_end_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_end_time"].item)}}})],1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.salary_range.min"),expression:"initFrom().includes('extra.salary_range.min')"}],attrs:{label:"薪资区间:","label-width":"100px"}},[r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.min"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,max:e.from.extra.salary_range.max||1/0,clearable:""},model:{value:e.from.extra.salary_range.min,callback:function(t){e.$set(e.from.extra.salary_range,"min",t)},expression:"from.extra.salary_range.min"}},"el-input-number",e.formOptions["extra.salary_range.min"].item.componentProps,!1))],1)],1),r("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.max"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,min:e.from.extra.salary_range.min||0,clearable:""},model:{value:e.from.extra.salary_range.max,callback:function(t){e.$set(e.from.extra.salary_range,"max",t)},expression:"from.extra.salary_range.max"}},"el-input-number",e.formOptions["extra.salary_range.max"].item.componentProps,!1))],1)],1)],1)],1)],1)],1)],1),r("el-row",{attrs:{gutter:20,type:"flex"}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1)],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[r("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,placeholder:e.basePlaceholder,clearable:""},model:{value:e.from.extra.view_base_num,callback:function(t){e.$set(e.from.extra,"view_base_num",t)},expression:"from.extra.view_base_num"}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled?e._e():r("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),r("el-dialog",{attrs:{width:"1000px",top:"4vh","append-to-body":"",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[r("xl-video",{on:{choose:e.videoDialogControl}})],1)],1)},i=[],n=a("e9ff"),o=a("0344"),s=a("8955"),l=a("06c4"),u=(a("e186"),a("513c"),a("77ad"),a("fe8a"),a("15d9"),a("b4fb"),a("e35a"),a("0d7a"),a("e18c"),a("1c2e"),a("9302"),a("4194"),a("ea69"),a("31a0"),a("b130"),a("98e0"),a("96db"),a("dbb3"),a("2eeb"),a("053b"),a("b49d")),m=a("cc48"),c=a("0d9b"),p=a("1ef3"),d=a("90ba"),b=a("d242"),f=a("156b"),h={name:"NewDetail",components:{Cropper:u["a"],ImgTable:p["a"],Tag:c["a"],xlVideo:b["a"],scriptSelect:d["a"],Editor:f["a"]},props:{id:{type:[Number,String],required:!0},disabled:{type:Boolean,default:!1},fetchSuggestions:Function},data:function(){var e=this,t=function(t,a,r){var i=e.formOptions["extra.cover"].item.componentProps.count;Array.isArray(a)&&0!==a.length?a.slice(0,i).every((function(e){return e.path}))?r():r(new Error("请上传".concat(i,"张封面图片"))):r(new Error("请上传封面图片"))},a=function(e,t,a){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return""!==e[t]}))}))?a():a(new Error("请填写完成图片信息")):a(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入新闻标题"}},rule:[{required:!0,message:"请输入新闻标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入新闻副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"},{label:"活动列表",value:"204",count:1,img:"1402-204.png"},{label:"活动大图",value:"205",count:1,img:"1402-205.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入新闻简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"已处理",value:"2"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:a,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"水印位置:",prop:"extra.use_watermarks"},componentProps:{placeholder:"请选择水印位置(无表示不使用水印)"},component:"select",lists:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"},{value:"",label:"无"}]}},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音新闻:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音新闻",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"专题",value:"topic",relatedLabel:"专题栏目ID"},{label:"多模块专题",value:"multi_model_topic",relatedLabel:"多模块专题栏目ID"},{label:"活动",value:"activity"},{label:"视频点播列表",value:"vod_list",relatedLabel:"栏目id"},{label:"多层级",value:"m_level",relatedLabel:"栏目id"},{label:"无跳转",value:"none"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},"extra.activity_address":{item:{key:"extra.activity_address",props:{label:"活动地址:",prop:"extra.activity_address"},component:"input",componentProps:{placeholder:"请输入活动地址"}},rule:[{required:!0,message:"请输入活动地址",trigger:"blur"}]},"extra.activity_start_time":{item:{key:"extra.activity_start_time",props:{label:"开始时间:",prop:"extra.activity_start_time"},component:"date"},rule:[{required:!0,message:"请选择活动开始时间",trigger:"change"}]},"extra.activity_end_time":{item:{key:"extra.activity_end_time",props:{label:"结束时间:",prop:"extra.activity_end_time"},component:"date"},rule:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},"extra.salary_range.min":{item:{key:"extra.salary_range.min",props:{prop:"extra.salary_range.min"},componentProps:{placeholder:"请输入最小薪资"}}},"extra.salary_range.max":{item:{key:"extra.salary_range.max",props:{prop:"extra.salary_range.max"},componentProps:{placeholder:"请输入最大薪资"}}}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"240",cover:[],intro:"",tags:"",keywords:"",publish_timer:{publish_at:"",status:"0"},set_created_at:"",activity_address:"",activity_start_time:"",activity_end_time:"",content:"",is_original:"1",source:"",use_watermarks:"",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:void 0,praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""},salary_range:{min:void 0,max:void 0}}},videoDialog:{title:"选择视频",show:!1,radio:"",video:"",width:"",height:""},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},editorPerson:"",editorVideoLists:[],tagLists:[],editorInit:!1}},computed:{actionUrl:function(){return this.imgurl},viewBaseInterval:function(e){var t,a,r=e.$store.state.user.u_info,i=r.site.extra||{},n=Number((null===(t=i.random_view_range)||void 0===t?void 0:t.max)||0)||1/0,o=Number((null===(a=i.random_view_range)||void 0===a?void 0:a.min)||0);return{min:o,max:n}},basePlaceholder:function(e){var t=e.viewBaseInterval,a=t.max,r=t.min;return a===1/0?"请输入大于".concat(r,"的的正整数"):"请输入".concat(r,"-").concat(a,"的正整数")},watermark:function(e){var t=e.$store.state.user.u_info,a=t.site.extra||{};return a.watermark||""}},watch:{id:{handler:function(e){""!==e&&this.getData()},immediate:!0}},created:function(){var e=this;if(this.getLabels(),!this.disabled){this.getEditorPerson();var t=setInterval((function(){e.getEditorPerson()}),8e3);this.$once("hook:beforeDestroy",(function(){clearInterval(t)}))}},methods:{parseObj:function(e){var t=e.key.split("."),a=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component&&e.componentProps.multiple?a&&a.toString().split(","):a},handleInput:function(e,t){var a=t.key.split("."),r=t.type||"string";"number"===r&&(e=parseInt(e)||""),a.reduce((function(r,i){if(i!==a[a.length-1])return r[i];r[i]="select"===t.component&&t.componentProps.multiple?e.join():e}),this.from)},handleChangeVideo:function(){this.videoDialog.show=!0},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},handleUploadImageSuccess:function(e){e.status_code>=200&&e.status_code<300&&(this.$message.success("图片上传成功!"),this.videoDialog.video=e.path)},initFrom:function(){var e=this,t=[],a=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===a||void 0===a?void 0:a.count)||1;var r=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.publish_timer.status","extra.set_created_at"];"1"===this.from.extra.publish_timer.status&&r.push("extra.publish_timer.publish_at");var i=["author_name","editor_name","extra.is_original","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&i.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(r,["extra.content","extra.custom_rec","extra.use_watermarks"],i);break;case"video":t=[].concat(r,["extra.video_extra.video_list","extra.custom_rec"],i);break;case"album":t=[].concat(r,["extra.album_extra.image_list"],i);break;case"outer_link":t=[].concat(r,["extra.link.type","extra.salary_range.min","extra.salary_range.max",,"extra.view_base_num","extra.praise_base_num","extra.post_base_num"]);var n=this.from.extra.link.type;if("target_obj"===n)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(n))t.push("extra.link.url");else if("activity"===n)t.push("extra.activity_address","extra.activity_start_time","extra.activity_end_time");else if("none"!==n){var o=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===n}));this.formOptions["extra.link.id"].item.props.label="".concat(o.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(o.relatedLabel),t.push("extra.link.id")}break}return t},delEditorVideo:function(e){var t=document.createElement("div");t.innerHTML=e;var a=Array.from(t.querySelectorAll("video"));return a.length?this.editorVideoLists.filter((function(e){return a.find((function(t){return t.title===e.title&&t.cover===e.poster}))})):[]},handleSave:function(){var e=this;this.$refs.submitForm.validate((function(t,a){if(t){var r,i,n=e.initFrom(),o=e.from.extra.type,s=e.formOptions["extra.cover"].item.componentProps.count,u=Object(l["a"])({},n.reduce((function(t,a){return r=a.split("."),r[1]?(i=e.from[r[0]][r[1]],t[r[0]][r[1]]="cover"===r[1]?i.slice(0,s):i):t[r[0]]=e.from[r[0]],t}),{extra:{type:o}}));u.extra.link&&"activity"===u.extra.link.type&&(u.extra.link.url=u.extra.activity_address),u.extra.link&&"target_obj"===u.extra.link.type&&(u.extra.link=Object(l["a"])(Object(l["a"])({},u.extra.link),{},{type:u.target_obj})),delete u.target_obj,delete u.extra.activity_address,"news"===u.extra.type&&(u.extra.video_extra={video_list:e.delEditorVideo(u.extra.content)}),u.status=1,u.extra.view_base_num||0==u.extra.view_base_num||(u.extra.view_base_num=Math.floor(Math.random()*(e.viewBaseInterval.max-e.viewBaseInterval.min+1)+e.viewBaseInterval.min)),Object(m["k"])(e.id,u).then((function(t){var a=t.statu_code,r=t.message;e.handleClose(),a?e.$message.error(r):(e.$message.success("保存草稿成功!"),e.$emit("refresh"))}))}else e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())}))},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(e){var t=this,a=this.initFrom();this.currentTabsFromRules=a.reduce((function(e,a){return Object(l["a"])(Object(l["a"])({},e),{},Object(s["a"])({},a,t.formOptions[a].rule))}),{}),this.$nextTick((function(){var a;"tab"===e&&Object.assign(t.from.extra,{video_extra:{video_list:[]}}),null===(a=t.$refs.submitForm)||void 0===a||a.clearValidate()}))},changeVideoList:function(e){this.editorVideoLists.push(e)},getLabels:function(){var e=this;return Object(m["H"])({page:1,pageSize:9999}).then((function(t){var a=t.data,r=a.map((function(e){return{label:e.name,value:e.id.toString()}}));e.tagLists=r}))},getList:function(){var e=this;return(this.fetchSuggestions?this.fetchSuggestions():Object(m["K"])(this.id)).then((function(t){var a,r,i,n,s,l,u=t.extra;console.log("res 详情数据",t);var m=u.link&&u.link.type||"target_obj",c="";e.formOptions.target_obj.item.lists.find((function(e){return e.value===m}))&&(c=m,m="target_obj"),e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:c,extra:{type:u.type,title:u.title,subtitle:u.subtitle,template_style:u.template_style||"240",cover:u.cover,intro:u.intro,tags:u.tags,keywords:u.keywords,publish_timer:{status:(null!==(a=null===u||void 0===u||null===(r=u.publish_timer)||void 0===r?void 0:r.status)&&void 0!==a?a:"0").toString(),publish_at:null!==(i=null===u||void 0===u||null===(n=u.publish_timer)||void 0===n?void 0:n.publish_at)&&void 0!==i?i:""},set_created_at:u.set_created_at,activity_start_time:u.activity_start_time,activity_end_time:u.activity_end_time,activity_address:u.link&&u.link.url||"",content:u.content,is_original:(u.is_original||"1").toString(),source:u.source,use_watermarks:u.use_watermarks||"",allow_comment:(u.allow_comment||"0").toString(),allow_share:(u.allow_share||"1").toString(),trans_to_audio:(u.trans_to_audio||"1").toString(),view_base_num:u.view_base_num,praise_base_num:u.praise_base_num,post_base_num:u.post_base_num,custom_rec:u.custom_rec||[],video_extra:{video_list:u.video_extra&&u.video_extra.video_list||[]},album_extra:{image_list:u.album_extra&&u.album_extra.image_list||[]},link:{type:m,id:u.link&&u.link.id||"",url:u.link&&u.link.url||""},salary_range:{min:(null===(s=u.salary_range)||void 0===s?void 0:s.min)||void 0,max:(null===(l=u.salary_range)||void 0===l?void 0:l.max)||void 0}}},e.editorVideoLists=Object(o["a"])(u.video_extra&&u.video_extra.video_list||[]),console.log("this from",e.from)}))},getEditorPerson:function(){var e=this;Object(m["F"])({id:this.id,type:"news"}).then((function(t){e.editorPerson=t.length<2?"":t.join()}))},getData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id",e.id),t.next=3,e.getList();case 3:e.handleTabChange(),e.$nextTick((function(){e.editorInit=!0}));case 5:case"end":return t.stop()}}),t)})))()}}},_=h,v=(a("aa5f"),a("cba8")),x=Object(v["a"])(_,r,i,!1,null,null,null);t["a"]=x.exports},"2ab73":function(e,t,a){"use strict";a("e18c");var r=a("f753"),i=a.n(r),n=a("b705"),o=a("a18c"),s=a("5041"),l=i.a.create({baseURL:s["b"],timeout:6e4});l.interceptors.request.use((function(e){return e.headers.Authorization=sessionStorage.getItem("token"),e}),(function(e){return Object(n["Message"])({showClose:!0,message:e,duration:5e3,type:"error.data.error.message"}),Promise.reject(e.data.error.message)})),l.interceptors.response.use((function(e){return 200==e.data.code||"true"===e.headers.success?e.data:(Object(n["Message"])({showClose:!0,message:e.data.msg||decodeURI(e.headers.msg),type:"error"}),e.data.data&&e.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(e.data.msg))}),(function(e){return Object(n["Message"])({showClose:!0,message:e,type:"error"}),Promise.reject(e)}))},"31dc":function(e,t,a){e.exports=a.p+"static/img/1402-222.bdb2b7c8.png"},"48c5":function(e,t,a){e.exports=a.p+"static/img/1402-230.ad860dd5.png"},"48fb":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l}));var r=a("18d2");function i(e){return Object(r["a"])({url:"/api/algo/getMultiHits",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/api/statistics/items/kpiStatistics",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/statistics/items/kpiStatisticsByAuthor",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/api/statistics/items/pageKpiStatistics",method:"post",data:e})}function l(e,t){return Object(r["b"])(e,t,"statistics_kpi.xlsx")}},"4e52":function(e,t,a){e.exports=a.p+"static/img/1402-205.85451c9a.png"},"503e":function(e,t,a){"use strict";a("d1c4")},"5a2d":function(e,t,a){e.exports=a.p+"static/img/1402-200.4003f04c.png"},"5fe8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"xl-add-media"},[r("el-header",{staticClass:"xl-add-media--header",style:{justifyContent:e.isEdit&&e.editorPerson?"space-between":"flex-end"},attrs:{height:"auto"}},[e.isEdit&&e.editorPerson&&!e.disabled?r("div",{staticStyle:{"font-size":"14px",color:"#606266",flex:"1"}},[r("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿 ")]):e._e(),e.disabled||"script"!==this.typeDetails?e._e():r("div",[e.onlyPublish?e._e():r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleDraft}},[e._v(" 保存稿件 ")]),e.onlyPublish?e._e():r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePreview}},[e._v(" 保存并预览 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePublish}},[e._v(" 保存并发布 ")])],1)]),r("el-main",{staticStyle:{padding:"10px 0"}},[r("el-tabs",{staticClass:"xl-add-media--tab",on:{"tab-click":function(t){return e.handleTabChange("tab")}},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(t){return r("el-tab-pane",{key:t.value,attrs:{disabled:e.disabled||e.isEdit,label:t.label,name:t.value}})})),1),r("el-form",{ref:"submitForm",attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[r("el-row",{staticClass:"xl-add-media--bc",staticStyle:{"margin-bottom":"20px"}},[r("el-col",{attrs:{span:24}},[r("el-row",{staticClass:"xl-add-media--title"},[r("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.formOptions["extra.tags"].item.lists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),r("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[r("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_type"),expression:"initFrom().includes('extra.video_type')"}]},"el-form-item",e.formOptions["extra.video_type"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.video_type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.video_type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.video_type"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[r("script-select",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.use_watermarks"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)}}},"el-select",e.formOptions["extra.use_watermarks"].item.componentProps,!1),e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[r("editor",{attrs:{watermark:e.watermark,position:e.parseObj(e.formOptions["extra.use_watermarks"].item),disabled:e.disabled,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)},changeVideoList:e.changeVideoList}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[r("div",{staticClass:"xl-add-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?r("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{lazy:"",src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):r("i",{staticClass:"el-icon-video-camera-solid"})],1)]),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[r("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_address"),expression:"initFrom().includes('extra.activity_address')"}]},"el-form-item",e.formOptions["extra.activity_address"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.activity_address"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_address"].item)}}},"el-input",e.formOptions["extra.activity_address"].item.componentProps,!1))],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_start_time"),expression:"initFrom().includes('extra.activity_start_time')"}]},"el-form-item",e.formOptions["extra.activity_start_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_start_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_start_time"].item)}}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_end_time"),expression:"initFrom().includes('extra.activity_end_time')"}]},"el-form-item",e.formOptions["extra.activity_end_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_end_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_end_time"].item)}}})],1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.salary_range.min"),expression:"initFrom().includes('extra.salary_range.min')"}],attrs:{label:"薪资区间:","label-width":"100px"}},[r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.min"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,max:e.from.extra.salary_range.max||1/0,clearable:""},model:{value:e.from.extra.salary_range.min,callback:function(t){e.$set(e.from.extra.salary_range,"min",t)},expression:"from.extra.salary_range.min"}},"el-input-number",e.formOptions["extra.salary_range.min"].item.componentProps,!1))],1)],1),r("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.max"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,min:e.from.extra.salary_range.min||0,clearable:""},model:{value:e.from.extra.salary_range.max,callback:function(t){e.$set(e.from.extra.salary_range,"max",t)},expression:"from.extra.salary_range.max"}},"el-input-number",e.formOptions["extra.salary_range.max"].item.componentProps,!1))],1)],1)],1)],1)],1)],1)],1),r("el-row",{attrs:{gutter:20,type:"flex"}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-add-media--bc xl-add-media--row"},[r("el-row",{staticClass:"xl-add-media--title"},[r("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1)],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-add-media--bc xl-add-media--row"},[r("el-row",{staticClass:"xl-add-media--title"},[r("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[r("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,placeholder:e.basePlaceholder,clearable:""},model:{value:e.from.extra.view_base_num,callback:function(t){e.$set(e.from.extra,"view_base_num",t)},expression:"from.extra.view_base_num"}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled||"news"!==this.typeDetails?e._e():r("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePublish}},[e._v(" 保存 ")])],1),r("el-dialog",{attrs:{width:"1000px",top:"4vh",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[r("xl-video",{on:{choose:e.videoDialogControl}})],1),r("el-dialog",{attrs:{width:"600px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[r("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialogRules}},[r("el-form-item",{attrs:{"label-width":"120px",label:"栏目",prop:"channel_id"}},[r("el-cascader",{staticStyle:{width:"350px"},attrs:{filterable:"",options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.dialog.form.channel_id,callback:function(t){e.$set(e.dialog.form,"channel_id",t)},expression:"dialog.form.channel_id"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.dialog.show=!1}}},[e._v(" 取 消 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",loading:e.publishLoading},on:{click:e.enterDialog}},[e._v(" 确 定 ")])],1)],1)],1)},i=[],n=a("0344"),o=a("8955"),s=a("06c4"),l=a("e9ff"),u=(a("e186"),a("513c"),a("77ad"),a("fe8a"),a("15d9"),a("b4fb"),a("e35a"),a("0d7a"),a("e18c"),a("1c2e"),a("2eeb"),a("ea69"),a("9302"),a("4194"),a("31a0"),a("b130"),a("98e0"),a("96db"),a("dbb3"),a("053b"),a("b49d")),m=a("cc48"),c=a("0fea"),p=a("0d9b"),d=a("1ef3"),b=a("90ba"),f=a("d242"),h=a("156b"),_={name:"Add-media",components:{Cropper:u["a"],ImgTable:d["a"],xlVideo:f["a"],Tag:p["a"],Editor:h["a"],scriptSelect:b["a"]},props:{id:{type:[Number,String],default:null},disabledNews:{type:Boolean,default:!1},typeDetails:{type:String,default:"script"},fetchSuggestions:Function},data:function(){var e=this,t=function(t,a,r){var i=e.formOptions["extra.cover"].item.componentProps.count,n=e.from.extra.template_style;Array.isArray(a)&&0!==a.length||"240"==n?a.slice(0,i).every((function(e){return e.path}))||"240"==n?r():r(new Error("请上传".concat(i,"张封面图片"))):r(new Error("请上传封面图片"))},a=function(t,a,r){a?/(^[0-9]\d*$)/.test(a)?r():r(new Error("请输入大于零的正整数")):(e.from.extra.view_base_num=0,r())},r=function(e,t,a){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return"intro"===t||""!==e[t]}))}))?a():a(new Error("请填写完成图片信息")):a(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入稿件标题"}},rule:[{required:!0,message:"请输入稿件标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入稿件副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"},{label:"活动列表",value:"204",count:1,img:"1402-204.png"},{label:"活动大图",value:"205",count:1,img:"1402-205.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入稿件简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"已处理",value:"2"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:r,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"水印位置:",prop:"extra.use_watermarks"},component:"select",componentProps:{placeholder:"请选择水印位置(无表示不使用水印)"},lists:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"},{value:"",label:"无"}]}},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.video_type":{item:{key:"extra.video_type",props:{label:"详情样式:",prop:"extra.video_type"},component:"radio",lists:[{label:"横版",value:"1"},{label:"竖版",value:"2"}]}},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音稿件:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音稿件",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:",prop:"extra.view_base_num"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}},rule:[{required:!1,validator:a,trigger:"blur"}]},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"专题",value:"topic",relatedLabel:"专题栏目ID"},{label:"多模块专题",value:"multi_model_topic",relatedLabel:"多模块专题栏目ID"},{label:"活动",value:"activity"},{label:"视频点播列表",value:"vod_list",relatedLabel:"栏目id"},{label:"多层级",value:"m_level",relatedLabel:"栏目id"},{label:"地图",value:"map",relatedLabel:"栏目id"},{label:"无跳转",value:"none"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"},{label:"电视+点播",value:"tv_and_vod"},{label:"扫一扫",value:"scan"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},"extra.activity_address":{item:{key:"extra.activity_address",props:{label:"活动地址:",prop:"extra.activity_address"},component:"input",componentProps:{placeholder:"请输入活动地址"}},rule:[{required:!0,message:"请输入活动地址",trigger:"blur"}]},"extra.activity_start_time":{item:{key:"extra.activity_start_time",props:{label:"开始时间:",prop:"extra.activity_start_time"},component:"date"},rule:[{required:!0,message:"请选择活动开始时间",trigger:"change"}]},"extra.activity_end_time":{item:{key:"extra.activity_end_time",props:{label:"结束时间:",prop:"extra.activity_end_time"},component:"date"},rule:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},"extra.salary_range.min":{item:{key:"extra.salary_range.min",props:{prop:"extra.salary_range.min"},componentProps:{placeholder:"请输入最小薪资"}}},"extra.salary_range.max":{item:{key:"extra.salary_range.max",props:{prop:"extra.salary_range.max"},componentProps:{placeholder:"请输入最大薪资"}}}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},checkStatus:!1,from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"240",cover:[],intro:"",tags:"",keywords:"",video_type:"1",publish_timer:{publish_at:"",status:"0"},set_created_at:"",activity_address:"",activity_start_time:"",activity_end_time:"",content:"",is_original:"1",source:"",use_watermarks:"",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:void 0,praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""},salary_range:{min:void 0,max:void 0}}},videoDialog:{title:"选择视频",show:!1},dialog:{show:!1,multiple:!1,title:"发布栏目",form:{channel_id:[]}},dialogRules:{channel_id:{required:!0,message:"请选择栏目",trigger:"change"}},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},channelsList:[],editorVideoLists:[],editorPerson:"",publishLoading:!1}},computed:{actionUrl:function(){return this.imgurl},scriptsId:function(e){var t=e.$route;return t.query.id||this.id},disabled:function(e){var t=e.$route;return"news"===this.typeDetails?this.disabledNews:"1"===t.query.disabled||null!=this.id},mediaArticle:function(e){var t=e.$route;return"1"===t.query.media},onlyPublish:function(e){var t=e.$route;return t.query.channelId},isEdit:function(e){var t=e.scriptsId;return null!=t},visitedViews:function(){return this.$store.state.tagsView.visitedViews},viewBaseInterval:function(e){var t,a,r=e.$store.state.user.u_info,i=r.site.extra||{},n=Number((null===(t=i.random_view_range)||void 0===t?void 0:t.max)||0)||1/0,o=Number((null===(a=i.random_view_range)||void 0===a?void 0:a.min)||0);return{min:o,max:n}},basePlaceholder:function(e){var t=e.viewBaseInterval,a=t.max,r=t.min;return a===1/0?"请输入大于".concat(r,"的的正整数"):"请输入".concat(r,"-").concat(a,"的正整数")},watermark:function(e){var t=e.$store.state.user.u_info,a=t.site.extra||{};return a.watermark||""}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=document.getElementById("bdh"),a.innerHTML=0,e.isEdit&&!e.disabled&&(r=setInterval((function(){e.getEditorPerson()}),8e3),e.$once("hook:beforeDestroy",(function(){clearInterval(r)}))),e.getChannels(),t.next=6,e.getLabels();case 6:return t.next=8,e.getList();case 8:e.handleTabChange(),i=setInterval((function(){e.editorSelfSave()}),3e4),e.$once("hook:beforeDestroy",(function(){clearInterval(i)}));case 11:case"end":return t.stop()}}),t)})))()},methods:{parseObj:function(e){var t=e.key.split("."),a=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component&&e.componentProps.multiple?a&&a.toString().split(","):a},delLocalStorage:function(){var e=this.scriptsId||this.id;if(e){var t=JSON.parse(localStorage.getItem("editNews"));t.map((function(a,r){a.id==e&&t.splice(r,1)})),localStorage.setItem("editNews",JSON.stringify(t))}else localStorage.removeItem("addNews")},editorSelfSave:function(){var e=this;if("news"===this.from.extra.type&&(this.from.extra.title||this.from.extra.content))if(null==this.scriptsId&&null==this.id){var t={title:this.from.extra.title,content:this.from.extra.content};localStorage.setItem("addNews",JSON.stringify(t))}else{var a=[],r=this.scriptsId||this.id,i={id:this.scriptsId||this.id,title:this.from.extra.title,content:this.from.extra.content};if(localStorage.getItem("editNews")){var n=JSON.parse(localStorage.getItem("editNews")),o=n.some((function(e){return e.id==r}));o?n.map((function(t){t.id==r&&(t.title=e.from.extra.title,t.content=e.from.extra.content)})):n.push(i),localStorage.setItem("editNews",JSON.stringify(n))}else a.push(i),localStorage.setItem("editNews",JSON.stringify(a))}},userNewsLocalStorgeTips:function(e){var t=this;this.$confirm("是否使用上次本地缓存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.from.extra.title=e.title,t.from.extra.content=e.content})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleInput:function(e,t){var a=t.key.split("."),r=t.type||"string";"number"===r&&(e=parseInt(e)||""),a.reduce((function(r,i){if(i!==a[a.length-1])return r[i];r[i]="select"===t.component&&t.componentProps.multiple?e.join():e}),this.from)},handleChangeVideo:function(){this.disabled||(this.videoDialog.show=!0)},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},initFrom:function(){var e=this,t=[],a=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===a||void 0===a?void 0:a.count)||1;var r=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.set_created_at"];"news"===this.typeDetails&&r.push("extra.publish_timer.status"),"news"===this.typeDetails&&"1"===this.from.extra.publish_timer.status&&r.push("extra.publish_timer.publish_at");var i=["author_name","editor_name","extra.is_original","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&i.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(r,["extra.content","extra.custom_rec","extra.use_watermarks"],i);break;case"video":t=[].concat(r,["extra.video_extra.video_list","extra.custom_rec","extra.video_type"],i);break;case"album":t=[].concat(r,["extra.album_extra.image_list"],i);break;case"outer_link":t=[].concat(r,["extra.link.type","extra.view_base_num","extra.praise_base_num","extra.post_base_num","extra.allow_share"]);var n=this.from.extra.link.type;if("target_obj"===n)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(n))t.push("extra.link.url");else if("activity"===n)t.push("extra.activity_address","extra.activity_start_time","extra.activity_end_time");else if("none"!==n){var o=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===n}));this.formOptions["extra.link.id"].item.props.label="".concat(o.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(o.relatedLabel),t.push("extra.link.id")}break}return t},enterDialog:function(){var e=this;this.publishLoading||this.$refs.dialogForm.validate((function(t){t&&(e.publishLoading=!0,e.handleSave("保存并发布成功",(function(){e.handleReturn()})).finally((function(){e.publishLoading=!1})))}))},handleReturn:function(){var e=this.$route.fullPath,t=this.visitedViews.find((function(t){return t.fullPath===e})),a=this.$route.query,r=a.redirect,i=void 0===r?"All-media":r,n=a.channelId,o=a.father;this.$router.push({name:i,query:n?Object.assign({id:n},o?{father:o}:{}):{}}),this.$store.dispatch("tagsView/delView",t)},delEditorVideo:function(e){var t=document.createElement("div");t.innerHTML=e;var a=Array.from(t.querySelectorAll("video"));return a.length?this.editorVideoLists.filter((function(e){return a.find((function(t){return t.title===e.title&&t.cover===e.poster}))})):[]},handleSave:function(e,t){var a,r,i=this,n=this.$route.query.channelId,o=n?[n]:this.dialog.form.channel_id,l=this.initFrom(),u=this.from.extra.type,c="script"===this.typeDetails?this.scriptsId:this.id,p=this.formOptions["extra.cover"].item.componentProps.count,d=Object(s["a"])(Object(s["a"])({},l.reduce((function(e,t){return a=t.split("."),a[1]?(r=i.from[a[0]][a[1]],e[a[0]][a[1]]="cover"===a[1]?r.slice(0,p):r):e[a[0]]=i.from[a[0]],e}),{extra:{type:u}})),{},{channels:o.join()});"news"===this.typeDetails&&delete d.channels,d.extra.link&&"activity"===d.extra.link.type&&(d.extra.link.url=d.extra.activity_address),d.extra.link&&"target_obj"===d.extra.link.type&&(d.extra.link=Object(s["a"])(Object(s["a"])({},d.extra.link),{},{type:d.target_obj})),delete d.target_obj,delete d.extra.activity_address,"news"===d.extra.type&&(d.extra.video_extra={video_list:this.delEditorVideo(d.extra.content)}),this.checkStatus&&(d.status=1);var b="script"===this.typeDetails?Object(m["n"])(c,d):Object(m["k"])(c,d);return b.then((function(a){i.$message.success(e),i.dialog.show=!1,t&&t(a)}))},handleDraft:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){t?(e.handleSave("保存草稿成功!"),e.delLocalStorage()):e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handlePreview:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){t?e.handleSave("保存成功",(function(t){var a=t.data;a=void 0===a?{}:a;var r=a.id;e.delLocalStorage(),r&&e.$router.push({name:"Preview",query:{id:r,type:"scripts"}})})):e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handlePublish:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){if(t)if("script"===e.typeDetails){e.checkStatus=!0;var r=e.$route.query.channelId;if(r)return e.handleSave("保存并发布成功",(function(){e.delLocalStorage(),e.handleReturn()}));e.dialog.show=!0}else"news"===e.typeDetails&&e.handleSave("保存草稿成功!",(function(){e.delLocalStorage(),e.$emit("refresh"),e.handleClose()}));else e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(e){var t=this,a=this.initFrom();this.currentTabsFromRules=a.reduce((function(e,a){return Object(s["a"])(Object(s["a"])({},e),{},Object(o["a"])({},a,t.formOptions[a].rule))}),{}),this.$nextTick((function(){var a;"tab"===e&&Object.assign(t.from.extra,{video_extra:{video_list:[]}}),null===(a=t.$refs.submitForm)||void 0===a||a.clearValidate()}))},changeVideoList:function(e){this.editorVideoLists.push(e)},getLabels:function(){var e=this;return Object(m["H"])({page:1,pageSize:9999}).then((function(t){var a=t.data;e.formOptions["extra.tags"].item.lists=a.map((function(e){return{label:e.name,value:e.id.toString()}}))}))},getChannels:function(){var e=this;Object(c["Cb"])({with_special_channels:"topic"}).then((function(t){e.channelsList=t.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{disabled:!0})}))}))},getList:function(){var e=this,t=null;if(console.log("999999mediaArticle",this.mediaArticle),null==this.scriptsId&&null==this.id){var a=this.viewBaseInterval.max,r=this.viewBaseInterval.min;return this.from.extra.view_base_num=a&&a!=1/0?Math.floor(Math.random()*(a-r+1)+r):0,void(localStorage.getItem("addNews")&&this.userNewsLocalStorgeTips(JSON.parse(localStorage.getItem("addNews"))))}return t="script"===this.typeDetails?Object(m["M"])(this.scriptsId):Object(m["K"])(this.id),(this.fetchSuggestions?this.fetchSuggestions():t).then((function(t){var a,r,i,o,s,l,u,m=t.extra,c=(null===m||void 0===m?void 0:m.link)&&(null===m||void 0===m||null===(a=m.link)||void 0===a?void 0:a.type)||"",p="";if(e.formOptions.target_obj.item.lists.find((function(e){return e.value===c}))&&(p=c,c="target_obj"),e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:p,extra:{type:null===m||void 0===m?void 0:m.type,title:null===m||void 0===m?void 0:m.title,subtitle:null===m||void 0===m?void 0:m.subtitle,template_style:(null===m||void 0===m?void 0:m.template_style)||"240",cover:null===m||void 0===m?void 0:m.cover,intro:null===m||void 0===m?void 0:m.intro,tags:null===m||void 0===m?void 0:m.tags,keywords:m.keywords,video_type:(m.video_type||"1").toString(),publish_timer:{status:(null!==(r=null===m||void 0===m||null===(i=m.publish_timer)||void 0===i?void 0:i.status)&&void 0!==r?r:"0").toString(),publish_at:null!==(o=null===m||void 0===m||null===(s=m.publish_timer)||void 0===s?void 0:s.publish_at)&&void 0!==o?o:""},set_created_at:m.set_created_at,activity_start_time:m.activity_start_time,activity_end_time:m.activity_end_time,activity_address:m.link&&m.link.url||"",content:m.content,is_original:(m.is_original||"1").toString(),source:m.source,use_watermarks:m.use_watermarks||"",allow_comment:(m.allow_comment||"0").toString(),allow_share:(m.allow_share||"1").toString(),trans_to_audio:(m.trans_to_audio||"1").toString(),view_base_num:m.view_base_num,praise_base_num:m.praise_base_num,post_base_num:m.post_base_num,custom_rec:m.custom_rec||[],video_extra:{video_list:m.video_extra&&m.video_extra.video_list||[]},album_extra:{image_list:m.album_extra&&m.album_extra.image_list||[]},link:{type:c,id:(null===m||void 0===m?void 0:m.link)&&(null===m||void 0===m?void 0:m.link.id)||"",url:(null===m||void 0===m?void 0:m.link)&&(null===m||void 0===m?void 0:m.link.url)||""},salary_range:{min:(null===(l=m.salary_range)||void 0===l?void 0:l.min)||void 0,max:(null===(u=m.salary_range)||void 0===u?void 0:u.max)||void 0}}},e.editorVideoLists=Object(n["a"])(m.video_extra&&m.video_extra.video_list||[]),e.disabled||"script"!==e.typeDetails||(e.dialog.form.channel_id=t.news.map((function(e){return e.channel_id}))),"news"===e.from.extra.type&&localStorage.getItem("editNews")){var d=JSON.parse(localStorage.getItem("editNews")),b=e.scriptsId||e.id,f=d.find((function(e){return e.id==b}));f&&e.userNewsLocalStorgeTips(f)}}))},getEditorPerson:function(){var e=this,t=this.scriptsId;Object(m["F"])({id:t,type:"script"}).then((function(t){e.editorPerson=t.length<2?"":t.join()}))}}},v=_,x=(a("ea57"),a("cba8")),g=Object(x["a"])(v,r,i,!1,null,null,null);t["default"]=g.exports},"626c":function(e,t,a){},"641c":function(e,t,a){e.exports=a.p+"static/img/1402-220.eb6d8b9e.png"},7680:function(e,t,a){e.exports=a.p+"static/img/1402-202.12cf8660.png"},"84ea":function(e,t,a){e.exports=a.p+"static/img/1402-231.e2c5c65a.png"},9795:function(e,t,a){var r={"./1402-200.png":"5a2d","./1402-201.png":"a98c","./1402-202.png":"7680","./1402-203.png":"dc2d","./1402-204.png":"dd6a","./1402-205.png":"4e52","./1402-206.png":"fe4c","./1402-210.png":"b9f9","./1402-211.png":"a656","./1402-212.png":"e21b","./1402-220.png":"641c","./1402-221.png":"a691","./1402-222.png":"31dc","./1402-230.png":"48c5","./1402-231.png":"84ea","./1402-240.png":"1cfd"};function i(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=n,e.exports=i,i.id="9795"},"9d3e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-version-history"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"created_at",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"user.name",label:"姓名","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"operation",label:"操作记录","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v(" 查看详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getHistory}}),e.dialog.show?a("el-dialog",{attrs:{width:"1200px",top:"20px",title:e.dialog.title,visible:e.dialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("scripts-details",{staticStyle:{padding:"10px",margin:"0"},attrs:{id:e.id,visible:e.dialog.show,typeDetails:e.type,"fetch-suggestions":e.fetchSuggestions,disabled:!0,disabledNews:!0},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}})],1):e._e()],1)},i=[],n=a("06c4"),o=(a("513c"),a("e18c"),a("cc48")),s=a("1d6e"),l=a("5fe8"),u={name:"versionHistory",components:{NewDetail:s["a"],scriptsDetails:l["default"]},props:{type:{type:String,default:"script"},id:{type:Number,required:!0}},data:function(){return{tableData:[],total:0,loading:!1,queryParams:{page:1,pageSize:10},dialog:{title:"查看详情",show:!1,id:""},fetchSuggestions:function(){return new Promise((function(e){return e()}))}}},methods:{getHistory:function(){var e=this,t=this.id,a=this.type;this.loading=!0,Object(o["G"])(Object(n["a"])({item_type:a,item_id:t},this.queryParams)).then((function(t){var a=t.data,r=t.total;e.tableData=a,e.total=r})).finally((function(){e.loading=!1}))},handleWatch:function(e){var t=e.extra;this.fetchSuggestions=function(){return new Promise((function(e){e(t.item)}))},this.dialog={title:"查看详情",show:!0}}},created:function(){this.getHistory()}},m=u,c=(a("9e1d"),a("cba8")),p=Object(c["a"])(m,r,i,!1,null,"c9ac419c",null);t["a"]=p.exports},"9d5c":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"9e1d":function(e,t,a){"use strict";a("0a03")},a656:function(e,t,a){e.exports=a.p+"static/img/1402-211.f8b57eb1.png"},a691:function(e,t,a){e.exports=a.p+"static/img/1402-221.90d4e924.png"},a98c:function(e,t,a){e.exports=a.p+"static/img/1402-201.d761e3cb.png"},aa5f:function(e,t,a){"use strict";a("626c")},b60c:function(e,t,a){"use strict";a("b130"),a("90aa"),a("e18c");var r=a("f753"),i=a.n(r),n=a("b705"),o=a("a18c"),s=a("5f87"),l=a("5041"),u=i.a.create({baseURL:l["c"],timeout:5e3});u.interceptors.request.use((function(e){return sessionStorage.getItem("token")&&Object(s["d"])()&&!e.url.includes("/api/authorizations/refresh")?new Promise((function(t){i()({url:"/api/authorizations/refresh",method:"post",baseURL:"/",timeout:5e3,headers:{Authorization:sessionStorage.getItem("token")}}).then((function(a){if(console.log(a.data),200===a.status){var r=a.data,i=r.token_type+" "+r.access_token,n=(new Date).getTime();sessionStorage.setItem("token",i),sessionStorage.setItem("tokenQueryTime",n),e.headers.Authorization=i,t(e)}else sessionStorage.removeItem("token"),o["c"].push({path:"/login"})})).catch((function(){sessionStorage.removeItem("token"),o["c"].push({path:"/login"})}))})):(e.headers.Authorization=sessionStorage.getItem("token"),e)}),(function(e){return Object(n["Message"])({showClose:!0,message:e,duration:5e3,type:"error.data.error.message"}),Promise.reject(e.data.error.message)})),u.interceptors.response.use((function(e){var t=(new Date).getTime();return sessionStorage.setItem("tokenQueryTime",t),200==e.data.code||"true"===e.headers.success?e.data:(Object(n["Message"])({showClose:!0,message:e.data.msg||decodeURI(e.headers.msg),type:"error"}),e.data.data&&e.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(e.data.msg))}),(function(e){return Object(n["Message"])({showClose:!0,message:e,type:"error"}),Promise.reject(e)})),t["a"]=u},b747:function(e,t,a){var r=a("d890"),i=a("c10f").trim,n=a("fc8c"),o=r.parseInt,s=/^[+-]?0[Xx]/,l=8!==o(n+"08")||22!==o(n+"0x16");e.exports=l?function(e,t){var a=i(String(e));return o(a,t>>>0||(s.test(a)?16:10))}:o},b9f9:function(e,t,a){e.exports=a.p+"static/img/1402-210.9fc2bc1e.png"},c81d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-see-section"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"xl-see-section--tree",staticStyle:{width:"100%",overflow:"hidden"}},[a("el-tree",{ref:"tree",staticStyle:{width:"100%"},attrs:{data:e.channelsList,"node-key":"id",props:e.props,"expand-on-click-node":!1,"default-expanded-keys":e.defaultExpandedKeys},on:{"current-change":e.treeChange}})],1)]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"xl-see-section--content"},[a("div",{staticClass:"search"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"是否搜索所有栏目:",prop:"isAllChannel"}},[a("el-checkbox",{model:{value:e.queryParams.isAllChannel,callback:function(t){e.$set(e.queryParams,"isAllChannel",t)},expression:"queryParams.isAllChannel"}})],1),a("el-form-item",{attrs:{label:"新闻名称:",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),a("el-form-item",{attrs:{label:"新闻类型:",prop:"type"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择类型",clearable:""},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"新闻状态:",prop:"status"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择状态",clearable:""},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l([{value:"",label:"全部"}].concat(e.statusOptions),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"创建日期:"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleDateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v(" 新增新闻 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.tablekey,ref:"multipleTable",staticStyle:{width:"100%",overflow:"auto"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[e.isMobile?e._e():a("el-table-column",{attrs:{label:"新闻ID",align:"center",prop:"id"}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"点击量",align:"center",prop:"hits"}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"新闻封面",align:"center",prop:"id",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"80px",height:"45px"},attrs:{lazy:"",src:t.row.cover||e.useravatar,fit:"contain"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{slot:"error",src:e.useravatar,alt:""},slot:"error"})])]}}],null,!1,1035214268)}),a("el-table-column",{attrs:{label:"新闻标题",align:"center",width:"140",prop:"title","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticClass:"watch-detail-btn",attrs:{type:"text"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"新闻类型",align:"center",prop:"typeLabel"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.statusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"编辑",align:"center",prop:"author_name","show-overflow-tooltip":!0}}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"排序",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleSort(t.row)}}},[e._v(" "+e._s(t.row.sort)+" ")])]}}],null,!1,4080726915)}),e.isMobile?e._e():a("el-table-column",{attrs:{label:"发布时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:1===t.row.top?"qxzd":"zd",label:1===t.row.top?"取消置顶":"置顶"},on:{fatherMethod:function(a){return e.handlePlaced(t.row)}}}),1===t.row.status?a("Iconbutton",{attrs:{icontype:"ckxq",label:"详情"},on:{fatherMethod:function(a){return e.handleWatch(t.row)}}}):e._e(),1!==t.row.status&&"broadcast"!==t.row.type?a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.handleEdit(t.row)}}}):e._e(),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleListDelete(t.row)}}}),a("Iconbutton",{attrs:{icontype:"yl",label:"预览"},on:{fatherMethod:function(a){return e.handlePreview(t.row)}}}),a("Iconbutton",{attrs:{icontype:"ts",label:"推送"},on:{fatherMethod:function(a){return e.handlePush(t.row)}}}),a("Iconbutton",{attrs:{icontype:"czjl",label:"操作记录"},on:{fatherMethod:function(a){return e.handleHistory(t.row)}}})],1)]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)])],1),e.detailDialog.show?a("el-dialog",{attrs:{width:"1200px",title:"查看",top:"20px",visible:e.detailDialog.show},on:{"update:visible":function(t){return e.$set(e.detailDialog,"show",t)}}},[a("scripts-details",{staticStyle:{padding:"10px",margin:"0"},attrs:{typeDetails:"news",id:e.detailDialog.id,visible:e.detailDialog.show,disabledNews:e.detailDialog.disabled},on:{"update:visible":function(t){return e.$set(e.detailDialog,"show",t)},refresh:e.refresh}})],1):e._e(),a("el-dialog",{attrs:{width:"400px",title:"调整排序",visible:e.sortDialog.show},on:{"update:visible":function(t){return e.$set(e.sortDialog,"show",t)}}},[a("el-form",{ref:"sortForm",attrs:{model:e.sortDialog.form,rules:e.sortDialog.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"当前排序:",prop:"old"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{disabled:""},model:{value:e.sortDialog.form.old,callback:function(t){e.$set(e.sortDialog.form,"old",t)},expression:"sortDialog.form.old"}})],1),a("el-form-item",{attrs:{label:"目标排序:",prop:"now"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入目标排序"},on:{change:e.numberChange},model:{value:e.sortDialog.form.now,callback:function(t){e.$set(e.sortDialog.form,"now",e._n(t))},expression:"sortDialog.form.now"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.sortDialog.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterSortDialog}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{width:"500px",title:e.pushDialog.title,visible:e.pushDialog.show},on:{"update:visible":function(t){return e.$set(e.pushDialog,"show",t)}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,rules:e.dialogRules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"推送终端:",prop:"push_to.terminal"}},[a("el-select",{attrs:{placeholder:"请选择终端",clearable:""},model:{value:e.dialogForm.push_to.terminal,callback:function(t){e.$set(e.dialogForm.push_to,"terminal",t)},expression:"dialogForm.push_to.terminal"}},e._l(e.terminal,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"消息内容:",prop:"title"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入消息内容",clearable:""},model:{value:e.dialogForm.title,callback:function(t){e.$set(e.dialogForm,"title",t)},expression:"dialogForm.title"}})],1),a("el-form-item",{attrs:{label:"消息详情:",prop:"content"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入消息详情",clearable:"",type:"textarea",row:4},model:{value:e.dialogForm.content,callback:function(t){e.$set(e.dialogForm,"content",t)},expression:"dialogForm.content"}})],1),a("el-form-item",{attrs:{label:"链接到:",prop:"linked_to.id"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{disabled:""},model:{value:e.dialogForm.linked_to.title,callback:function(t){e.$set(e.dialogForm.linked_to,"title",t)},expression:"dialogForm.linked_to.title"}})],1),a("el-form-item",{attrs:{label:"推送图片:",prop:"cover"}},[a("upload-single",{model:{value:e.dialogForm.cover,callback:function(t){e.$set(e.dialogForm,"cover",t)},expression:"dialogForm.cover"}})],1),a("el-form-item",{attrs:{label:"推送时间:",prop:"push_time"}},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.switchVal,expression:"switchVal"}],staticStyle:{width:"194px","margin-right":"10px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间","picker-options":e.pickerOptions},on:{focus:e.pickerFocus},model:{value:e.dialogForm.push_time,callback:function(t){e.$set(e.dialogForm,"push_time",t)},expression:"dialogForm.push_time"}}),a("el-radio",{attrs:{label:!0},model:{value:e.switchVal,callback:function(t){e.switchVal=t},expression:"switchVal"}},[e._v("自定义时间")]),a("el-radio",{attrs:{label:!1},model:{value:e.switchVal,callback:function(t){e.switchVal=t},expression:"switchVal"}},[e._v("立即推送")])],1),a("el-form-item",{attrs:{label:"是否推送给个人:",prop:"push_to.type"}},[a("el-radio-group",{model:{value:e.dialogForm.push_to.type,callback:function(t){e.$set(e.dialogForm.push_to,"type",t)},expression:"dialogForm.push_to.type"}},[a("el-radio",{attrs:{label:"all"}},[e._v("否")]),a("el-radio",{attrs:{label:"single"}},[e._v("是")])],1)],1),"single"===e.dialogForm.push_to.type?a("el-form-item",{attrs:{label:"客户端ID:",prop:"push_to.cid"}},[a("el-input",{staticStyle:{width:"194px"},attrs:{placeholder:"请输入客户端ID",clearable:""},model:{value:e.dialogForm.push_to.cid,callback:function(t){e.$set(e.dialogForm.push_to,"cid",t)},expression:"dialogForm.push_to.cid"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:function(t){e.pushDialog.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterPushDialog}},[e._v(" 确 定 ")])],1)],1),e.history.show?a("el-dialog",{attrs:{width:"700px",title:"操作记录",visible:e.history.show},on:{"update:visible":function(t){return e.$set(e.history,"show",t)}}},[a("version-history",{attrs:{id:e.history.id,type:"news"}})],1):e._e()],1)},i=[],n=a("8955"),o=a("06c4"),s=a("e9ff"),l=(a("e186"),a("b4fb"),a("15d9"),a("2eeb"),a("31a0"),a("10b1"),a("513c"),a("1b2e"),a("08d5"),a("e18c"),a("4194"),a("08ba"),a("0fea")),u=a("48fb"),m=a("13cc"),c=a("cc48"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"xl-news-media"},[!e.disabled&&e.editorPerson?r("el-header",{staticStyle:{"background-color":"#fff","line-height":"40px"},attrs:{height:"40px"}},[r("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿 ")]):e._e(),r("el-main",{staticStyle:{padding:"10px 0"}},[r("el-tabs",{staticClass:"xl-news-media--tab",on:{"tab-click":function(t){return e.handleTabChange("tab")}},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(e){return r("el-tab-pane",{key:e.value,attrs:{disabled:"",label:e.label,name:e.value}})})),1),r("el-form",{ref:"submitForm",staticStyle:{"max-height":"600px",overflow:"auto"},attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[r("el-row",{staticClass:"xl-news-media--bc",staticStyle:{"margin-bottom":"20px"}},[r("el-col",{attrs:{span:24}},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.tagLists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[r("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),r("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[r("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[r("script-select",{attrs:{value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[r("el-select",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.use_watermarks"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)}}},"el-select",e.formOptions["extra.use_watermarks"].item.componentProps,!1),e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[e.editorInit?r("editor",{attrs:{watermark:e.watermark,position:e.parseObj(e.formOptions["extra.use_watermarks"].item),disabled:e.disabled,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)},changeVideoList:e.changeVideoList}}):e._e()],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[r("div",{staticClass:"xl-news-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?r("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{lazy:"",src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):r("i",{staticClass:"el-icon-video-camera-solid"})],1)]),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[r("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return r("el-radio",{key:t.value,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_address"),expression:"initFrom().includes('extra.activity_address')"}]},"el-form-item",e.formOptions["extra.activity_address"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.activity_address"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_address"].item)}}},"el-input",e.formOptions["extra.activity_address"].item.componentProps,!1))],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_start_time"),expression:"initFrom().includes('extra.activity_start_time')"}]},"el-form-item",e.formOptions["extra.activity_start_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_start_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_start_time"].item)}}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_end_time"),expression:"initFrom().includes('extra.activity_end_time')"}]},"el-form-item",e.formOptions["extra.activity_end_time"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_end_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_end_time"].item)}}})],1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.salary_range.min"),expression:"initFrom().includes('extra.salary_range.min')"}],attrs:{label:"薪资区间:","label-width":"100px"}},[r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.min"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,max:e.from.extra.salary_range.max||1/0,clearable:""},model:{value:e.from.extra.salary_range.min,callback:function(t){e.$set(e.from.extra.salary_range,"min",t)},expression:"from.extra.salary_range.min"}},"el-input-number",e.formOptions["extra.salary_range.min"].item.componentProps,!1))],1)],1),r("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:4}},[r("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.max"].item.props,!1),[r("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,min:e.from.extra.salary_range.min||0,clearable:""},model:{value:e.from.extra.salary_range.max,callback:function(t){e.$set(e.from.extra.salary_range,"max",t)},expression:"from.extra.salary_range.max"}},"el-input-number",e.formOptions["extra.salary_range.max"].item.componentProps,!1))],1)],1)],1)],1)],1)],1)],1),r("el-row",{attrs:{gutter:20,type:"flex"}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[r("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[r("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1)],1)]),r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[r("el-row",{staticClass:"xl-news-media--title"},[r("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[r("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[r("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,placeholder:e.basePlaceholder,clearable:""},model:{value:e.from.extra.view_base_num,callback:function(t){e.$set(e.from.extra,"view_base_num",t)},expression:"from.extra.view_base_num"}})],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),r("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[r("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled?e._e():r("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),r("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),r("el-dialog",{attrs:{width:"1000px",top:"4vh","append-to-body":"",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[r("xl-video",{on:{choose:e.videoDialogControl}})],1)],1)},d=[],b=a("0344"),f=(a("77ad"),a("fe8a"),a("e35a"),a("0d7a"),a("1c2e"),a("9302"),a("ea69"),a("b130"),a("98e0"),a("96db"),a("dbb3"),a("053b"),a("b49d")),h=a("0d9b"),_=a("1ef3"),v=a("90ba"),x=a("d242"),g=a("156b"),y={name:"NewDetail",components:{Cropper:f["a"],ImgTable:_["a"],Tag:h["a"],xlVideo:x["a"],scriptSelect:v["a"],Editor:g["a"]},props:{id:{type:[Number,String],required:!0},disabled:{type:Boolean,default:!1},fetchSuggestions:Function},data:function(){var e=this,t=function(t,a,r){var i=e.formOptions["extra.cover"].item.componentProps.count;Array.isArray(a)&&0!==a.length?a.slice(0,i).every((function(e){return e.path}))?r():r(new Error("请上传".concat(i,"张封面图片"))):r(new Error("请上传封面图片"))},a=function(e,t,a){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return""!==e[t]}))}))?a():a(new Error("请填写完成图片信息")):a(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入新闻标题"}},rule:[{required:!0,message:"请输入新闻标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入新闻副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"},{label:"活动列表",value:"204",count:1,img:"1402-204.png"},{label:"活动大图",value:"205",count:1,img:"1402-205.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入新闻简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"已处理",value:"2"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:a,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"水印位置:",prop:"extra.use_watermarks"},componentProps:{placeholder:"请选择水印位置(无表示不使用水印)"},component:"select",lists:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"},{value:"",label:"无"}]}},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音新闻:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音新闻",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"专题",value:"topic",relatedLabel:"专题栏目ID"},{label:"多模块专题",value:"multi_model_topic",relatedLabel:"多模块专题栏目ID"},{label:"活动",value:"activity"},{label:"视频点播列表",value:"vod_list",relatedLabel:"栏目id"},{label:"多层级",value:"m_level",relatedLabel:"栏目id"},{label:"无跳转",value:"none"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},"extra.activity_address":{item:{key:"extra.activity_address",props:{label:"活动地址:",prop:"extra.activity_address"},component:"input",componentProps:{placeholder:"请输入活动地址"}},rule:[{required:!0,message:"请输入活动地址",trigger:"blur"}]},"extra.activity_start_time":{item:{key:"extra.activity_start_time",props:{label:"开始时间:",prop:"extra.activity_start_time"},component:"date"},rule:[{required:!0,message:"请选择活动开始时间",trigger:"change"}]},"extra.activity_end_time":{item:{key:"extra.activity_end_time",props:{label:"结束时间:",prop:"extra.activity_end_time"},component:"date"},rule:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},"extra.salary_range.min":{item:{key:"extra.salary_range.min",props:{prop:"extra.salary_range.min"},componentProps:{placeholder:"请输入最小薪资"}}},"extra.salary_range.max":{item:{key:"extra.salary_range.max",props:{prop:"extra.salary_range.max"},componentProps:{placeholder:"请输入最大薪资"}}}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"240",cover:[],intro:"",tags:"",keywords:"",publish_timer:{publish_at:"",status:"0"},set_created_at:"",activity_address:"",activity_start_time:"",activity_end_time:"",content:"",is_original:"1",source:"",use_watermarks:"",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:void 0,praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""},salary_range:{min:void 0,max:void 0}}},videoDialog:{title:"选择视频",show:!1,radio:"",video:"",width:"",height:""},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},editorPerson:"",editorVideoLists:[],tagLists:[],editorInit:!1}},computed:{actionUrl:function(){return this.imgurl},viewBaseInterval:function(e){var t,a,r=e.$store.state.user.u_info,i=r.site.extra||{},n=Number((null===(t=i.random_view_range)||void 0===t?void 0:t.max)||0)||1/0,o=Number((null===(a=i.random_view_range)||void 0===a?void 0:a.min)||0);return{min:o,max:n}},basePlaceholder:function(e){var t=e.viewBaseInterval,a=t.max,r=t.min;return a===1/0?"请输入大于".concat(r,"的的正整数"):"请输入".concat(r,"-").concat(a,"的正整数")},watermark:function(e){var t=e.$store.state.user.u_info,a=t.site.extra||{};return a.watermark||""}},watch:{id:{handler:function(e){""!==e&&this.getData()},immediate:!0}},created:function(){var e=this;if(this.getLabels(),!this.disabled){this.getEditorPerson();var t=setInterval((function(){e.getEditorPerson()}),8e3);this.$once("hook:beforeDestroy",(function(){clearInterval(t)}))}},methods:{parseObj:function(e){var t=e.key.split("."),a=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component&&e.componentProps.multiple?a&&a.toString().split(","):a},handleInput:function(e,t){var a=t.key.split("."),r=t.type||"string";"number"===r&&(e=parseInt(e)||""),a.reduce((function(r,i){if(i!==a[a.length-1])return r[i];r[i]="select"===t.component&&t.componentProps.multiple?e.join():e}),this.from)},handleChangeVideo:function(){this.videoDialog.show=!0},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},handleUploadImageSuccess:function(e){e.status_code>=200&&e.status_code<300&&(this.$message.success("图片上传成功!"),this.videoDialog.video=e.path)},initFrom:function(){var e=this,t=[],a=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===a||void 0===a?void 0:a.count)||1;var r=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.publish_timer.status","extra.set_created_at"];"1"===this.from.extra.publish_timer.status&&r.push("extra.publish_timer.publish_at");var i=["author_name","editor_name","extra.is_original","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&i.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(r,["extra.content","extra.custom_rec","extra.use_watermarks"],i);break;case"video":t=[].concat(r,["extra.video_extra.video_list","extra.custom_rec"],i);break;case"album":t=[].concat(r,["extra.album_extra.image_list"],i);break;case"outer_link":t=[].concat(r,["extra.link.type","extra.salary_range.min","extra.salary_range.max",,"extra.view_base_num","extra.praise_base_num","extra.post_base_num"]);var n=this.from.extra.link.type;if("target_obj"===n)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(n))t.push("extra.link.url");else if("activity"===n)t.push("extra.activity_address","extra.activity_start_time","extra.activity_end_time");else if("none"!==n){var o=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===n}));this.formOptions["extra.link.id"].item.props.label="".concat(o.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(o.relatedLabel),t.push("extra.link.id")}break}return t},delEditorVideo:function(e){var t=document.createElement("div");t.innerHTML=e;var a=Array.from(t.querySelectorAll("video"));return a.length?this.editorVideoLists.filter((function(e){return a.find((function(t){return t.title===e.title&&t.cover===e.poster}))})):[]},handleSave:function(){var e=this;this.$refs.submitForm.validate((function(t,a){if(t){var r,i,n=e.initFrom(),s=e.from.extra.type,l=e.formOptions["extra.cover"].item.componentProps.count,u=Object(o["a"])({},n.reduce((function(t,a){return r=a.split("."),r[1]?(i=e.from[r[0]][r[1]],t[r[0]][r[1]]="cover"===r[1]?i.slice(0,l):i):t[r[0]]=e.from[r[0]],t}),{extra:{type:s}}));u.extra.link&&"activity"===u.extra.link.type&&(u.extra.link.url=u.extra.activity_address),u.extra.link&&"target_obj"===u.extra.link.type&&(u.extra.link=Object(o["a"])(Object(o["a"])({},u.extra.link),{},{type:u.target_obj})),delete u.target_obj,delete u.extra.activity_address,"news"===u.extra.type&&(u.extra.video_extra={video_list:e.delEditorVideo(u.extra.content)}),u.status=1,u.extra.view_base_num||0==u.extra.view_base_num||(u.extra.view_base_num=Math.floor(Math.random()*(e.viewBaseInterval.max-e.viewBaseInterval.min+1)+e.viewBaseInterval.min)),Object(c["k"])(e.id,u).then((function(t){var a=t.statu_code,r=t.message;e.handleClose(),a?e.$message.error(r):(e.$message.success("保存草稿成功!"),e.$emit("refresh"))}))}else e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())}))},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(e){var t=this,a=this.initFrom();this.currentTabsFromRules=a.reduce((function(e,a){return Object(o["a"])(Object(o["a"])({},e),{},Object(n["a"])({},a,t.formOptions[a].rule))}),{}),this.$nextTick((function(){var a;"tab"===e&&Object.assign(t.from.extra,{video_extra:{video_list:[]}}),null===(a=t.$refs.submitForm)||void 0===a||a.clearValidate()}))},changeVideoList:function(e){this.editorVideoLists.push(e)},getLabels:function(){var e=this;return Object(c["H"])({page:1,pageSize:9999}).then((function(t){var a=t.data,r=a.map((function(e){return{label:e.name,value:e.id.toString()}}));e.tagLists=r}))},getList:function(){var e=this;return(this.fetchSuggestions?this.fetchSuggestions():Object(c["K"])(this.id)).then((function(t){var a,r,i,n,o,s,l=t.extra;console.log("res 详情数据",t);var u=l.link&&l.link.type||"target_obj",m="";e.formOptions.target_obj.item.lists.find((function(e){return e.value===u}))&&(m=u,u="target_obj"),e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:m,extra:{type:l.type,title:l.title,subtitle:l.subtitle,template_style:l.template_style||"240",cover:l.cover,intro:l.intro,tags:l.tags,keywords:l.keywords,publish_timer:{status:(null!==(a=null===l||void 0===l||null===(r=l.publish_timer)||void 0===r?void 0:r.status)&&void 0!==a?a:"0").toString(),publish_at:null!==(i=null===l||void 0===l||null===(n=l.publish_timer)||void 0===n?void 0:n.publish_at)&&void 0!==i?i:""},set_created_at:l.set_created_at,activity_start_time:l.activity_start_time,activity_end_time:l.activity_end_time,activity_address:l.link&&l.link.url||"",content:l.content,is_original:(l.is_original||"1").toString(),source:l.source,use_watermarks:l.use_watermarks||"",allow_comment:(l.allow_comment||"0").toString(),allow_share:(l.allow_share||"1").toString(),trans_to_audio:(l.trans_to_audio||"1").toString(),view_base_num:l.view_base_num,praise_base_num:l.praise_base_num,post_base_num:l.post_base_num,custom_rec:l.custom_rec||[],video_extra:{video_list:l.video_extra&&l.video_extra.video_list||[]},album_extra:{image_list:l.album_extra&&l.album_extra.image_list||[]},link:{type:u,id:l.link&&l.link.id||"",url:l.link&&l.link.url||""},salary_range:{min:(null===(o=l.salary_range)||void 0===o?void 0:o.min)||void 0,max:(null===(s=l.salary_range)||void 0===s?void 0:s.max)||void 0}}},e.editorVideoLists=Object(b["a"])(l.video_extra&&l.video_extra.video_list||[]),console.log("this from",e.from)}))},getEditorPerson:function(){var e=this;Object(c["F"])({id:this.id,type:"news"}).then((function(t){e.editorPerson=t.length<2?"":t.join()}))},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id",e.id),t.next=3,e.getList();case 3:e.handleTabChange(),e.$nextTick((function(){e.editorInit=!0}));case 5:case"end":return t.stop()}}),t)})))()}}},w=y,O=(a("01d6"),a("cba8")),k=Object(O["a"])(w,p,d,!1,null,null,null),j=k.exports,F=a("5fe8"),S=a("9d3e"),I=a("469d"),P=a("e60d"),N=a("e7e2"),C=a.n(N),D={name:"SeeSection",components:{NewDetail:j,scriptsDetails:F["default"],VersionHistory:S["a"],uploadSingle:P["a"]},data:function(){var e=function(){var e=new Date((new Date).getTime()+1e3),t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return"".concat(t,":").concat(a,":").concat(r," - 23:59:59")};return{tablekey:!1,channelsList:[],typeOptions:[{label:"全部",value:""},{label:"新闻",value:"news"},{label:"图集",value:"album"},{label:"视频",value:"video"},{label:"外链",value:"outer_link"},{label:"直播间",value:"broadcast"},{label:"专题",value:"topic"},{label:"服务",value:"service"},{label:"电视直播",value:"tv_live"},{label:"电视点播",value:"tv_replay"},{label:"广播直播",value:"radio_live"},{label:"广播点播",value:"radio_replay"}],statusOptions:[{label:"已上线",value:1},{label:"待审核",value:0},{label:"已下线",value:2},{label:"待定时发布",value:5}],props:Object.freeze({label:"name"}),queryParams:{status:"",keyword:"",type:"",startdate:"",enddate:"",isAllChannel:!1,pageSize:10,page:1},switchVal:!1,pickerOptions:{selectableRange:e(),disabledDate:function(e){return e.getTime()<(new Date).getTime()-864e5}},useravatar:a("3f1e"),dateValue:"",tableData:[],currentKey:"",defaultExpandedKeys:[],total:0,loading:!1,detailDialog:{show:!1,id:"",disabled:!1},sortDialog:{show:!1,id:"",form:{old:"",now:""},rules:{now:[{required:!0,message:"请输入目标排序",trigger:"blur"}]}},pushDialog:{show:!1,title:"新增推送"},terminal:[{label:"全部",value:3},{label:"ios",value:2},{label:"安卓",value:1}],dialogForm:{title:"",content:"",cover:"",linked_to:{route_type:"news",type:"",id:"",title:""},push_to:{type:"all",terminal:"",cid:""},push_time:""},dialogRules:{title:[{required:!0,message:"请输入消息内容",trigger:"blur"}],content:[{required:!0,message:"请输入消息详情",trigger:"blur"}],push_time:[{required:!0,message:"请选择推送时间",trigger:"change"}],"push_to.cid":[{required:!0,message:"请输入客户端ID",trigger:"blur"}],"linked_to.id":[{required:!0,message:"请选择链接到的内容",trigger:"change"}],"push_to.terminal":[{required:!0,message:"请选择推送终端",trigger:"change"}]},product_id:"",history:{show:!1,id:""}}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getChannels();case 2:e.$nextTick((function(){var t,a,r=e.$route.query.id||(null===(t=e.channelsList[0])||void 0===t?void 0:t.id);e.defaultExpandedKeys=[r],e.$refs.tree.setCurrentKey(r),e.product_id=(null===(a=e.$refs.tree.getCurrentNode())||void 0===a?void 0:a.product_id)||"",e.getList()}));case 3:case"end":return t.stop()}}),t)})))()},watch:{total:function(){this.total==(this.queryParams.page-1)*this.queryParams.pageSize&&0!=this.total&&(this.queryParams.page-=1,this.getList())}},computed:{customerId:function(){return this.$store.state.user.u_info.site.extra.bigdata_settings.customer_id||"1"},product_id_dsj:function(){return this.$store.state.user.u_info.site.extra.bigdata_settings.product_id||"1"},multiplying_factor:function(){return this.$store.state.user.u_info.site.extra.multiplying_factor||1}},methods:{handleAdd:function(){var e=this.$route.query.id;this.$router.push({name:"Add-media",query:{redirect:"SeeSection",channelId:e}})},switchChange:function(){var e=this;this.$nextTick((function(){var t;null===(t=e.$refs.dialogForm)||void 0===t||t.clearValidate("push_time")}))},pickerFocus:function(){this.pickerOptions.selectableRange=this.updateSelectableRange()},filterNode:function(e){var t=this,a=[];return e.map((function(e){var r=e.children,i=void 0===r?[]:r;1===e.status&&a.push(Object(o["a"])(Object(o["a"])({},e),{},{children:t.filterNode(i)}))})),a},getChannels:function(){var e=this;return Object(l["Cb"])().then((function(t){e.channelsList=t,e.changeChannelName(e.channelsList)}))},handleDateChange:function(e){var t=e||["",""];this.queryParams.startdate=t[0],this.queryParams.enddate=t[1]},handleReset:function(){this.dateValue="",Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.queryParams.page=1,this.getList()},handlePush:function(e){var t=this,a=e.type,r=e.id,i=e.title,n=e.link,s=e.cover;this.resetForm("dialogForm"),this.switchVal=!1,Object.assign(this.dialogForm,{cover:s,title:i,content:"",linked_to:Object(o["a"])({route_type:"news",type:a,id:r,title:i},n?{link:n}:{})}),Object(c["K"])(e.id).then((function(e){console.log(e),t.dialogForm.content=e.extra.intro,t.pushDialog.show=!0}))},enterPushDialog:function(){var e,t=this;this.switchVal||(this.dialogForm.push_time=Object(I["a"])(new Date,"yyyy-MM-dd hh:mm:ss")),null===(e=this.$refs.dialogForm)||void 0===e||e.validate((function(e){if(e){var a=t.product_id,r=t.dialogForm,i=r.push_to.cid,n={product_id:a,extra:Object(o["a"])(Object(o["a"])({},r),{},{push_to:Object(o["a"])(Object(o["a"])({},r.push_to),{},{cid:i?[i]:[]})})};Object(m["d"])(n).then((function(e){t.$message.success(e.message),t.pushDialog.show=!1}))}}))},numberChange:function(e){e=Number.parseInt(e),this.sortDialog.form.now=Number.isNaN(e)?"":e},handleSort:function(e){var t=e.id,a=e.sort;Object.assign(this.sortDialog,{show:!0,id:t,form:{old:a,now:""}})},enterSortDialog:function(){var e,t=this;null===(e=this.$refs.sortForm)||void 0===e||e.validate((function(e){if(e){var a=t.sortDialog,r=a.id,i=a.form;Object(c["l"])(Object(n["a"])({},r,i.now)).then((function(){t.$message.success("修改成功"),t.sortDialog.show=!1,t.getList()}))}}))},handlePlaced:function(e){var t=this,a=e.top,r=e.id;Object(c["U"])({ids:r,top:1===a?0:1}).then((function(){t.$message.success(1===a?"取消置顶":"置顶"),t.getList()}))},handlePreview:function(e){var t=e.id;this.$router.push({name:"Preview",query:{id:t,type:"news"}})},handleHistory:function(e){var t=e.id;this.history={show:!0,id:t}},handleWatch:function(e){console.log(e);var t=e.id,a=e.type,r=e.script_id;"broadcast"===a?this.$router.push({name:"StudioList",query:{title:r}}):this.detailDialog={id:t,show:!0,disabled:!0}},handleEdit:function(e){var t=e.id;this.detailDialog={id:t,show:!0,disabled:!1}},statusChange:function(e){var t=this,a=e.id,r=e.status;Object(c["m"])({ids:a,status:r}).then((function(){t.$message.success("修改状态成功"),t.getList()})).catch((function(){t.getList()}))},handleListDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["w"])(a).then((function(){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},treeChange:function(e){this.product_id=e.product_id,this.handleReset(),this.getList()},getList:function(){var e=this,t=this.$refs.tree.getCurrentNode(),a=this.queryParams.isAllChannel;this.$router.push({path:this.$route.path,query:{id:t.id}}),this.loading=!0;var r=Object(o["a"])(Object(o["a"])({},this.queryParams),{},{channel_id:a?"":t.id});delete r.isAllChannel,Object(c["L"])(this.removePropertyOfNullFor0(r)).then((function(t){e.total=t.total,e.tableData=(t.data||[]).map((function(t){var a=e.typeOptions.find((function(e){return t.type===e.value})),r=t.cover[0];return Object(o["a"])(Object(o["a"])({},t),{},{typeLabel:a&&a.label||"",cover:r&&r.path||""})}));var a=(e.tableData||[]).map((function(e){return e.id})),r={customer_id:e.customerId,product_id:e.product_id_dsj,itemIds:a};0!=a.length&&Object(u["b"])(r).then((function(t){var a=t.data;e.tableData.forEach((function(t,r,i){a.forEach((function(a,i,n){t.id==a.item_id&&(e.tableData[r].hits=parseInt(a.hits)*parseInt(e.multiplying_factor)+parseInt(e.tableData[r].view_base_num)||0)}))})),e.tablekey=!e.tablekey})),!e.isMobile&&e.initSort()})).finally((function(){e.loading=!1}))},initSort:function(){var e=this,t=this.$refs.multipleTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];C.a.create(t,{ghostClass:"sortable-ghost",onEnd:function(t){var a=t.newIndex,r=t.oldIndex,i=e.tableData[r].id,o=e.tableData[a].sort;e.tableData=[],Object(c["l"])(Object(n["a"])({},i,o)).then((function(){e.$message.success("修改成功"),e.getList()}))}})},refresh:function(){this.getList(),this.detailDialog.id=""}}},q=D,L=(a("503e"),Object(O["a"])(q,r,i,!1,null,null,null));t["default"]=L.exports},d1c4:function(e,t,a){},d6f4:function(e,t,a){},dc2d:function(e,t,a){e.exports=a.p+"static/img/1402-203.c56ffd4a.png"},dd6a:function(e,t,a){e.exports=a.p+"static/img/1402-204.4307cd3c.png"},de68:function(e,t,a){var r=a("1c8b"),i=a("9d5c");r({target:"Object",stat:!0},{is:i})},e21b:function(e,t,a){e.exports=a.p+"static/img/1402-212.af2ef322.png"},ea57:function(e,t,a){"use strict";a("0530")},fe4c:function(e,t,a){e.exports=a.p+"static/img/1402-206.7d6de951.png"}}]);