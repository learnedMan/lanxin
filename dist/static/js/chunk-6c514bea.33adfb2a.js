(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c514bea"],{"0385":function(t,e,a){"use strict";a("b130"),a("90aa"),a("e18c");var i=a("f753"),r=a.n(i),n=a("b705"),o=a("a18c"),s=a("5f87"),l=a("5041"),c=r.a.create({baseURL:l["d"],timeout:5e3});c.interceptors.request.use((function(t){return sessionStorage.getItem("token")&&Object(s["d"])()&&!t.url.includes("/api/authorizations/refresh")?new Promise((function(e){r()({url:"/api/authorizations/refresh",method:"post",baseURL:"/",timeout:5e3,headers:{Authorization:sessionStorage.getItem("token")}}).then((function(a){if(console.log(a.data),200===a.status){var i=a.data,r=i.token_type+" "+i.access_token,n=(new Date).getTime();sessionStorage.setItem("token",r),sessionStorage.setItem("tokenQueryTime",n),t.headers.Authorization=r,e(t)}else sessionStorage.removeItem("token"),o["c"].push({path:"/login"})})).catch((function(){sessionStorage.removeItem("token"),o["c"].push({path:"/login"})}))})):(t.headers.Authorization=sessionStorage.getItem("token"),t)}),(function(t){return Object(n["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),c.interceptors.response.use((function(t){var e=(new Date).getTime();return sessionStorage.setItem("tokenQueryTime",e),200==t.data.code||"true"===t.headers.success?t.data:(Object(n["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(n["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)})),e["a"]=c},"0fea":function(t,e,a){"use strict";a.d(e,"xb",(function(){return o})),a.d(e,"o",(function(){return s})),a.d(e,"nb",(function(){return l})),a.d(e,"W",(function(){return c})),a.d(e,"S",(function(){return u})),a.d(e,"Lb",(function(){return d})),a.d(e,"s",(function(){return p})),a.d(e,"sb",(function(){return m})),a.d(e,"cb",(function(){return f})),a.d(e,"T",(function(){return h})),a.d(e,"jc",(function(){return g})),a.d(e,"y",(function(){return b})),a.d(e,"Vb",(function(){return v})),a.d(e,"Ab",(function(){return y})),a.d(e,"x",(function(){return w})),a.d(e,"vb",(function(){return _})),a.d(e,"G",(function(){return x})),a.d(e,"eb",(function(){return k})),a.d(e,"U",(function(){return L})),a.d(e,"oc",(function(){return O})),a.d(e,"z",(function(){return S})),a.d(e,"pc",(function(){return $})),a.d(e,"A",(function(){return j})),a.d(e,"kc",(function(){return P})),a.d(e,"t",(function(){return T})),a.d(e,"tb",(function(){return F})),a.d(e,"rc",(function(){return q})),a.d(e,"lc",(function(){return V})),a.d(e,"fc",(function(){return I})),a.d(e,"q",(function(){return N})),a.d(e,"pb",(function(){return D})),a.d(e,"Y",(function(){return A})),a.d(e,"Sb",(function(){return C})),a.d(e,"Qb",(function(){return M})),a.d(e,"h",(function(){return z})),a.d(e,"jb",(function(){return U})),a.d(e,"J",(function(){return E})),a.d(e,"gc",(function(){return B})),a.d(e,"p",(function(){return H})),a.d(e,"ob",(function(){return J})),a.d(e,"X",(function(){return R})),a.d(e,"m",(function(){return K})),a.d(e,"M",(function(){return Q})),a.d(e,"wc",(function(){return Z})),a.d(e,"cc",(function(){return G})),a.d(e,"lb",(function(){return Y})),a.d(e,"hc",(function(){return W})),a.d(e,"vc",(function(){return X})),a.d(e,"dc",(function(){return tt})),a.d(e,"n",(function(){return et})),a.d(e,"mb",(function(){return at})),a.d(e,"V",(function(){return it})),a.d(e,"ic",(function(){return rt})),a.d(e,"r",(function(){return nt})),a.d(e,"rb",(function(){return ot})),a.d(e,"bb",(function(){return st})),a.d(e,"ec",(function(){return lt})),a.d(e,"Yb",(function(){return ct})),a.d(e,"j",(function(){return ut})),a.d(e,"kb",(function(){return dt})),a.d(e,"mc",(function(){return pt})),a.d(e,"u",(function(){return mt})),a.d(e,"db",(function(){return ft})),a.d(e,"ub",(function(){return ht})),a.d(e,"nc",(function(){return gt})),a.d(e,"v",(function(){return bt})),a.d(e,"qb",(function(){return vt})),a.d(e,"Z",(function(){return yt})),a.d(e,"qc",(function(){return wt})),a.d(e,"w",(function(){return _t})),a.d(e,"Bb",(function(){return xt})),a.d(e,"fb",(function(){return kt})),a.d(e,"L",(function(){return Lt})),a.d(e,"Kb",(function(){return Ot})),a.d(e,"ab",(function(){return St})),a.d(e,"bc",(function(){return $t})),a.d(e,"ac",(function(){return jt})),a.d(e,"l",(function(){return Pt})),a.d(e,"C",(function(){return Tt})),a.d(e,"xc",(function(){return Ft})),a.d(e,"Xb",(function(){return qt})),a.d(e,"Wb",(function(){return Vt})),a.d(e,"gb",(function(){return It})),a.d(e,"Hb",(function(){return Nt})),a.d(e,"Gb",(function(){return Dt})),a.d(e,"Ib",(function(){return At})),a.d(e,"Fb",(function(){return Ct})),a.d(e,"Ob",(function(){return Mt})),a.d(e,"Nb",(function(){return zt})),a.d(e,"f",(function(){return Ut})),a.d(e,"F",(function(){return Et})),a.d(e,"R",(function(){return Bt})),a.d(e,"zb",(function(){return Ht})),a.d(e,"B",(function(){return Jt})),a.d(e,"Mb",(function(){return Rt})),a.d(e,"e",(function(){return Kt})),a.d(e,"ib",(function(){return Qt})),a.d(e,"Q",(function(){return Zt})),a.d(e,"Ub",(function(){return Gt})),a.d(e,"wb",(function(){return Yt})),a.d(e,"i",(function(){return Wt})),a.d(e,"Rb",(function(){return Xt})),a.d(e,"Cb",(function(){return te})),a.d(e,"a",(function(){return ee})),a.d(e,"Db",(function(){return ae})),a.d(e,"E",(function(){return ie})),a.d(e,"N",(function(){return re})),a.d(e,"yb",(function(){return ne})),a.d(e,"D",(function(){return oe})),a.d(e,"Tb",(function(){return se})),a.d(e,"b",(function(){return le})),a.d(e,"uc",(function(){return ce})),a.d(e,"O",(function(){return ue})),a.d(e,"Eb",(function(){return de})),a.d(e,"c",(function(){return pe})),a.d(e,"tc",(function(){return me})),a.d(e,"P",(function(){return fe})),a.d(e,"Zb",(function(){return he})),a.d(e,"Pb",(function(){return ge})),a.d(e,"g",(function(){return be})),a.d(e,"I",(function(){return ve})),a.d(e,"k",(function(){return ye})),a.d(e,"K",(function(){return we})),a.d(e,"Jb",(function(){return _e})),a.d(e,"H",(function(){return xe})),a.d(e,"sc",(function(){return ke})),a.d(e,"d",(function(){return Le})),a.d(e,"hb",(function(){return Oe}));a("b4fb");var i=a("b775"),r=a("b60c"),n=a("0385");a("2ab73");function o(){return Object(i["a"])({url:"/api/permissions/getAllPermissions",method:"get"})}function s(t){return Object(i["a"])({url:"/api/permissions",method:"post",params:t})}function l(t,e){return Object(i["a"])({url:"/api/permissions/"+t,method:"patch",params:e})}function c(t){return Object(i["a"])({url:"/api/permissions/"+t,method:"delete"})}function u(t){return Object(i["a"])({url:"/api/permissions/deletePermissions",method:"post",params:{ids:t}})}function d(t){return Object(i["a"])({url:"/api/system/data",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/api/roles",method:"post",params:t})}function m(t,e){return Object(i["a"])({url:"/api/roles/"+t,method:"patch",params:e})}function f(t){return Object(i["a"])({url:"/api/roles/"+t,method:"delete"})}function h(t){return Object(i["a"])({url:"/api/roles/deleteRoles",method:"post",params:{ids:t}})}function g(t){return Object(i["a"])({url:"/api/roles/"+t+"/permission",method:"get"})}function b(t,e){return Object(i["a"])({url:"/api/roles/"+t+"/assignPermission",method:"post",params:{permissions:e}})}function v(t){return Object(i["a"])({url:"/api/system/data",method:"get",params:t})}function y(t){return Object(i["a"])({url:"/api/channels",method:"get",params:t})}function w(t){return Object(i["a"])({url:"/api/users",method:"post",data:t})}function _(t,e){return Object(i["a"])({url:"/api/user/"+t,method:"patch",data:e})}function x(t,e){return Object(i["a"])({url:"/api/users/setStatus",method:"post",params:{ids:t,status:e}})}function k(t){return Object(i["a"])({url:"/api/user/"+t,method:"delete"})}function L(t){return Object(i["a"])({url:"/api/user/deleteUsers",method:"post",params:{ids:t}})}function O(t){return Object(i["a"])({url:"/api/user/"+t+"/permission",method:"get"})}function S(t,e){return Object(i["a"])({url:"/api/user/"+t+"/assignPermission",method:"post",params:{permissions:e}})}function $(t){return Object(i["a"])({url:"/api/user/"+t+"/roles",method:"get"})}function j(t,e){return Object(i["a"])({url:"/api/user/"+t+"/assignRole",method:"post",params:{roles:e}})}function P(t){return Object(i["a"])({url:"/api/sites",method:"get",params:t})}function T(t){return Object(i["a"])({url:"/api/sites",method:"post",data:t})}function F(t,e){return Object(i["a"])({url:"/api/sites/"+t,method:"patch",data:e})}function q(){return Object(i["a"])({url:"/api/zones",method:"get"})}function V(t){return Object(i["a"])({url:"/api/sites/"+t,method:"get"})}function I(t){return Object(i["a"])({url:"/api/products",method:"get",params:t})}function N(t){return Object(i["a"])({url:"/api/products",method:"post",data:t})}function D(t,e){return Object(i["a"])({url:"/api/products/"+t,method:"patch",data:e})}function A(t){return Object(i["a"])({url:"/api/products/"+t,method:"delete"})}function C(t){return Object(i["a"])({url:"/api/sync_settings",method:"get",params:t})}function M(){return Object(i["a"])({url:"/api/sync_settings/info",method:"get"})}function z(t){return Object(i["a"])({url:"/api/sync_settings",method:"post",data:t})}function U(t,e){return Object(i["a"])({url:"/api/sync_settings/"+t,method:"patch",data:e})}function E(t){return Object(i["a"])({url:"/api/sync_settings/"+t,method:"delete"})}function B(t){return Object(i["a"])({url:"/api/product_versions",method:"get",params:t})}function H(t){return Object(i["a"])({url:"/api/product_versions",method:"post",data:t})}function J(t,e){return Object(i["a"])({url:"/api/product_versions/"+t,method:"patch",data:e})}function R(t){return Object(i["a"])({url:"/api/product_versions/"+t,method:"delete"})}function K(t){return Object(i["a"])({url:"/api/channels",method:"post",data:t})}function Q(t){return Object(i["a"])({url:"/api/channels/"+t,method:"delete"})}function Z(t){return Object(i["a"])({url:"/api/channels/setSort",method:"post",data:t})}function G(t){return Object(i["a"])({url:"/api/channels/"+t,method:"get"})}function Y(t,e){return Object(i["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function W(t){return Object(i["a"])({url:"/api/news/recycleBin",method:"get",params:t})}function X(t){return Object(i["a"])({url:"/api/news/restore",method:"post",params:{ids:t}})}function tt(t){return Object(i["a"])({url:"/api/categories",method:"get",params:t})}function et(t){return Object(i["a"])({url:"/api/categories",method:"post",data:t})}function at(t,e){return Object(i["a"])({url:"/api/categories/"+t,method:"patch",data:e})}function it(t){return Object(i["a"])({url:"/api/categories/"+t,method:"delete"})}function rt(t){return Object(i["a"])({url:"/api/resources",method:"get",params:t})}function nt(t){return Object(i["a"])({url:"/api/resources",method:"post",data:t})}function ot(t,e){return Object(i["a"])({url:"/api/resources/"+t,method:"post",data:e})}function st(t){return Object(i["a"])({url:"/api/resources/"+t,method:"delete"})}function lt(t){return Object(i["a"])({url:"/api/resources/myResources",method:"get",params:t})}function ct(t){return Object(i["a"])({url:"/api/cloud_vms_channels",method:"get",params:t})}function ut(t){return Object(i["a"])({url:"/api/cloud_vms_channels",method:"post",data:t})}function dt(t,e){return Object(i["a"])({url:"/api/cloud_vms_channels/"+t,method:"patch",data:e})}function pt(t){return Object(i["a"])({url:"/api/channels/getSpecialChannels",method:"get",params:t})}function mt(t){return Object(i["a"])({url:"/api/channels",method:"post",data:t})}function ft(t){return Object(i["a"])({url:"/api/channels/"+t,method:"delete"})}function ht(t,e){return Object(i["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function gt(t){return Object(i["a"])({url:"/api/programs",method:"get",params:t})}function bt(t){return Object(i["a"])({url:"/api/programs",method:"post",data:t})}function vt(t,e){return Object(i["a"])({url:"/api/programs/"+t,method:"patch",data:e})}function yt(t){return Object(i["a"])({url:"/api/programs/"+t,method:"delete"})}function wt(t){return Object(i["a"])({url:"/api/videos/vms_channels/?cloud=".concat(t),method:"get"})}function _t(t){return Object(i["a"])({url:"/api/channels",method:"post",data:t})}function xt(t){return Object(i["a"])({url:"/api/channels/".concat(t,"/getChild"),method:"get"})}function kt(t,e){return Object(i["a"])({url:"/api/channels/"+t,method:"patch",data:e})}function Lt(t){return Object(i["a"])({url:"/api/channels/"+t,method:"delete"})}function Ot(t){return Object(i["a"])({url:"/api/replays/getReplaysByChannel",method:"get",params:t})}function St(t){return Object(i["a"])({url:"/api/replays/"+t,method:"delete"})}function $t(t){return Object(i["a"])({url:"/api/broadcasts/".concat(t),method:"get"})}function jt(t,e){return Object(i["a"])({url:"/api/broadcastStatement?broadcast_id=".concat(t,"&stream_id=").concat(e),method:"get"})}function Pt(t){return Object(i["a"])({url:"/api/broadcastStatement",method:"post",data:t})}function Tt(){return Object(r["a"])({url:"/catalog/list",method:"get"})}function Ft(t){return Object(r["a"])({url:"/style/catalogCodeStyle",method:"post",data:t})}function qt(t){return Object(r["a"])({url:"/internal/uc/queryUserList",method:"post",data:t})}function Vt(t){return Object(r["a"])({url:"/internal/uc/queryUserInfo",method:"get",params:t})}function It(t){return Object(r["a"])({url:"/internal/uc/updateUserInfo",method:"post",data:t})}function Nt(t){return Object(r["a"])({url:"/internal/uc/queryInvitationcodeList",method:"post",data:t})}function Dt(t){return Object(n["a"])({url:"/intranet/uc/queryInvitationCountDatas",method:"post",data:t})}function At(t){return Object(r["a"])({url:"/internal/uc/queryLoginLogList",method:"post",data:t})}function Ct(t){return Object(r["a"])({url:"/internal/points/queryPointsLog",method:"post",data:t})}function Mt(t){return Object(r["a"])({url:"/internal/uc/qeurySrcretList",method:"post",data:t})}function zt(t){return Object(r["a"])({url:"/internal/uc/querySrcretSet",method:"post",data:t})}function Ut(t){return Object(r["a"])({url:"/internal/uc/addSrcretSet",method:"post",data:t})}function Et(t){return Object(r["a"])({url:"/internal/uc/updateSrcretSet",method:"post",data:t})}function Bt(t){return Object(r["a"])({url:"/internal/uc/deleteSrcretSet",method:"post",data:t})}function Ht(t){return Object(n["a"])({url:"/new/intranet/comment/getNoTalkUserList/page",method:"post",data:t})}function Jt(t){return Object(n["a"])({url:"/new/intranet/comment/cancelNoTalkUser",method:"post",data:t})}function Rt(t){return Object(r["a"])({url:"/internal/points/getRuleList",method:"post",data:t})}function Kt(t){return Object(r["a"])({url:"/internal/points/ruleSave",method:"post",data:t})}function Qt(t){return Object(r["a"])({url:"/internal/points/ruleUpdate",method:"post",data:t})}function Zt(t){return Object(r["a"])({url:"/internal/points/ruleDelete",method:"post",data:t})}function Gt(){return Object(r["a"])({url:"/internal/points/rule/typelist",method:"get"})}function Yt(){return Object(r["a"])({url:"/internal/points/rule/actionlist",method:"get"})}function Wt(t){return Object(n["a"])({url:"/v1/internal/points/pointLoginCreate",method:"post",data:t})}function Xt(t){return Object(n["a"])({url:"/v1/internal/points/pointLoginList",method:"post",data:t})}function te(t){return Object(i["a"])({url:"/api/departments",method:"get",params:t})}function ee(t){return Object(i["a"])({url:"/api/departments",method:"post",data:t})}function ae(t){return Object(i["a"])({url:"/api/departments/"+t,method:"get"})}function ie(t,e){return Object(i["a"])({url:"/api/departments/".concat(t),method:"patch",data:e})}function re(t){return Object(i["a"])({url:"/api/departments/".concat(t),method:"delete"})}function ne(t){return Object(i["a"])({url:"/api/products/".concat(t),method:"get"})}function oe(t,e){return Object(i["a"])({url:"/api/products/".concat(t),method:"patch",data:e})}function se(){return Object(i["a"])({url:"/api/upload/getH5Dir",method:"get"})}function le(t){return Object(i["a"])({url:"/api/upload/mkdir",method:"post",data:t})}function ce(t){return Object(i["a"])({url:"/api/upload/mkdir",method:"post",data:t})}function ue(t){return Object(i["a"])({url:"/api/upload/rmdir",method:"post",data:t})}function de(t){return Object(i["a"])({url:"/api/h5",method:"get",params:t})}function pe(t){return Object(i["a"])({url:"/api/h5",method:"post",data:t})}function me(t,e){return Object(i["a"])({url:"/api/h5/".concat(t),method:"post",data:e})}function fe(t){return Object(i["a"])({url:"/api/h5/".concat(t),method:"delete"})}function he(t){return Object(n["a"])({url:"/sensitive/whitetxt/list",method:"get",params:t})}function ge(t){return Object(n["a"])({url:"/sensitive/setting/list",method:"get",params:t})}function be(t){return Object(n["a"])({url:"/sensitive/setting/add",method:"post",data:t})}function ve(t){return Object(n["a"])({url:"/sensitive/setting/del",method:"DELETE",data:t})}function ye(t){return Object(n["a"])({url:"/sensitive/whitetxt/add",method:"post",data:t})}function we(t){return Object(n["a"])({url:"/sensitive/whitetxt/del",method:"DELETE",data:t})}function _e(t){return Object(r["a"])({url:"/publish/list",method:"post",data:t})}function xe(t){return Object(r["a"])({url:"/publish/delete?id=".concat(t),method:"post"})}function ke(t){return Object(r["a"])({url:"/meal/openList",method:"post",data:t})}function Le(t){return Object(r["a"])({url:"/publish/setPublish",method:"post",data:t})}function Oe(t){return Object(r["a"])({url:"/publish/update",method:"post",data:t})}},"10a6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"radioTV",staticStyle:{padding:"30px"}},[a("el-form",[a("el-form-item",{attrs:{label:"所属产品："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"电视频道",name:"page_a"}},[a("pagea",{attrs:{productId:t.product_id,productList:t.productList}})],1),a("el-tab-pane",{attrs:{label:"电视直播",name:"page_b"}},[a("pageb",{ref:"page_b",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"电视点播",name:"page_c"}},[a("pagec",{ref:"page_c",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"广播频道",name:"page_d"}},[a("paged",{attrs:{productId:t.product_id,productList:t.productList}})],1),a("el-tab-pane",{attrs:{label:"广播直播",name:"page_e"}},[a("pagee",{ref:"page_e",attrs:{productId:t.product_id}})],1),a("el-tab-pane",{attrs:{label:"广播点播",name:"page_f"}},[a("pagef",{ref:"page_f",attrs:{productId:t.product_id}})],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_a"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"频道logo",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{src:t.row.extra.logo}})]}}])}),a("el-table-column",{attrs:{label:"频道名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"频道状态",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"模板状态",align:"center",prop:"extra.template.type||'未启用'","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formattemplate")(e.row.extra.template)))])]}}])}),a("el-table-column",{attrs:{label:"节目模板",align:"center",prop:"en_name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.program(e.row)}}},[t._v("模板管理")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{width:"700px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"频道名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入频道名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重",prop:"sort"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入权重(排序)"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"所属产品",prop:"product_id"}},[a("el-select",{attrs:{disabled:"edit"==t.dialogType,placeholder:"请选择"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"频道LOGO：",prop:"extra.logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.extra.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"适用于",prop:"forway"}},[a("el-checkbox-group",{on:{change:function(e){return t.$forceUpdate()}},model:{value:t.form.forway,callback:function(e){t.$set(t.form,"forway",e)},expression:"form.forway"}},[a("el-checkbox",{attrs:{label:"直播"}}),a("el-checkbox",{attrs:{label:"点播"}})],1)],1),t.form.forway.indexOf("直播")>-1?a("el-form-item",{attrs:{"label-width":"120px",label:"流地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[0].url,callback:function(e){t.$set(t.form.extra.stream_urls[0],"url",e)},expression:"form.extra.stream_urls[0].url"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[1].url,callback:function(e){t.$set(t.form.extra.stream_urls[1],"url",e)},expression:"form.extra.stream_urls[1].url"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[2].url,callback:function(e){t.$set(t.form.extra.stream_urls[2],"url",e)},expression:"form.extra.stream_urls[2].url"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"简介",prop:"extra.intro"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{autosize:{minRows:4},type:"textarea",autocomplete:"off",placeholder:"请输入简介"},model:{value:t.form.extra.intro,callback:function(e){t.$set(t.form.extra,"intro",e)},expression:"form.extra.intro"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1),a("Pagedialog",{ref:"Pagedialog"})],1)},o=[],s=a("8955"),l=(a("513c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_a_dialog"},[t.dialogFormVisible?a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.importLoading,expression:"importLoading"}],attrs:{width:"1200px","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.dialogFormVisible,"element-loading-text":"模板导入中..."},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v("编辑节目单模板")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.downProgramme}},[t._v("下载节目单模板")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:"excel",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-exce",action:t.actionUrl,data:t.actionData,headers:t.uploadHeader,"on-success":t.handleAvatarSuccess,"on-error":t.handleAvatarError,"before-upload":t.beforeAvatarUpload,"show-file-list":!1}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"small",type:"primary"}},[t._v("导入模板")])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1),a("span",[t._v("直播节日模板：")]),a("el-radio-group",{on:{change:t.chooseradio},model:{value:t.data.extra.template.type,callback:function(e){t.$set(t.data.extra.template,"type",e)},expression:"data.extra.template.type"}},[a("el-radio",{attrs:{label:"daily"}},[t._v("每日重复(创建单日节目单模板，每日重复)")]),a("el-radio",{attrs:{label:"weekly"}},[t._v("每周重复(创建周一至周日节目单模板，每周循环)")]),a("el-radio",{attrs:{label:"none"}},[t._v("不启用模板")])],1),a("div",{staticStyle:{"min-height":"500px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"daily"==t.data.extra.template.type||"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='daily'||data.extra.template.type=='weekly'"}],staticStyle:{"margin-top":"30px",display:"flex"}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='weekly'"}],staticClass:"left",staticStyle:{height:"500px","margin-right":"10px",width:"100px"},attrs:{"tab-position":"left"},on:{"tab-click":t.changeweek},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}},[a("el-tab-pane",{attrs:{label:"周一",name:"1"}}),a("el-tab-pane",{attrs:{label:"周二",name:"2"}}),a("el-tab-pane",{attrs:{label:"周三",name:"3"}}),a("el-tab-pane",{attrs:{label:"周四",name:"4"}}),a("el-tab-pane",{attrs:{label:"周五",name:"5"}}),a("el-tab-pane",{attrs:{label:"周六",name:"6"}}),a("el-tab-pane",{attrs:{label:"周日",name:"7"}})],1),a("div",{staticClass:"right",staticStyle:{"flex-grow":"1"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")]),t.tableflag?a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"播放时长",align:"center",prop:"extra.duration","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}],null,!1,1769245459)}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e)}}})]}}],null,!1,593115993)})],1):t._e()],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1):t._e()],1)}),c=[],u=(a("053b"),a("ea69"),a("08d5"),a("0fea")),d=a("61f7"),p={name:"page_a_dialog",data:function(){return{dialogFormVisible:!1,innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",editIndex:"",dataList:[],dayList:[],weekList:{},tableflag:!0,weekday:"1",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}],data:"",importLoading:!1}},filters:{formatallow_replay:function(t){return 1==t?"是":"否"}},created:function(){this.initForm()},computed:{actionUrl:function(){return this.xlsxUrl},uploadHeader:function(){var t=sessionStorage.getItem("token"),e=sessionStorage.getItem("TempZone")||"",a=sessionStorage.getItem("TempSite")||"";return{Authorization:t,TempZone:e,TempSite:a}},actionData:function(t){var e=t.data,a=void 0===e?{}:e;return{channel_id:a.id}}},methods:{getdata:function(t){this.data=JSON.parse(JSON.stringify(t))},changeweek:function(t,e){this.returndataList()},closeDialog:function(){this.dialogFormVisible=!1},enterDialog:function(){var t=this;if("weekly"!=this.data.extra.template.type||this.weekList["1"]&&this.weekList["1"].length>0&&this.weekList["2"]&&this.weekList["2"].length>0&&this.weekList["3"]&&this.weekList["3"].length>0&&this.weekList["4"]&&this.weekList["4"].length>0&&this.weekList["5"]&&this.weekList["5"].length>0&&this.weekList["6"]&&this.weekList["6"].length>0&&this.weekList["7"]&&this.weekList["7"].length>0){this.data.father=this.data.father.id;var e={list:{daily:[],weekly:{}},type:""};e.list.daily=this.dayList,e.list.weekly=this.weekList,e.type=this.data.extra.template.type,this.data.extra.template=e,Object(u["ub"])(this.data.id,this.data).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.$parent.getList(),t.weekday="1"}))}else this.$message({message:"选择每周重复，请保证每天至少有一个节目",type:"warning"})},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{duration:"",allow_replay:1}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){this.initForm(),this.editIndex=t.$index,this.form=JSON.parse(JSON.stringify(t.row)),this.innerVisible=!0,this.dialogTitle="修改节目",this.dialogType="edit"},deldata:function(t){var e=this,a=t.row;this.editIndex=t.$index,this.$confirm("此操作将永久删除节目名称为"+a.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"daily"==e.data.extra.template.type?(e.dayList.splice(e.editIndex,1),e.datalistformat(e.dayList),e.dataList=e.dayList,e.innerVisible=!1,e.$message({message:"删除成功",type:"success"})):"weekly"==e.data.extra.template.type&&(e.weekList[e.weekday].splice(e.editIndex,1),e.datalistformat(e.weekList[e.weekday]),e.dataList=e.weekList[e.weekday],e.innerVisible=!1,e.$message({message:"删除成功",type:"success"}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},returntime:function(t,e){function a(t){return t<10?"0"+t:t}var i="1970/1/1 ",r=(t=t||"09:01:22",e=e||"22:22:22",new Date(i+t)),n=new Date(i+e),o=parseInt((n.getTime()-r.getTime())/1e3);Math.floor(o/86400/365);o%=31536e3;Math.floor(o/86400/30);o%=2592e3;Math.floor(o/86400);o%=86400;var s=Math.floor(o/3600);o%=3600;var l=Math.floor(o/60);o%=60;var c=o;return a(s)+":"+a(l)+":"+a(c)},datalistformat:function(t){t.sort((function(t,e){return e.time<t.time?1:-1}));for(var e=0;e<t.length;e++)e<t.length-1?t[e].extra.duration=this.returntime(t[e].time,t[e+1].time):t[e].extra.duration=this.returntime(t[e].time,"24:00:00");return t},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.form));if("edit"==t.dialogType){if("daily"==t.data.extra.template.type){for(var i=0;i<t.dayList.length;i++)if(a.time==t.dayList[i].time&&i!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.splice(t.editIndex,1,a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){for(i=0;i<t.weekList[t.weekday].length;i++)if(a.time==t.weekList[t.weekday][i].time&&i!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].splice(t.editIndex,1,a),t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}else if("daily"==t.data.extra.template.type){for(i=0;i<t.dayList.length;i++)if(a.time==t.dayList[i].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.push(a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){if(Object(d["a"])(t.weekList[t.weekday])){for(i=0;i<t.weekList[t.weekday].length;i++)if(a.time==t.weekList[t.weekday][i].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].push(a)}else t.weekList[t.weekday]=[],t.weekList[t.weekday].push(a);t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}}))},chooseradio:function(){var t=this;this.tableflag=!1,this.$nextTick((function(){t.tableflag=!0})),this.returndataList()},returndataList:function(){if(this.dataList=[],!this.data.extra.template){var t={list:{daily:[],weekly:{}},type:"none"};this.data.extra.template=t}"daily"==this.data.extra.template.type?(this.dayList=this.data.extra.template.list.daily,this.dataList=this.dayList):"weekly"==this.data.extra.template.type?(this.weekList=this.data.extra.template.list.weekly,this.weekList||(this.weekList={},this.weekList[this.weekday]=[]),this.dataList=this.weekList[this.weekday]):this.dataList=[]},downProgramme:function(){var t=location.origin;window.location.href="".concat(t,"/api/channels/downloadProgramTemplate")},beforeAvatarUpload:function(){this.importLoading=!0},handleAvatarSuccess:function(t){t.status_code>=200&&t.status_code<300?(this.$message.success("导入成功!"),this.$parent.getList(),this.dialogFormVisible=!1):this.$message.error("导入失败!"),this.importLoading=!1},handleAvatarError:function(t){this.$message.error("导入失败, 服务故障!"),this.importLoading=!1}}},m=p,f=(a("10c1"),a("6b2c"),a("cba8")),h=Object(f["a"])(m,l,c,!1,null,"f7240c3c",null),g=h.exports,b={components:{Pagedialog:g},props:{productId:{type:Number,default:0},productList:{type:Array,default:[]}},name:"page_a",data:function(){var t,e=sessionStorage.getItem("token");return{importHeaders:{Authorization:e},queryParams:{page:1,pageSize:10,product_id:0,type:"tv_channel"},loading:!0,dataList:[],total:0,statusoptions:[{value:1,label:"启用"},{value:2,label:"禁用"}],dialogFormVisible:!1,form:{},rules:(t={name:[{required:!0,message:"请输入频道姓名",trigger:"blur"}],sort:[{required:!0,message:"请输入权重(排序)",trigger:"blur"}],product_id:[{required:!0,message:"请选择所属产品",trigger:"blur"}]},Object(s["a"])(t,"extra.logo",[{required:!0,message:"请选择频道logo",trigger:"blur"}]),Object(s["a"])(t,"forway",[{required:!0,message:"请选择适用场景",trigger:"blur"}]),Object(s["a"])(t,"status",[{required:!0,message:"请选择是否启用",trigger:"blur"}]),t),dialogType:"add",dialogTitle:""}},filters:{formattemplate:function(t){return t?"daily"==t.type?"每日循环":"weekly"==t.type?"每周循环":"未启用":"未启用"}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},watch:{productId:function(t){this.queryParams.product_id=t,this.getList()}},created:function(){this.initForm()},methods:{program:function(t){this.$refs.Pagedialog.getdata(t),this.$refs.Pagedialog.dialogFormVisible=!0,this.$refs.Pagedialog.returndataList()},handleAvatarSuccess:function(t,e,a){this.form.extra.logo=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["mc"])(e).then((function(e){t.loading=!1,t.dataList=e.data,t.total=e.total}))},statuschange:function(t){var e=this;t.father=t.father.id,Object(u["ub"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(){this.initForm(),this.dialogTitle="新增频道",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={type:"tv_channel",father:0,name:"",sort:0,product_id:"",forway:[],extra:{has_live:"",has_replay:"",intro:"",logo:"",stream_urls:[{name:"超清",url:""},{name:"高清",url:""},{name:"标清",url:""}]},status:""}},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑频道",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),e.form.forway=[],1==e.form.extra.has_replay&&e.form.forway.push("点播"),1==e.form.extra.has_live&&e.form.forway.push("直播"),console.log(e.form)})),this.dialogFormVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.id+"的频道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["db"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.form.forway.indexOf("直播")>-1?this.form.extra.has_live=1:this.form.extra.has_live=0,this.form.forway.indexOf("点播")>-1?this.form.extra.has_replay=1:this.form.extra.has_replay=0,console.log(this.form),this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=JSON.parse(JSON.stringify(t.form));a.father=a.father.id,Object(u["ub"])(a.id,a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else Object(u["u"])(t.form).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}))}}},v=b,y=(a("c938"),a("a982"),Object(f["a"])(v,n,o,!1,null,"5b6ed803",null)),w=y.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_b"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_b",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[a("div",[a("div",{staticClass:"top",staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:"选择日期"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}})],1),a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}},[a("el-radio-button",{attrs:{label:t.nowDate(0)}},[t._v(t._s(t._f("dateformat")(t.nowDate(0),"today")))]),t._l(6,(function(e,i){return[a("el-radio-button",{attrs:{label:t.nowDate(e)}},[t._v(t._s(t._f("dateformat")(t.nowDate(e))))])]}))],2),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}])}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1)],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},x=[],k=(a("dbb3"),a("e18c"),a("1c2e"),{name:"page_b",props:{productId:{type:Number,default:0}},data:function(){var t=this.getDay(0);return{pickerOptions:{disabledDate:function(t){return t.getTime()-5184e5>Date.now()||t.getTime()+6048e5<Date.now()}},loading:!0,dataList:[],tvList:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"tv_channel"},queryParams:{page:1,pageSize:999,channel_id:"",date:t},innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:"1",label:"是"},{value:"0",label:"否"}]}},created:function(){this.getList(),this.initForm()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList(),this.getList()}},filters:{dateformat:function(t,e){t=new Date(t);var a=t.getDay(),i=["(周日)","(周一)","(周二)","(周三)","(周四)","(周五)","(周六)"],r=i[a],n=t.getMonth()+1,o=String(t.getDate()<10?"0"+t.getDate():t.getDate());return e?n+"."+o+" (今天)":n+"."+o+" "+r},formatallow_replay:function(t){return 1==t?"是":"否"}},computed:{nowDate:function(){var t=this;return function(e){return t.getDay(e)}},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live}))}},methods:{pickerdatechange:function(){this.getList()},getDay:function(t){var e=new Date,a=e.getTime()+864e5*t;e.setTime(a);var i=e.getFullYear(),r=e.getMonth(),n=e.getDate();return r=this.doHandleMonth(r+1),n=this.doHandleMonth(n),i+"-"+r+"-"+n},doHandleMonth:function(t){var e=t;return 1===t.toString().length&&(e="0"+t),e},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["nc"])(e).then((function(e){t.loading=!1,t.dataList=e.data}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["mc"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{allow_replay:""}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除节目名称为"+t.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["Z"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={type:"1"};a.channel_id=t.queryParams.channel_id,a.date=t.queryParams.date;var i=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["qb"])(i.id,i).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["v"])(i).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}}),L=k,O=(a("ed22"),Object(f["a"])(L,_,x,!1,null,null,null)),S=O.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_c",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px","margin-right":"20px",width:"180px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right",staticStyle:{width:"1400px"}},[t.showlist?t._e():a("div",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),t.showlist?t._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,4181223627)}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"280px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"dbjmd",label:"点播节目单"},on:{fatherMethod:function(a){return t.golist(e.row)}}}),a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}],null,!1,3520136552)})],1),t.showlist?a("Pageclist",{attrs:{showlist:t.showlist,_channel_id:t._channel_id},on:{back:t.back}}):t._e()],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目Logo/封面:",prop:"extra.cover[0].path"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"cover"),"before-upload":t.beforeAvatarUpload}},[t.form.extra.cover[0].path?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.cover[0].path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重(排序):",prop:"sort"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入权重"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"绑定视频栏目",prop:"extra.vms_channel_type"}},[a("el-radio-group",{model:{value:t.form.extra.vms_channel_type,callback:function(e){t.$set(t.form.extra,"vms_channel_type",e)},expression:"form.extra.vms_channel_type"}},[a("el-radio",{attrs:{label:"cloud"}},[t._v("蓝云视频栏目")]),a("el-radio",{attrs:{label:"vms"}},[t._v("VMS视频栏目")])],1)],1),"cloud"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"蓝云视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"1",attrs:{props:{value:"code",label:"name",emitPath:!1},options:t.videocatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),"vms"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"VMS视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"2",attrs:{props:{value:"id",label:"name",emitPath:!1},options:t.vmscatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},j=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c_list"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("返回上一级")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"script.id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"script.title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属节目",align:"center",prop:"channel.name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"script.status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.script.status,callback:function(a){t.$set(e.row.script,"status",a)},expression:"scope.row.script.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"script.created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"740px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"点播节目单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入点播节目单名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目单封面:",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"name"),"before-upload":t.beforeAvatarUpload}},[t.form.name?a("img",{staticClass:"avatar",attrs:{src:t.form.name}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"资源地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"播放时间:",prop:"play_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.play_time,callback:function(e){t.$set(t.form,"play_time",e)},expression:"form.play_time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"基础点击量:",prop:"view_base_num"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入基础点击量"},model:{value:t.form.view_base_num,callback:function(e){t.$set(t.form,"view_base_num",e)},expression:"form.view_base_num"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"name"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},T=[],F={name:"page_c_list",props:{_channel_id:{type:Number,default:0},showlist:{type:Boolean,default:!0}},data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},dataList:[],loading:!0,statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],dialogTitle:"",innerVisible:!1,form:{},rules:{}}},created:function(){this.getList()},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},methods:{handleAvatarSuccess:function(t,e){this.form.name=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},back:function(){this.$emit("back",!1)},getList:function(){var t=this;this.loading=!0;var e={channel_id:this._channel_id,type:"tv_replay"};Object(u["Kb"])(e).then((function(e){t.loading=!1,console.log(e),t.dataList=e.data}))},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.script.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["ab"])(t.script.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){this.innerVisible=!1},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={status:1,extra:{cover:[{path:"",intro:""}],title:"",stream:[{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_h264_128k_mp3.mp3",rate:"128",format:"mp3",video_id:"581e88ee8cb649fa9692a07d0726c889",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#h264_128k_mp3.mp3"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_1500K_MP4.mp4",rate:"1500",format:"mp4",video_id:"455d73bc95d14f6a9fbaba3f1b03eda4",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_1500K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_800K_MP4.mp4",rate:"800",format:"mp4",video_id:"ef2418a8e8b4480fa172668c8e82734e",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_800K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_450K_MP4.mp4",rate:"450",format:"mp4",video_id:"07df38e0829a480abef854674ee6685f",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_450K_MP4.mp4"}]}}},editdata:function(t){console.log(t),this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.innerVisible=!0}}},q=F,V=(a("7e1d"),a("6c13"),Object(f["a"])(q,P,T,!1,null,"c9b4f36c",null)),I=V.exports,N={name:"page_c",props:{productId:{type:Number,default:0}},components:{Pageclist:I},data:function(){var t=sessionStorage.getItem("token");return{showlist:!1,_channel_id:"",importHeaders:{Authorization:t},loading:!0,dataList:[],tvList:[],videocatalogoptions:[],vmscatalogoptions:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"tv_channel"},queryParams:{page:1,pageSize:999,channel_id:"",type:"tv_replay"},innerVisible:!1,dialogTitle:"",form:{},rules:{sort:[{required:!0,message:"请输入权重",trigger:"blur"}],status:[{required:!0,message:"请选择是否允许回看",trigger:"blur"}],"extra.cover[0].path":[{required:!0,message:"请选择节目Logo/封面",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}]}},created:function(){this.getList(),this.initForm(),this.getvms_channels()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList()}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay}))}},methods:{back:function(t){this.showlist=t},golist:function(t){this._channel_id=t.id,this.showlist=!0},statuschange:function(t){var e=this;Object(u["fb"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},getvms_channels:function(){var t=this;Object(u["qc"])(1).then((function(e){t.videocatalogoptions=e})),Object(u["qc"])(0).then((function(e){function a(t){for(var e=0;e<t.length;e++)t[e].id=String(t[e].id),t[e].children&&a(t[e].children);return t}t.vmscatalogoptions=e,a(t.vmscatalogoptions)}))},handleAvatarSuccess:function(t,e){this.form.extra.cover[0].path=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},getList:function(){var t=this;this.showlist=!1,this.loading=!0;var e=this.queryParams.channel_id;e&&Object(u["Bb"])(e).then((function(e){t.loading=!1,t.dataList=e}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["mc"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",product_id:this.productId,father:this.queryParams.channel_id,sort:0,status:1,type:"tv_replay",extra:{cover:[{path:"",intro:""}],vms_channel:"",vms_channel_type:"cloud"}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),console.log(e.form)})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除栏目id为"+t.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["L"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={};a.channel_id=t.queryParams.channel_id;var i=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["fb"])(i.id,i).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["w"])(i).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},D=N,A=(a("1f3a"),a("ef04"),a("b439"),Object(f["a"])(D,$,j,!1,null,"0ef37d61",null)),C=A.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"频道logo",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{src:t.row.extra.logo}})]}}])}),a("el-table-column",{attrs:{label:"频道名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"频道状态",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"模板状态",align:"center",prop:"extra.template.type||'未启用'","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formattemplate")(e.row.extra.template)))])]}}])}),a("el-table-column",{attrs:{label:"节目模板",align:"center",prop:"en_name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.program(e.row)}}},[t._v("模板管理")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{width:"700px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"频道名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入频道名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重",prop:"sort"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入权重(排序)"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"所属产品",prop:"product_id"}},[a("el-select",{attrs:{disabled:"edit"==t.dialogType,placeholder:"请选择"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"频道LOGO：",prop:"extra.logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.extra.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"适用于",prop:"forway"}},[a("el-checkbox-group",{on:{change:function(e){return t.$forceUpdate()}},model:{value:t.form.forway,callback:function(e){t.$set(t.form,"forway",e)},expression:"form.forway"}},[a("el-checkbox",{attrs:{label:"直播"}}),a("el-checkbox",{attrs:{label:"点播"}})],1)],1),t.form.forway.indexOf("直播")>-1?a("el-form-item",{attrs:{"label-width":"120px",label:"流地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.extra.stream_urls[0].url,callback:function(e){t.$set(t.form.extra.stream_urls[0],"url",e)},expression:"form.extra.stream_urls[0].url"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"简介",prop:"extra.intro"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{autosize:{minRows:4},type:"textarea",autocomplete:"off",placeholder:"请输入简介"},model:{value:t.form.extra.intro,callback:function(e){t.$set(t.form.extra,"intro",e)},expression:"form.extra.intro"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1),a("Pagedialog",{ref:"Pagedialog"})],1)},z=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_d_dialog"},[t.dialogFormVisible?a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.importLoading,expression:"importLoading"}],attrs:{width:"1200px","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("span",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v("编辑节目单模板")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.downProgramme}},[t._v("下载节目单模板")]),a("el-upload",{staticClass:"upload-demo",attrs:{name:"excel",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-exce",action:t.actionUrl,data:t.actionData,headers:t.uploadHeader,"on-success":t.handleAvatarSuccess,"on-error":t.handleAvatarError,"before-upload":t.beforeAvatarUpload,"show-file-list":!1}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"small",type:"primary"}},[t._v("导入模板")])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1),a("span",[t._v("直播节日模板：")]),a("el-radio-group",{on:{change:t.chooseradio},model:{value:t.data.extra.template.type,callback:function(e){t.$set(t.data.extra.template,"type",e)},expression:"data.extra.template.type"}},[a("el-radio",{attrs:{label:"daily"}},[t._v("每日重复(创建单日节目单模板，每日重复)")]),a("el-radio",{attrs:{label:"weekly"}},[t._v("每周重复(创建周一至周日节目单模板，每周循环)")]),a("el-radio",{attrs:{label:"none"}},[t._v("不启用模板")])],1),a("div",{staticStyle:{"min-height":"500px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"daily"==t.data.extra.template.type||"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='daily'||data.extra.template.type=='weekly'"}],staticStyle:{"margin-top":"30px",display:"flex"}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"weekly"==t.data.extra.template.type,expression:"data.extra.template.type=='weekly'"}],staticClass:"left",staticStyle:{height:"500px","margin-right":"10px",width:"100px"},attrs:{"tab-position":"left"},on:{"tab-click":t.changeweek},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}},[a("el-tab-pane",{attrs:{label:"周一",name:"1"}}),a("el-tab-pane",{attrs:{label:"周二",name:"2"}}),a("el-tab-pane",{attrs:{label:"周三",name:"3"}}),a("el-tab-pane",{attrs:{label:"周四",name:"4"}}),a("el-tab-pane",{attrs:{label:"周五",name:"5"}}),a("el-tab-pane",{attrs:{label:"周六",name:"6"}}),a("el-tab-pane",{attrs:{label:"周日",name:"7"}})],1),a("div",{staticClass:"right",staticStyle:{"flex-grow":"1"}},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")]),t.tableflag?a("el-table",{attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"播放时长",align:"center",prop:"extra.duration","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}],null,!1,1769245459)}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e)}}})]}}],null,!1,593115993)})],1):t._e()],1)],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1):t._e()],1)},E=[],B={name:"page_d_dialog",data:function(){return{dialogFormVisible:!1,innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",editIndex:"",dataList:[],dayList:[],weekList:{},tableflag:!0,weekday:"1",statusoptions:[{value:1,label:"是"},{value:2,label:"否"}],data:"",importLoading:!1}},computed:{actionUrl:function(){return this.xlsxUrl},uploadHeader:function(){var t=sessionStorage.getItem("token"),e=sessionStorage.getItem("TempZone")||"",a=sessionStorage.getItem("TempSite")||"";return{Authorization:t,TempZone:e,TempSite:a}},actionData:function(t){var e=t.data,a=void 0===e?{}:e;return{channel_id:a.id}}},filters:{formatallow_replay:function(t){return 1==t?"是":"否"}},created:function(){this.initForm()},methods:{getdata:function(t){this.data=JSON.parse(JSON.stringify(t))},changeweek:function(t,e){this.returndataList()},closeDialog:function(){this.dialogFormVisible=!1},enterDialog:function(){var t=this;if("weekly"!=this.data.extra.template.type||this.weekList["1"]&&this.weekList["1"].length>0&&this.weekList["2"]&&this.weekList["2"].length>0&&this.weekList["3"]&&this.weekList["3"].length>0&&this.weekList["4"]&&this.weekList["4"].length>0&&this.weekList["5"]&&this.weekList["5"].length>0&&this.weekList["6"]&&this.weekList["6"].length>0&&this.weekList["7"]&&this.weekList["7"].length>0){this.data.father=this.data.father.id;var e={list:{daily:[],weekly:{}},type:""};e.list.daily=this.dayList,e.list.weekly=this.weekList,e.type=this.data.extra.template.type,this.data.extra.template=e,Object(u["ub"])(this.data.id,this.data).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.$parent.getList(),t.weekday="1"}))}else this.$message({message:"选择每周重复，请保证每天至少有一个节目",type:"warning"})},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{duration:"",allow_replay:1}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){this.initForm(),this.editIndex=t.$index,this.form=JSON.parse(JSON.stringify(t.row)),this.innerVisible=!0,this.dialogTitle="修改节目",this.dialogType="edit"},deldata:function(t){var e=this,a=t.row;this.editIndex=t.$index,this.$confirm("此操作将永久删除节目名称为"+a.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"daily"==e.data.extra.template.type?(e.dayList.splice(e.editIndex,1),e.datalistformat(e.dayList),e.dataList=e.dayList,e.innerVisible=!1,e.$message({message:"删除成功",type:"success"})):"weekly"==e.data.extra.template.type&&(e.weekList[e.weekday].splice(e.editIndex,1),e.datalistformat(e.weekList[e.weekday]),e.dataList=e.weekList[e.weekday],e.innerVisible=!1,e.$message({message:"删除成功",type:"success"}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},returntime:function(t,e){function a(t){return t<10?"0"+t:t}var i="1970/1/1 ",r=(t=t||"09:01:22",e=e||"22:22:22",new Date(i+t)),n=new Date(i+e),o=parseInt((n.getTime()-r.getTime())/1e3);Math.floor(o/86400/365);o%=31536e3;Math.floor(o/86400/30);o%=2592e3;Math.floor(o/86400);o%=86400;var s=Math.floor(o/3600);o%=3600;var l=Math.floor(o/60);o%=60;var c=o;return a(s)+":"+a(l)+":"+a(c)},datalistformat:function(t){t.sort((function(t,e){return e.time<t.time?1:-1}));for(var e=0;e<t.length;e++)e<t.length-1?t[e].extra.duration=this.returntime(t[e].time,t[e+1].time):t[e].extra.duration=this.returntime(t[e].time,"24:00:00");return t},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.form));if("edit"==t.dialogType){if("daily"==t.data.extra.template.type){for(var i=0;i<t.dayList.length;i++)if(a.time==t.dayList[i].time&&i!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.splice(t.editIndex,1,a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){for(i=0;i<t.weekList[t.weekday].length;i++)if(a.time==t.weekList[t.weekday][i].time&&i!=t.editIndex)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].splice(t.editIndex,1,a),t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}else if("daily"==t.data.extra.template.type){for(i=0;i<t.dayList.length;i++)if(a.time==t.dayList[i].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.dayList.push(a),t.datalistformat(t.dayList),t.dataList=t.dayList,t.innerVisible=!1}else if("weekly"==t.data.extra.template.type){if(Object(d["a"])(t.weekList[t.weekday])){for(i=0;i<t.weekList[t.weekday].length;i++)if(a.time==t.weekList[t.weekday][i].time)return void t.$message({message:"开始时间重复，请修改",type:"warning"});t.weekList[t.weekday].push(a)}else t.weekList[t.weekday]=[],t.weekList[t.weekday].push(a);t.datalistformat(t.weekList[t.weekday]),t.dataList=t.weekList[t.weekday],t.innerVisible=!1}}}))},chooseradio:function(){var t=this;this.tableflag=!1,this.$nextTick((function(){t.tableflag=!0})),this.returndataList()},returndataList:function(){if(this.dataList=[],!this.data.extra.template){var t={list:{daily:[],weekly:{}},type:"none"};this.data.extra.template=t}"daily"==this.data.extra.template.type?(this.dayList=this.data.extra.template.list.daily,this.dataList=this.dayList):"weekly"==this.data.extra.template.type?(this.weekList=this.data.extra.template.list.weekly,this.weekList||(this.weekList={},this.weekList[this.weekday]=[]),this.dataList=this.weekList[this.weekday]):this.dataList=[]},downProgramme:function(){var t=location.origin;window.location.href="".concat(t,"/api/channels/downloadProgramTemplate")},beforeAvatarUpload:function(){this.importLoading=!0},handleAvatarSuccess:function(t){t.status_code>=200&&t.status_code<300?(this.$message.success("导入成功!"),this.$parent.getList(),this.dialogFormVisible=!1):this.$message.error("导入失败!"),this.importLoading=!1},handleAvatarError:function(t){this.$message.error("导入失败, 服务故障!"),this.importLoading=!1}}},H=B,J=(a("b69f"),a("a793"),Object(f["a"])(H,U,E,!1,null,"b9aaee40",null)),R=J.exports,K={components:{Pagedialog:R},props:{productId:{type:Number,default:0},productList:{type:Array,default:[]}},name:"page_d",data:function(){var t,e=sessionStorage.getItem("token");return{importHeaders:{Authorization:e},queryParams:{page:1,pageSize:10,product_id:0,type:"radio_channel"},loading:!0,dataList:[],total:0,statusoptions:[{value:1,label:"启用"},{value:2,label:"禁用"}],dialogFormVisible:!1,form:{},rules:(t={name:[{required:!0,message:"请输入频道姓名",trigger:"blur"}],sort:[{required:!0,message:"请输入权重(排序)",trigger:"blur"}],product_id:[{required:!0,message:"请选择所属产品",trigger:"blur"}]},Object(s["a"])(t,"extra.logo",[{required:!0,message:"请选择频道logo",trigger:"blur"}]),Object(s["a"])(t,"forway",[{required:!0,message:"请选择适用场景",trigger:"blur"}]),Object(s["a"])(t,"status",[{required:!0,message:"请选择是否启用",trigger:"blur"}]),t),dialogType:"add",dialogTitle:""}},filters:{formattemplate:function(t){return t?"daily"==t.type?"每日循环":"weekly"==t.type?"每周循环":"未启用":"未启用"}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},watch:{productId:function(t){this.queryParams.product_id=t,this.getList()}},created:function(){this.initForm()},methods:{program:function(t){this.$refs.Pagedialog.getdata(t),this.$refs.Pagedialog.dialogFormVisible=!0,this.$refs.Pagedialog.returndataList()},handleAvatarSuccess:function(t,e,a){this.form.extra.logo=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));Object(u["mc"])(e).then((function(e){t.loading=!1,t.dataList=e.data,t.total=e.total}))},statuschange:function(t){var e=this;t.father=t.father.id,Object(u["ub"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(){this.initForm(),this.dialogTitle="新增频道",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={type:"radio_channel",father:0,name:"",sort:0,product_id:"",forway:[],extra:{has_live:"",has_replay:"",intro:"",logo:"",stream_urls:[{name:"标清",url:""}]},status:""}},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑频道",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t)),e.form.forway=[],1==e.form.extra.has_replay&&e.form.forway.push("点播"),1==e.form.extra.has_live&&e.form.forway.push("直播"),console.log(e.form)})),this.dialogFormVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.id+"的频道, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["db"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.form.forway.indexOf("直播")>-1?this.form.extra.has_live=1:this.form.extra.has_live=0,this.form.forway.indexOf("点播")>-1?this.form.extra.has_replay=1:this.form.extra.has_replay=0,this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=JSON.parse(JSON.stringify(t.form));a.father=a.father.id,Object(u["ub"])(a.id,a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else Object(u["u"])(t.form).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}))}}},Q=K,Z=(a("d089"),a("c5f3"),Object(f["a"])(Q,M,z,!1,null,"db9fe868",null)),G=Z.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_e"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_e",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[a("div",[a("div",{staticClass:"top",staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:"选择日期"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}})],1),a("el-radio-group",{staticStyle:{"margin-left":"20px"},on:{change:t.pickerdatechange},model:{value:t.queryParams.date,callback:function(e){t.$set(t.queryParams,"date",e)},expression:"queryParams.date"}},[a("el-radio-button",{attrs:{label:t.nowDate(0)}},[t._v(t._s(t._f("dateformat")(t.nowDate(0),"today")))]),t._l(6,(function(e,i){return[a("el-radio-button",{attrs:{label:t.nowDate(e)}},[t._v(t._s(t._f("dateformat")(t.nowDate(e))))])]}))],2),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"time","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"允许回看",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatallow_replay")(e.row.extra.allow_replay))+" ")]}}])}),a("el-table-column",{attrs:{width:"150px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1)],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"开始时间:",prop:"time"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"请选择时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否允许回看:",prop:"extra.allow_replay"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.extra.allow_replay,callback:function(e){t.$set(t.form.extra,"allow_replay",e)},expression:"form.extra.allow_replay"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},W=[],X={name:"page_e",props:{productId:{type:Number,default:0}},data:function(){var t=this.getDay(0);return{pickerOptions:{disabledDate:function(t){return t.getTime()-5184e5>Date.now()||t.getTime()+6048e5<Date.now()}},loading:!0,dataList:[],tvList:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"radio_channel"},queryParams:{page:1,pageSize:999,channel_id:"",date:t},innerVisible:!1,dialogTitle:"",form:{},rules:{time:[{required:!0,message:"请选择时间",trigger:"blur"}],"extra.allow_replay":[{required:!0,message:"请选择是否允许回看",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:"1",label:"是"},{value:"0",label:"否"}]}},created:function(){this.initForm()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList(),this.getList()}},filters:{dateformat:function(t,e){t=new Date(t);var a=t.getDay(),i=["(周日)","(周一)","(周二)","(周三)","(周四)","(周五)","(周六)"],r=i[a],n=t.getMonth()+1,o=String(t.getDate()<10?"0"+t.getDate():t.getDate());return e?n+"."+o+" (今天)":n+"."+o+" "+r},formatallow_replay:function(t){return 1==t?"是":"否"}},computed:{nowDate:function(){var t=this;return function(e){return t.getDay(e)}},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live}))}},methods:{pickerdatechange:function(){this.getList()},getDay:function(t){var e=new Date,a=e.getTime()+864e5*t;e.setTime(a);var i=e.getFullYear(),r=e.getMonth(),n=e.getDate();return r=this.doHandleMonth(r+1),n=this.doHandleMonth(n),i+"-"+r+"-"+n},doHandleMonth:function(t){var e=t;return 1===t.toString().length&&(e="0"+t),e},getList:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.queryParams));this.dataList=[],Object(u["nc"])(e).then((function(e){t.loading=!1,t.dataList=e.data}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["mc"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_live})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",time:"",extra:{allow_replay:""}}},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除节目名称为"+t.name+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["Z"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={type:"2"};a.channel_id=t.queryParams.channel_id,a.date=t.queryParams.date;var i=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["qb"])(i.id,i).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["v"])(i).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},tt=X,et=(a("d44e"),Object(f["a"])(tt,Y,W,!1,null,null,null)),at=et.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_f"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.returntvList.length>0,expression:"returntvList.length > 0"}],staticClass:"pbox page_f",staticStyle:{"padding-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-tabs",{staticClass:"left",staticStyle:{height:"500px"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabsClick},model:{value:t.queryParams.channel_id,callback:function(e){t.$set(t.queryParams,"channel_id",e)},expression:"queryParams.channel_id"}},t._l(t.returntvList,(function(t,e){return a("el-tab-pane",{attrs:{label:t.name,name:""+t.id}})})),1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"right"},[t.showlist?t._e():a("div",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:t.adddata}},[t._v("新增")])],1),t.showlist?t._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"权重",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}],null,!1,4181223627)}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"updated_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"280px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"dbjmd",label:"点播节目单"},on:{fatherMethod:function(a){return t.golist(e.row)}}}),a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}],null,!1,3520136552)})],1),t.showlist?a("Pageclist",{attrs:{showlist:t.showlist,_channel_id:t._channel_id},on:{back:t.back}}):t._e()],1)])],1)],1),a("el-dialog",{attrs:{width:"540px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"节目名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入节目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目Logo/封面:",prop:"extra.cover[0].path"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"cover"),"before-upload":t.beforeAvatarUpload}},[t.form.extra.cover[0].path?a("img",{staticClass:"avatar",attrs:{src:t.form.extra.cover[0].path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"权重(排序):",prop:"sort"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入权重"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"绑定视频栏目",prop:"extra.vms_channel_type"}},[a("el-radio-group",{model:{value:t.form.extra.vms_channel_type,callback:function(e){t.$set(t.form.extra,"vms_channel_type",e)},expression:"form.extra.vms_channel_type"}},[a("el-radio",{attrs:{label:"cloud"}},[t._v("蓝云视频栏目")]),a("el-radio",{attrs:{label:"vms"}},[t._v("VMS视频栏目")])],1)],1),"cloud"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"蓝云视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"1",attrs:{props:{value:"code",label:"name",emitPath:!1},options:t.videocatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),"vms"==t.form.extra.vms_channel_type?a("el-form-item",{attrs:{"label-width":"120px",label:"VMS视频栏目:",prop:"extra.vms_channel"}},[a("el-cascader",{key:"2",attrs:{props:{value:"id",label:"name",emitPath:!1},options:t.vmscatalogoptions,"show-all-levels":!1},model:{value:t.form.extra.vms_channel,callback:function(e){t.$set(t.form.extra,"vms_channel",e)},expression:"form.extra.vms_channel"}})],1):t._e(),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},rt=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_c_list"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.back}},[t._v("返回上一级")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"id",align:"center",prop:"script.id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"节目名称",align:"center",prop:"script.title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"所属节目",align:"center",prop:"channel.name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"script.status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.script.status,callback:function(a){t.$set(e.row.script,"status",a)},expression:"scope.row.script.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"script.created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.deldata(e.row)}}})]}}])})],1),a("el-dialog",{attrs:{width:"740px",title:t.dialogTitle,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,visible:t.innerVisible},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"点播节目单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入点播节目单名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"节目单封面:",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess.bind(this,"name"),"before-upload":t.beforeAvatarUpload}},[t.form.name?a("img",{staticClass:"avatar",attrs:{src:t.form.name}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"资源地址"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("超清")])],2),a("el-input",{staticStyle:{width:"400px",margin:"15px 0"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("高清")])],2),a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[a("template",{slot:"prepend"},[t._v("标清")])],2)],1),a("el-form-item",{attrs:{"label-width":"120px",label:"播放时间:",prop:"play_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.play_time,callback:function(e){t.$set(t.form,"play_time",e)},expression:"form.play_time"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"基础点击量:",prop:"view_base_num"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入基础点击量"},model:{value:t.form.view_base_num,callback:function(e){t.$set(t.form,"view_base_num",e)},expression:"form.view_base_num"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"是否启用:",prop:"name"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.innercloseDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.innerenterDialog}},[t._v("确 定")])],1)],1)],1)},ot=[],st={name:"page_c_list",props:{_channel_id:{type:Number,default:0},showlist:{type:Boolean,default:!0}},data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},dataList:[],loading:!0,statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}],dialogTitle:"",innerVisible:!1,form:{},rules:{}}},created:function(){this.getList()},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},methods:{handleAvatarSuccess:function(t,e){this.form.name=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},back:function(){this.$emit("back",!1)},getList:function(){var t=this;this.loading=!0;var e={channel_id:this._channel_id,type:"tv_replay"};Object(u["Kb"])(e).then((function(e){t.loading=!1,console.log(e),t.dataList=e.data}))},deldata:function(t){var e=this;this.$confirm("此操作将永久删除id为"+t.script.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["ab"])(t.script.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){this.innerVisible=!1},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={status:1,extra:{cover:[{path:"",intro:""}],title:"",stream:[{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_h264_128k_mp3.mp3",rate:"128",format:"mp3",video_id:"581e88ee8cb649fa9692a07d0726c889",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#h264_128k_mp3.mp3"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_1500K_MP4.mp4",rate:"1500",format:"mp4",video_id:"455d73bc95d14f6a9fbaba3f1b03eda4",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_1500K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_800K_MP4.mp4",rate:"800",format:"mp4",video_id:"ef2418a8e8b4480fa172668c8e82734e",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_800K_MP4.mp4"},{path:"http://cv.cztv.com/zrtg_mit/36bd6a3457514fd7b67fd44940cf7a63/36bd6a3457514fd7b67fd44940cf7a63_H264_450K_MP4.mp4",rate:"450",format:"mp4",video_id:"07df38e0829a480abef854674ee6685f",file_name:"/lanyun/2021/05/08/视频.mp4_47296197#H264_450K_MP4.mp4"}]}}},editdata:function(t){console.log(t),this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.innerVisible=!0}}},lt=st,ct=(a("aca2"),a("4870"),Object(f["a"])(lt,nt,ot,!1,null,"f11da9ac",null)),ut=ct.exports,dt={name:"page_f",props:{productId:{type:Number,default:0}},components:{Pageclist:ut},data:function(){var t=sessionStorage.getItem("token");return{showlist:!1,_channel_id:"",importHeaders:{Authorization:t},loading:!0,dataList:[],tvList:[],videocatalogoptions:[],vmscatalogoptions:[],tvqueryParams:{page:1,pageSize:999,product_id:0,type:"radio_channel"},queryParams:{page:1,pageSize:999,channel_id:"",type:"radio_replay"},innerVisible:!1,dialogTitle:"",form:{},rules:{sort:[{required:!0,message:"请输入权重",trigger:"blur"}],status:[{required:!0,message:"请选择是否允许回看",trigger:"blur"}],"extra.cover[0].path":[{required:!0,message:"请选择节目Logo/封面",trigger:"blur"}]},dialogType:"add",statusoptions:[{value:1,label:"启用"},{value:0,label:"禁用"}]}},created:function(){this.getList(),this.initForm(),this.getvms_channels()},watch:{productId:function(t){this.tvqueryParams.product_id=t,this.gettvList()}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2},returntvList:function(){return this.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay}))}},methods:{back:function(t){this.showlist=t},golist:function(t){this._channel_id=t.id,this.showlist=!0},statuschange:function(t){var e=this;Object(u["fb"])(t.id,t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},getvms_channels:function(){var t=this;Object(u["qc"])(1).then((function(e){t.videocatalogoptions=e})),Object(u["qc"])(0).then((function(e){function a(t){for(var e=0;e<t.length;e++)t[e].id=String(t[e].id),t[e].children&&a(t[e].children);return t}t.vmscatalogoptions=e,a(t.vmscatalogoptions)}))},handleAvatarSuccess:function(t,e){this.form.extra.cover[0].path=e.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},getList:function(){var t=this;this.showlist=!1,this.loading=!0;var e=this.queryParams.channel_id;e&&Object(u["Bb"])(e).then((function(e){t.loading=!1,t.dataList=e}))},gettvList:function(){var t=this,e=this.tvqueryParams;Object(u["mc"])(e).then((function(e){t.tvList=e.data,t.tvList=t.tvList.filter((function(t){return 1==t.status&&"1"==t.extra.has_replay})),t.queryParams.channel_id=t.tvList[0]?""+t.tvList[0].id:"",t.getList()}))},tabsClick:function(){this.getList()},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={name:"",product_id:this.productId,father:this.queryParams.channel_id,sort:0,status:1,type:"tv_replay",extra:{cover:[{path:"",intro:""}],vms_channel:"",vms_channel_type:"cloud"}},console.log(this.form)},adddata:function(){this.initForm(),this.innerVisible=!0,this.dialogTitle="新增节目",this.dialogType="add"},editdata:function(t){var e=this;this.initForm(),this.dialogTitle="编辑节目",this.dialogType="edit",this.$nextTick((function(){e.form=JSON.parse(JSON.stringify(t))})),this.innerVisible=!0},deldata:function(t){var e=this;this.$confirm("此操作将永久删除栏目id为"+t.id+"的节目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["L"])(t.id).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},innercloseDialog:function(){this.innerVisible=!1},innerenterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a={};a.channel_id=t.queryParams.channel_id;var i=Object.assign(a,t.form);"edit"==t.dialogType?Object(u["fb"])(i.id,i).then((function(e){t.$message({message:"修改成功",type:"success"}),t.innerVisible=!1,t.getList()})):Object(u["w"])(i).then((function(e){t.$message({message:"新建成功",type:"success"}),t.innerVisible=!1,t.getList()}))}}))}}},pt=dt,mt=(a("4ba3"),a("e407"),a("f2e5"),Object(f["a"])(pt,it,rt,!1,null,"524c1853",null)),ft=mt.exports,ht={name:"radioTV",components:{Pagea:w,Pageb:S,Pagec:C,Paged:G,Pagee:at,Pagef:ft},data:function(){return{activeName:"page_a",product_id:0,productList:[]}},created:function(){this.getproductList()},methods:{handleClick:function(t,e){1==t.index&&(this.$refs.page_b.gettvList(),this.$refs.page_b.initForm()),2==t.index&&(this.$refs.page_c.initForm(),this.$refs.page_c.gettvList()),4==t.index&&(this.$refs.page_e.gettvList(),this.$refs.page_e.initForm()),5==t.index&&(this.$refs.page_f.initForm(),this.$refs.page_f.gettvList())},getproductList:function(){var t=this;Object(u["fc"])({}).then((function(e){t.productList=e.data,t.product_id=t.productList[0].id}))}}},gt=ht,bt=Object(f["a"])(gt,i,r,!1,null,null,null);e["default"]=bt.exports},"10c1":function(t,e,a){"use strict";a("d7ad")},"1f3a":function(t,e,a){"use strict";a("8b4d")},"2ab73":function(t,e,a){"use strict";a("e18c");var i=a("f753"),r=a.n(i),n=a("b705"),o=a("a18c"),s=a("5041"),l=r.a.create({baseURL:s["b"],timeout:6e4});l.interceptors.request.use((function(t){return t.headers.Authorization=sessionStorage.getItem("token"),t}),(function(t){return Object(n["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),l.interceptors.response.use((function(t){return 200==t.data.code||"true"===t.headers.success?t.data:(Object(n["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(n["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)}))},3419:function(t,e,a){},4870:function(t,e,a){"use strict";a("9bef")},4945:function(t,e,a){},"4aef":function(t,e,a){},"4ba3":function(t,e,a){"use strict";a("594e")},"594e":function(t,e,a){},"6b2c":function(t,e,a){"use strict";a("f4bf")},"6c13":function(t,e,a){"use strict";a("4aef")},"7e1d":function(t,e,a){"use strict";a("e366")},"8b4d":function(t,e,a){},9686:function(t,e,a){},"9bef":function(t,e,a){},a793:function(t,e,a){"use strict";a("b644")},a982:function(t,e,a){"use strict";a("c8b6")},aca2:function(t,e,a){"use strict";a("df16")},ada5:function(t,e,a){},b00c:function(t,e,a){},b015:function(t,e,a){},b439:function(t,e,a){"use strict";a("b015")},b60c:function(t,e,a){"use strict";a("b130"),a("90aa"),a("e18c");var i=a("f753"),r=a.n(i),n=a("b705"),o=a("a18c"),s=a("5f87"),l=a("5041"),c=r.a.create({baseURL:l["c"],timeout:5e3});c.interceptors.request.use((function(t){return sessionStorage.getItem("token")&&Object(s["d"])()&&!t.url.includes("/api/authorizations/refresh")?new Promise((function(e){r()({url:"/api/authorizations/refresh",method:"post",baseURL:"/",timeout:5e3,headers:{Authorization:sessionStorage.getItem("token")}}).then((function(a){if(console.log(a.data),200===a.status){var i=a.data,r=i.token_type+" "+i.access_token,n=(new Date).getTime();sessionStorage.setItem("token",r),sessionStorage.setItem("tokenQueryTime",n),t.headers.Authorization=r,e(t)}else sessionStorage.removeItem("token"),o["c"].push({path:"/login"})})).catch((function(){sessionStorage.removeItem("token"),o["c"].push({path:"/login"})}))})):(t.headers.Authorization=sessionStorage.getItem("token"),t)}),(function(t){return Object(n["Message"])({showClose:!0,message:t,duration:5e3,type:"error.data.error.message"}),Promise.reject(t.data.error.message)})),c.interceptors.response.use((function(t){var e=(new Date).getTime();return sessionStorage.setItem("tokenQueryTime",e),200==t.data.code||"true"===t.headers.success?t.data:(Object(n["Message"])({showClose:!0,message:t.data.msg||decodeURI(t.headers.msg),type:"error"}),t.data.data&&t.data.data.reload&&(sessionStorage.removeItem("token"),o["c"].push("/login")),Promise.reject(t.data.msg))}),(function(t){return Object(n["Message"])({showClose:!0,message:t,type:"error"}),Promise.reject(t)})),e["a"]=c},b644:function(t,e,a){},b69f:function(t,e,a){"use strict";a("4945")},bedd:function(t,e,a){},c5f3:function(t,e,a){"use strict";a("b00c")},c612:function(t,e,a){},c8b6:function(t,e,a){},c938:function(t,e,a){"use strict";a("c612")},cf0e:function(t,e,a){},d089:function(t,e,a){"use strict";a("3419")},d44e:function(t,e,a){"use strict";a("bedd")},d7ad:function(t,e,a){},df16:function(t,e,a){},e366:function(t,e,a){},e407:function(t,e,a){"use strict";a("ada5")},ead8f:function(t,e,a){},ed22:function(t,e,a){"use strict";a("9686")},ef04:function(t,e,a){"use strict";a("cf0e")},f2e5:function(t,e,a){"use strict";a("ead8f")},f4bf:function(t,e,a){}}]);