(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71997f6c"],{"1d6e":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"xl-news-media"},[e.disabled?e._e():a("el-header",{staticStyle:{"background-color":"#fff","line-height":"40px"},attrs:{height:"40px"}},[a("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿，为避免内容提交覆盖，请与相关人员沟通后提交保存和发布。 ")]),a("el-main",{staticStyle:{padding:"10px 0"}},[a("el-tabs",{staticClass:"xl-news-media--tab",on:{"tab-click":e.handleTabChange},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(e){return a("el-tab-pane",{key:e.value,attrs:{disabled:"",label:e.label,name:e.value}})})),1),a("el-form",{ref:"submitForm",staticStyle:{"max-height":"600px",overflow:"auto"},attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[a("el-row",{staticClass:"xl-news-media--bc",staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticClass:"xl-news-media--title"},[a("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"400px"},attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[a("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.formOptions["extra.tags"].item.lists,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[a("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return a("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),a("img",{attrs:{src:r("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[a("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[a("script-select",{attrs:{value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[e.editorInit?a("editor",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)}}}):e._e()],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[a("div",{staticClass:"xl-news-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?a("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):a("i",{staticClass:"el-icon-video-camera-solid"})],1)]),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[a("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1)],1)],1)],1)],1),a("el-row",{attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[a("el-row",{staticClass:"xl-news-media--title"},[a("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[a("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[a("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[a("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[a("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.use_watermarks"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[a("el-row",{staticClass:"xl-news-media--title"},[a("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[a("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.view_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.view_base_num"].item)}}},"el-input",e.formOptions["extra.view_base_num"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),a("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[a("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled?e._e():a("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),a("el-dialog",{attrs:{width:"1000px",top:"4vh","append-to-body":"",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[a("xl-video",{on:{choose:e.videoDialogControl}})],1)],1)},i=[],o=r("1da1"),n=r("ade3"),s=r("5530"),l=(r("96cf"),r("a9e3"),r("fb6a"),r("b64b"),r("dca8"),r("ac1f"),r("1276"),r("d3b7"),r("25f0"),r("a15b"),r("7db0"),r("a434"),r("99af"),r("9911"),r("caad"),r("d81d"),r("b0c0"),r("b49d")),m=r("cc48"),u=r("0d9b"),p=r("1ef3"),c=r("90ba"),d=r("d242"),_=r("156b"),b={name:"NewDetail",components:{Cropper:l["a"],ImgTable:p["a"],Tag:u["a"],xlVideo:d["a"],scriptSelect:c["a"],Editor:_["a"]},props:{id:{type:[Number,String],required:!0},disabled:{type:Boolean,default:!1},fetchSuggestions:Function},data:function(){var e=this,t=function(t,r,a){var i=e.formOptions["extra.cover"].item.componentProps.count;Array.isArray(r)&&0!==r.length?r.slice(0,i).every((function(e){return e.path}))?a():a(new Error("请上传".concat(i,"张封面图片"))):a(new Error("请上传封面图片"))},r=function(e,t,r){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return""!==e[t]}))}))?r():r(new Error("请填写完成图片信息")):r(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入新闻标题"}},rule:[{required:!0,message:"请输入新闻标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入新闻副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器1",value:"210",count:1,img:"1402-210.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图5",value:"204",count:1,img:"1402-204.png"},{label:"大图6",value:"205",count:1,img:"1402-205.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入新闻简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:r,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"使用水印:",prop:"extra.use_watermarks"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否使用水印",trigger:"change"}]},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音新闻:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音新闻",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"活动",value:"activity",relatedLabel:"活动ID"},{label:"内部其他功能",value:"internal_link",relatedLabel:"对应功能ID"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"240",cover:[],intro:"",tags:"",keywords:"",publish_timer:{publish_at:"",status:"0"},set_created_at:"",content:"",is_original:"1",source:"",use_watermarks:"0",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:"",praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""}}},videoDialog:{title:"选择视频",show:!1,radio:"",video:"",width:"",height:""},videoLists:[],cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},editorPerson:"",editorInit:!1}},computed:{actionUrl:function(){return"".concat("http://batrix-local.cztv.com","/api/upload/image")}},watch:{id:{handler:function(e){""!==e&&this.getData()},immediate:!0}},created:function(){var e=this;if(this.getLabels(),!this.disabled){var t=setInterval((function(){e.getEditorPerson()}),8e3);this.$once("hook:beforeDestroy",(function(){clearInterval(t)}))}},methods:{parseObj:function(e){var t=e.key.split("."),r=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component?r&&r.toString().split(","):r},handleInput:function(e,t){var r=t.key.split("."),a=t.type||"string";"number"===a&&(e=parseInt(e)||""),r.reduce((function(a,i){if(i!==r[r.length-1])return a[i];a[i]="select"===t.component?e.join():e}),this.from)},handleChangeVideo:function(){this.videoDialog.show=!0},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},handleUploadImageSuccess:function(e){e.status_code>=200&&e.status_code<300&&(this.$message.success("图片上传成功!"),this.videoDialog.video=e.path)},initFrom:function(){var e=this,t=[],r=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===r||void 0===r?void 0:r.count)||1;var a=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.publish_timer.status","extra.set_created_at"];"1"===this.from.extra.publish_timer.status&&a.push("extra.publish_timer.publish_at");var i=["author_name","editor_name","extra.is_original","extra.use_watermarks","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&i.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(a,["extra.content","extra.custom_rec"],i);break;case"video":t=[].concat(a,["extra.video_extra.video_list","extra.custom_rec"],i);break;case"album":t=[].concat(a,["extra.album_extra.image_list"],i);break;case"outer_link":t=[].concat(a,["extra.link.type"]);var o=this.from.extra.link.type;if("target_obj"===o)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(o))t.push("extra.link.url");else{var n=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===o}));this.formOptions["extra.link.id"].item.props.label="".concat(n.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(n.relatedLabel),t.push("extra.link.id")}break}return t},handleSave:function(){var e=this;this.$refs.submitForm.validate((function(t,r){if(t){var a,i,o=e.initFrom(),n=e.from.extra.type,l=e.formOptions["extra.cover"].item.componentProps.count,u=Object(s["a"])({},o.reduce((function(t,r){return a=r.split("."),a[1]?(i=e.from[a[0]][a[1]],t[a[0]][a[1]]="cover"===a[1]?i.slice(0,l):i):t[a[0]]=e.from[a[0]],t}),{extra:{type:n}}));u.extra.link&&"target_obj"===u.extra.link.type&&(u.extra.link=Object(s["a"])(Object(s["a"])({},u.extra.link),{},{type:u.target_obj})),delete u.target_obj,Object(m["d"])(e.id,u).then((function(t){var r=t.statu_code,a=t.message;e.handleClose(),r?e.$message.error(a):(e.$message.success("保存草稿成功!"),e.$emit("refresh"))}))}else e.$message.warning(Object.keys(r).map((function(e){return r[e][0].message})).join())}))},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(){var e=this,t=this.initFrom();this.currentTabsFromRules=t.reduce((function(t,r){return Object(s["a"])(Object(s["a"])({},t),{},Object(n["a"])({},r,e.formOptions[r].rule))}),{}),this.$nextTick((function(){var t;null===(t=e.$refs.submitForm)||void 0===t||t.clearValidate()}))},getLabels:function(){var e=this;return Object(m["p"])({page:1,pageSize:9999}).then((function(t){var r=t.data;e.formOptions["extra.tags"].item.lists=r.map((function(e){return{label:e.name,value:e.id.toString()}}))}))},getList:function(){var e=this;return(this.fetchSuggestions?this.fetchSuggestions():Object(m["q"])(this.id)).then((function(t){var r,a,i,o,n=t.extra,s=n.link&&n.link.type||"target_obj",l="";e.formOptions.target_obj.item.lists.find((function(e){return e.value===s}))&&(l=s,s="target_obj"),e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:l,extra:{type:n.type,title:n.title,subtitle:n.subtitle,template_style:n.template_style||"240",cover:n.cover,intro:n.intro,tags:n.tags,keywords:n.keywords,publish_timer:{status:(null!==(r=null===n||void 0===n||null===(a=n.publish_timer)||void 0===a?void 0:a.status)&&void 0!==r?r:"1").toString(),publish_at:null!==(i=null===n||void 0===n||null===(o=n.publish_timer)||void 0===o?void 0:o.publish_at)&&void 0!==i?i:""},set_created_at:n.set_created_at,content:n.content,is_original:(n.is_original||"1").toString(),source:n.source,use_watermarks:(n.use_watermarks||"0").toString(),allow_comment:(n.allow_comment||"0").toString(),allow_share:(n.allow_share||"1").toString(),trans_to_audio:(n.trans_to_audio||"1").toString(),view_base_num:n.view_base_num,praise_base_num:n.praise_base_num,post_base_num:n.post_base_num,custom_rec:n.custom_rec||[],video_extra:{video_list:n.video_extra&&n.video_extra.video_list||[]},album_extra:{image_list:n.album_extra&&n.album_extra.image_list||[]},link:{type:s,id:n.link&&n.link.id||"",url:n.link&&n.link.url||""}}}}))},getEditorPerson:function(){var e=this;Object(m["n"])({id:this.id,type:"news"}).then((function(t){e.editorPerson=t.join()}))},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:e.handleTabChange(),e.$nextTick((function(){e.editorInit=!0}));case 4:case"end":return t.stop()}}),t)})))()}}},x=b,v=(r("aa5f"),r("2877")),h=Object(v["a"])(x,a,i,!1,null,null,null);t["a"]=h.exports},"460d":function(e,t,r){},aa5f:function(e,t,r){"use strict";r("460d")}}]);