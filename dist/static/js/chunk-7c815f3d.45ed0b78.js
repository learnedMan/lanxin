(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c815f3d","chunk-ab8a130a"],{"1d6e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"xl-news-media"},[!e.disabled&&e.editorPerson?i("el-header",{staticStyle:{"background-color":"#fff","line-height":"40px"},attrs:{height:"40px"}},[i("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿 ")]):e._e(),i("el-main",{staticStyle:{padding:"10px 0"}},[i("el-tabs",{staticClass:"xl-news-media--tab",on:{"tab-click":function(t){return e.handleTabChange("tab")}},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(e){return i("el-tab-pane",{key:e.value,attrs:{disabled:"",label:e.label,name:e.value}})})),1),i("el-form",{ref:"submitForm",staticStyle:{"max-height":"600px",overflow:"auto"},attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[i("el-row",{staticClass:"xl-news-media--bc",staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("el-row",{staticClass:"xl-news-media--title"},[i("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[i("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.tagLists,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return i("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[i("el-popover",{attrs:{placement:"top",trigger:"hover"}},[i("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),i("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[i("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[i("script-select",{attrs:{value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[i("el-select",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.use_watermarks"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)}}},"el-select",e.formOptions["extra.use_watermarks"].item.componentProps,!1),e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[e.editorInit?i("editor",{attrs:{watermark:e.watermark,position:e.parseObj(e.formOptions["extra.use_watermarks"].item),disabled:e.disabled,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)},changeVideoList:e.changeVideoList}}):e._e()],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[i("div",{staticClass:"xl-news-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?i("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{lazy:"",src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):i("i",{staticClass:"el-icon-video-camera-solid"})],1)]),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[i("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return i("el-radio",{key:t.value,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_address"),expression:"initFrom().includes('extra.activity_address')"}]},"el-form-item",e.formOptions["extra.activity_address"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.activity_address"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_address"].item)}}},"el-input",e.formOptions["extra.activity_address"].item.componentProps,!1))],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_start_time"),expression:"initFrom().includes('extra.activity_start_time')"}]},"el-form-item",e.formOptions["extra.activity_start_time"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_start_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_start_time"].item)}}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_end_time"),expression:"initFrom().includes('extra.activity_end_time')"}]},"el-form-item",e.formOptions["extra.activity_end_time"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_end_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_end_time"].item)}}})],1)],1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.salary_range.min"),expression:"initFrom().includes('extra.salary_range.min')"}],attrs:{label:"薪资区间:","label-width":"100px"}},[i("el-col",{attrs:{span:4}},[i("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.min"].item.props,!1),[i("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,max:e.from.extra.salary_range.max||1/0,clearable:""},model:{value:e.from.extra.salary_range.min,callback:function(t){e.$set(e.from.extra.salary_range,"min",t)},expression:"from.extra.salary_range.min"}},"el-input-number",e.formOptions["extra.salary_range.min"].item.componentProps,!1))],1)],1),i("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),i("el-col",{attrs:{span:4}},[i("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.max"].item.props,!1),[i("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,min:e.from.extra.salary_range.min||0,clearable:""},model:{value:e.from.extra.salary_range.max,callback:function(t){e.$set(e.from.extra.salary_range,"max",t)},expression:"from.extra.salary_range.max"}},"el-input-number",e.formOptions["extra.salary_range.max"].item.componentProps,!1))],1)],1)],1)],1)],1)],1)],1),i("el-row",{attrs:{gutter:20,type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[i("el-row",{staticClass:"xl-news-media--title"},[i("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1)],1)]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"xl-news-media--bc xl-news-media--row"},[i("el-row",{staticClass:"xl-news-media--title"},[i("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[i("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,placeholder:e.basePlaceholder,clearable:""},model:{value:e.from.extra.view_base_num,callback:function(t){e.$set(e.from.extra,"view_base_num",t)},expression:"from.extra.view_base_num"}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled?e._e():i("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v(" 保存 ")])],1),i("el-dialog",{attrs:{width:"1000px",top:"4vh","append-to-body":"",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[i("xl-video",{on:{choose:e.videoDialogControl}})],1)],1)},r=[],o=a("1da1"),n=a("2909"),s=a("ade3"),l=a("5530"),m=(a("96cf"),a("a9e3"),a("d3b7"),a("fb6a"),a("b64b"),a("dca8"),a("99af"),a("ac1f"),a("1276"),a("25f0"),a("a15b"),a("7db0"),a("a434"),a("9911"),a("caad"),a("a630"),a("3ca3"),a("4de4"),a("d81d"),a("b0c0"),a("b49d")),u=a("cc48"),p=a("0d9b"),c=a("1ef3"),d=a("90ba"),_=a("d242"),v=a("156b"),b={name:"NewDetail",components:{Cropper:m["a"],ImgTable:c["a"],Tag:p["a"],xlVideo:_["a"],scriptSelect:d["a"],Editor:v["a"]},props:{id:{type:[Number,String],required:!0},disabled:{type:Boolean,default:!1},fetchSuggestions:Function},data:function(){var e=this,t=function(t,a,i){var r=e.formOptions["extra.cover"].item.componentProps.count;Array.isArray(a)&&0!==a.length?a.slice(0,r).every((function(e){return e.path}))?i():i(new Error("请上传".concat(r,"张封面图片"))):i(new Error("请上传封面图片"))},a=function(e,t,a){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return""!==e[t]}))}))?a():a(new Error("请填写完成图片信息")):a(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入新闻标题"}},rule:[{required:!0,message:"请输入新闻标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入新闻副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"},{label:"活动列表",value:"204",count:1,img:"1402-204.png"},{label:"活动大图",value:"205",count:1,img:"1402-205.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入新闻简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"已处理",value:"2"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:a,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"水印位置:",prop:"extra.use_watermarks"},componentProps:{placeholder:"请选择水印位置(无表示不使用水印)"},component:"select",lists:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"},{value:"",label:"无"}]}},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音新闻:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音新闻",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"专题",value:"topic",relatedLabel:"专题栏目ID"},{label:"多模块专题",value:"multi_model_topic",relatedLabel:"多模块专题栏目ID"},{label:"活动",value:"activity"},{label:"视频点播列表",value:"vod_list",relatedLabel:"栏目id"},{label:"多层级",value:"m_level",relatedLabel:"栏目id"},{label:"无跳转",value:"none"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},"extra.activity_address":{item:{key:"extra.activity_address",props:{label:"活动地址:",prop:"extra.activity_address"},component:"input",componentProps:{placeholder:"请输入活动地址"}},rule:[{required:!0,message:"请输入活动地址",trigger:"blur"}]},"extra.activity_start_time":{item:{key:"extra.activity_start_time",props:{label:"开始时间:",prop:"extra.activity_start_time"},component:"date"},rule:[{required:!0,message:"请选择活动开始时间",trigger:"change"}]},"extra.activity_end_time":{item:{key:"extra.activity_end_time",props:{label:"结束时间:",prop:"extra.activity_end_time"},component:"date"},rule:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},"extra.salary_range.min":{item:{key:"extra.salary_range.min",props:{prop:"extra.salary_range.min"},componentProps:{placeholder:"请输入最小薪资"}}},"extra.salary_range.max":{item:{key:"extra.salary_range.max",props:{prop:"extra.salary_range.max"},componentProps:{placeholder:"请输入最大薪资"}}}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"240",cover:[],intro:"",tags:"",keywords:"",publish_timer:{publish_at:"",status:"0"},set_created_at:"",activity_address:"",activity_start_time:"",activity_end_time:"",content:"",is_original:"1",source:"",use_watermarks:"",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:void 0,praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""},salary_range:{min:void 0,max:void 0}}},videoDialog:{title:"选择视频",show:!1,radio:"",video:"",width:"",height:""},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},editorPerson:"",editorVideoLists:[],tagLists:[],editorInit:!1}},computed:{actionUrl:function(){return this.imgurl},viewBaseInterval:function(e){var t,a,i=e.$store.state.user.u_info,r=i.site.extra||{},o=Number((null===(t=r.random_view_range)||void 0===t?void 0:t.max)||0)||1/0,n=Number((null===(a=r.random_view_range)||void 0===a?void 0:a.min)||0);return{min:n,max:o}},basePlaceholder:function(e){var t=e.viewBaseInterval,a=t.max,i=t.min;return a===1/0?"请输入大于".concat(i,"的的正整数"):"请输入".concat(i,"-").concat(a,"的正整数")},watermark:function(e){var t=e.$store.state.user.u_info,a=t.site.extra||{};return a.watermark||""}},watch:{id:{handler:function(e){""!==e&&this.getData()},immediate:!0}},created:function(){var e=this;if(this.getLabels(),!this.disabled){this.getEditorPerson();var t=setInterval((function(){e.getEditorPerson()}),8e3);this.$once("hook:beforeDestroy",(function(){clearInterval(t)}))}},methods:{parseObj:function(e){var t=e.key.split("."),a=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component&&e.componentProps.multiple?a&&a.toString().split(","):a},handleInput:function(e,t){var a=t.key.split("."),i=t.type||"string";"number"===i&&(e=parseInt(e)||""),a.reduce((function(i,r){if(r!==a[a.length-1])return i[r];i[r]="select"===t.component&&t.componentProps.multiple?e.join():e}),this.from)},handleChangeVideo:function(){this.videoDialog.show=!0},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},handleUploadImageSuccess:function(e){e.status_code>=200&&e.status_code<300&&(this.$message.success("图片上传成功!"),this.videoDialog.video=e.path)},initFrom:function(){var e=this,t=[],a=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===a||void 0===a?void 0:a.count)||1;var i=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.publish_timer.status","extra.set_created_at"];"1"===this.from.extra.publish_timer.status&&i.push("extra.publish_timer.publish_at");var r=["author_name","editor_name","extra.is_original","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&r.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(i,["extra.content","extra.custom_rec","extra.use_watermarks"],r);break;case"video":t=[].concat(i,["extra.video_extra.video_list","extra.custom_rec"],r);break;case"album":t=[].concat(i,["extra.album_extra.image_list"],r);break;case"outer_link":t=[].concat(i,["extra.link.type","extra.salary_range.min","extra.salary_range.max",,"extra.view_base_num","extra.praise_base_num","extra.post_base_num"]);var o=this.from.extra.link.type;if("target_obj"===o)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(o))t.push("extra.link.url");else if("activity"===o)t.push("extra.activity_address","extra.activity_start_time","extra.activity_end_time");else if("none"!==o){var n=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===o}));this.formOptions["extra.link.id"].item.props.label="".concat(n.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(n.relatedLabel),t.push("extra.link.id")}break}return t},delEditorVideo:function(e){var t=document.createElement("div");t.innerHTML=e;var a=Array.from(t.querySelectorAll("video"));return a.length?this.editorVideoLists.filter((function(e){return a.find((function(t){return t.title===e.title&&t.cover===e.poster}))})):[]},handleSave:function(){var e=this;this.$refs.submitForm.validate((function(t,a){if(t){var i,r,o=e.initFrom(),n=e.from.extra.type,s=e.formOptions["extra.cover"].item.componentProps.count,m=Object(l["a"])({},o.reduce((function(t,a){return i=a.split("."),i[1]?(r=e.from[i[0]][i[1]],t[i[0]][i[1]]="cover"===i[1]?r.slice(0,s):r):t[i[0]]=e.from[i[0]],t}),{extra:{type:n}}));m.extra.link&&"activity"===m.extra.link.type&&(m.extra.link.url=m.extra.activity_address),m.extra.link&&"target_obj"===m.extra.link.type&&(m.extra.link=Object(l["a"])(Object(l["a"])({},m.extra.link),{},{type:m.target_obj})),delete m.target_obj,delete m.extra.activity_address,"news"===m.extra.type&&(m.extra.video_extra={video_list:e.delEditorVideo(m.extra.content)}),m.status=1,m.extra.view_base_num||0==m.extra.view_base_num||(m.extra.view_base_num=Math.floor(Math.random()*(e.viewBaseInterval.max-e.viewBaseInterval.min+1)+e.viewBaseInterval.min)),Object(u["l"])(e.id,m).then((function(t){var a=t.statu_code,i=t.message;e.handleClose(),a?e.$message.error(i):(e.$message.success("保存草稿成功!"),e.$emit("refresh"))}))}else e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())}))},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(e){var t=this,a=this.initFrom();this.currentTabsFromRules=a.reduce((function(e,a){return Object(l["a"])(Object(l["a"])({},e),{},Object(s["a"])({},a,t.formOptions[a].rule))}),{}),this.$nextTick((function(){var a;"tab"===e&&Object.assign(t.from.extra,{video_extra:{video_list:[]}}),null===(a=t.$refs.submitForm)||void 0===a||a.clearValidate()}))},changeVideoList:function(e){this.editorVideoLists.push(e)},getLabels:function(){var e=this;return Object(u["J"])({page:1,pageSize:9999}).then((function(t){var a=t.data,i=a.map((function(e){return{label:e.name,value:e.id.toString()}}));e.tagLists=i}))},getList:function(){var e=this;return(this.fetchSuggestions?this.fetchSuggestions():Object(u["M"])(this.id)).then((function(t){var a,i,r,o,s,l,m=t.extra;console.log("res 详情数据",t);var u=m.link&&m.link.type||"target_obj",p="";e.formOptions.target_obj.item.lists.find((function(e){return e.value===u}))&&(p=u,u="target_obj"),e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:p,extra:{type:m.type,title:m.title,subtitle:m.subtitle,template_style:m.template_style||"240",cover:m.cover,intro:m.intro,tags:m.tags,keywords:m.keywords,publish_timer:{status:(null!==(a=null===m||void 0===m||null===(i=m.publish_timer)||void 0===i?void 0:i.status)&&void 0!==a?a:"0").toString(),publish_at:null!==(r=null===m||void 0===m||null===(o=m.publish_timer)||void 0===o?void 0:o.publish_at)&&void 0!==r?r:""},set_created_at:m.set_created_at,activity_start_time:m.activity_start_time,activity_end_time:m.activity_end_time,activity_address:m.link&&m.link.url||"",content:m.content,is_original:(m.is_original||"1").toString(),source:m.source,use_watermarks:m.use_watermarks||"",allow_comment:(m.allow_comment||"0").toString(),allow_share:(m.allow_share||"1").toString(),trans_to_audio:(m.trans_to_audio||"1").toString(),view_base_num:m.view_base_num,praise_base_num:m.praise_base_num,post_base_num:m.post_base_num,custom_rec:m.custom_rec||[],video_extra:{video_list:m.video_extra&&m.video_extra.video_list||[]},album_extra:{image_list:m.album_extra&&m.album_extra.image_list||[]},link:{type:u,id:m.link&&m.link.id||"",url:m.link&&m.link.url||""},salary_range:{min:(null===(s=m.salary_range)||void 0===s?void 0:s.min)||void 0,max:(null===(l=m.salary_range)||void 0===l?void 0:l.max)||void 0}}},e.editorVideoLists=Object(n["a"])(m.video_extra&&m.video_extra.video_list||[]),console.log("this from",e.from)}))},getEditorPerson:function(){var e=this;Object(u["H"])({id:this.id,type:"news"}).then((function(t){e.editorPerson=t.length<2?"":t.join()}))},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("id",e.id),t.next=3,e.getList();case 3:e.handleTabChange(),e.$nextTick((function(){e.editorInit=!0}));case 5:case"end":return t.stop()}}),t)})))()}}},f=b,h=(a("aa5f"),a("2877")),x=Object(h["a"])(f,i,r,!1,null,null,null);t["a"]=x.exports},"460d":function(e,t,a){},"5fe8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"xl-add-media"},[e.disabled||"script"!==this.typeDetails?e._e():i("el-header",{staticClass:"xl-add-media--header",style:{justifyContent:e.isEdit&&e.editorPerson?"space-between":"flex-end"},attrs:{height:"auto"}},[e.isEdit&&e.editorPerson&&!e.disabled?i("div",{staticStyle:{"font-size":"14px",color:"#606266",flex:"1"}},[i("span",{staticStyle:{color:"#409eff","margin-right":"10px"}},[e._v(e._s(e.editorPerson))]),e._v(" 当前正在编辑该文稿 ")]):e._e(),e.disabled||"script"!==this.typeDetails?e._e():i("div",[e.onlyPublish?e._e():i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleDraft}},[e._v(" 保存稿件 ")]),e.onlyPublish?e._e():i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePreview}},[e._v(" 保存并预览 ")]),i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePublish}},[e._v(" 保存并发布 ")])],1)]),i("el-main",{staticStyle:{padding:"60px 0 10px 0",overflow:"auto"}},[i("el-tabs",{staticClass:"xl-add-media--tab",on:{"tab-click":function(t){return e.handleTabChange("tab",!0)}},model:{value:e.from.extra.type,callback:function(t){e.$set(e.from.extra,"type",t)},expression:"from.extra.type"}},e._l(e.tabs,(function(t){return i("el-tab-pane",{key:t.value,attrs:{disabled:e.disabled||e.isEdit,label:t.label,name:t.value}})})),1),i("el-form",{ref:"submitForm",attrs:{"label-width":"100px",size:"small",disabled:e.disabled,model:e.from,rules:e.currentTabsFromRules}},[i("el-row",{staticClass:"xl-add-media--bc",staticStyle:{"margin-bottom":"20px"}},[i("el-col",{attrs:{span:24}},[i("el-row",{staticClass:"xl-add-media--title"},[i("el-col",{attrs:{span:24}},[e._v("图文设置")])],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.title"),expression:"initFrom().includes('extra.title')"}]},"el-form-item",e.formOptions["extra.title"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.title"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.title"].item)}}},"el-input",e.formOptions["extra.title"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.intro"),expression:"initFrom().includes('extra.intro')"}]},"el-form-item",e.formOptions["extra.intro"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.intro"].item),rows:6,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.intro"].item)}}},"el-input",e.formOptions["extra.intro"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.tags"),expression:"initFrom().includes('extra.tags')"}]},"el-form-item",e.formOptions["extra.tags"].item.props,!1),[i("el-select",e._b({staticStyle:{width:"300px"},attrs:{value:e.parseObj(e.formOptions["extra.tags"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.tags"].item)}}},"el-select",e.formOptions["extra.tags"].item.componentProps,!1),e._l(e.formOptions["extra.tags"].item.lists,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.keywords"),expression:"initFrom().includes('extra.keywords')"}]},"el-form-item",e.formOptions["extra.keywords"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.keywords"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.keywords"].item)}}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.subtitle"),expression:"initFrom().includes('extra.subtitle')"}]},"el-form-item",e.formOptions["extra.subtitle"].item.props,!1),[i("el-input",e._b({attrs:{value:e.parseObj(e.formOptions["extra.subtitle"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.subtitle"].item)}}},"el-input",e.formOptions["extra.subtitle"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.template_style"),expression:"initFrom().includes('extra.template_style')"}]},"el-form-item",e.formOptions["extra.template_style"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.template_style"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.template_style"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.template_style"].item.lists,(function(t){return i("el-radio",{key:t.value,staticStyle:{"line-height":"32px"},attrs:{label:t.value}},[i("el-popover",{attrs:{placement:"top",trigger:"focus"}},[i("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.label))]),i("img",{attrs:{src:a("9795")("./"+t.img),alt:"",width:"300px"}})])],1)})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.cover"),expression:"initFrom().includes('extra.cover')"}]},"el-form-item",e.formOptions["extra.cover"].item.props,!1),[i("cropper",e._b({attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.cover"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.cover"].item)}}},"cropper",e.formOptions["extra.cover"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_type"),expression:"initFrom().includes('extra.video_type')"}]},"el-form-item",e.formOptions["extra.video_type"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.video_type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.video_type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.video_type"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.custom_rec"),expression:"initFrom().includes('extra.custom_rec')"}]},"el-form-item",e.formOptions["extra.custom_rec"].item.props,!1),[i("script-select",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["extra.custom_rec"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.custom_rec"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.use_watermarks"),expression:"initFrom().includes('extra.use_watermarks')"}]},"el-form-item",e.formOptions["extra.use_watermarks"].item.props,!1),[i("el-select",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.use_watermarks"].item),size:"small",clearable:""},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.use_watermarks"].item)}}},"el-select",e.formOptions["extra.use_watermarks"].item.componentProps,!1),e._l(e.formOptions["extra.use_watermarks"].item.lists,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.content"),expression:"initFrom().includes('extra.content')"}]},"el-form-item",e.formOptions["extra.content"].item.props,!1),[i("editor",{attrs:{watermark:e.watermark,position:e.parseObj(e.formOptions["extra.use_watermarks"].item),disabled:e.disabled,zIndex:e.zIndex,value:e.parseObj(e.formOptions["extra.content"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.content"].item)},changeVideoList:e.changeVideoList}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.video_extra.video_list"),expression:"initFrom().includes('extra.video_extra.video_list')"}]},"el-form-item",e.formOptions["extra.video_extra.video_list"].item.props,!1),[i("div",{staticClass:"xl-add-media--upload",on:{click:e.handleChangeVideo}},[e.from.extra.video_extra.video_list[0]?i("el-image",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{lazy:"",src:e.from.extra.video_extra.video_list[0].cover,fit:"contain"}}):i("i",{staticClass:"el-icon-video-camera-solid"})],1)]),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.album_extra.image_list"),expression:"initFrom().includes('extra.album_extra.image_list')"}]},"el-form-item",e.formOptions["extra.album_extra.image_list"].item.props,!1),[i("img-table",{attrs:{value:e.parseObj(e.formOptions["extra.album_extra.image_list"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.album_extra.image_list"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.type"),expression:"initFrom().includes('extra.link.type')"}]},"el-form-item",e.formOptions["extra.link.type"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.link.type"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.type"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.link.type"].item.lists,(function(t){return i("el-radio",{key:t.value,staticStyle:{"margin-bottom":"15px"},attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.url"),expression:"initFrom().includes('extra.link.url')"}]},"el-form-item",e.formOptions["extra.link.url"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"600px"},attrs:{value:e.parseObj(e.formOptions["extra.link.url"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.url"].item)}}},"el-input",e.formOptions["extra.link.url"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("target_obj"),expression:"initFrom().includes('target_obj')"}]},"el-form-item",e.formOptions["target_obj"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["target_obj"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["target_obj"].item)},change:e.handleTabChange}},e._l(e.formOptions["target_obj"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.link.id"),expression:"initFrom().includes('extra.link.id')"}],attrs:{"label-width":"126px"}},"el-form-item",e.formOptions["extra.link.id"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"350px"},attrs:{value:e.parseObj(e.formOptions["extra.link.id"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.link.id"].item)}}},"el-input",e.formOptions["extra.link.id"].item.componentProps,!1))],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_address"),expression:"initFrom().includes('extra.activity_address')"}]},"el-form-item",e.formOptions["extra.activity_address"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"530px"},attrs:{value:e.parseObj(e.formOptions["extra.activity_address"].item),clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_address"].item)}}},"el-input",e.formOptions["extra.activity_address"].item.componentProps,!1))],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_start_time"),expression:"initFrom().includes('extra.activity_start_time')"}]},"el-form-item",e.formOptions["extra.activity_start_time"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_start_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_start_time"].item)}}})],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.activity_end_time"),expression:"initFrom().includes('extra.activity_end_time')"}]},"el-form-item",e.formOptions["extra.activity_end_time"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.activity_end_time"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.activity_end_time"].item)}}})],1)],1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.salary_range.min"),expression:"initFrom().includes('extra.salary_range.min')"}],attrs:{label:"薪资区间:","label-width":"100px"}},[i("el-col",{attrs:{span:4}},[i("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.min"].item.props,!1),[i("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,max:e.from.extra.salary_range.max||1/0,clearable:""},model:{value:e.from.extra.salary_range.min,callback:function(t){e.$set(e.from.extra.salary_range,"min",t)},expression:"from.extra.salary_range.min"}},"el-input-number",e.formOptions["extra.salary_range.min"].item.componentProps,!1))],1)],1),i("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),i("el-col",{attrs:{span:4}},[i("el-form-item",e._b({},"el-form-item",e.formOptions["extra.salary_range.max"].item.props,!1),[i("el-input-number",e._b({staticStyle:{width:"100%"},attrs:{controls:!1,precision:0,min:e.from.extra.salary_range.min||0,clearable:""},model:{value:e.from.extra.salary_range.max,callback:function(t){e.$set(e.from.extra.salary_range,"max",t)},expression:"from.extra.salary_range.max"}},"el-input-number",e.formOptions["extra.salary_range.max"].item.componentProps,!1))],1)],1)],1)],1)],1)],1)],1),i("el-row",{attrs:{gutter:20,type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"xl-add-media--bc xl-add-media--row"},[i("el-row",{staticClass:"xl-add-media--title"},[i("el-col",{attrs:{span:24}},[e._v("发布设置")])],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.status"),expression:"initFrom().includes('extra.publish_timer.status')"}]},"el-form-item",e.formOptions["extra.publish_timer.status"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.publish_timer.status"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.status"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.publish_timer.status"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.publish_timer.publish_at"),expression:"initFrom().includes('extra.publish_timer.publish_at')"}],attrs:{"label-width":"130"}},"el-form-item",e.formOptions["extra.publish_timer.publish_at"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.publish_timer.publish_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.publish_timer.publish_at"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.set_created_at"),expression:"initFrom().includes('extra.set_created_at')"}]},"el-form-item",e.formOptions["extra.set_created_at"].item.props,!1),[i("el-date-picker",{attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",value:e.parseObj(e.formOptions["extra.set_created_at"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.set_created_at"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("author_name"),expression:"initFrom().includes('author_name')"}]},"el-form-item",e.formOptions["author_name"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["author_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["author_name"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("editor_name"),expression:"initFrom().includes('editor_name')"}]},"el-form-item",e.formOptions["editor_name"].item.props,!1),[i("tag",{attrs:{disabled:e.disabled,value:e.parseObj(e.formOptions["editor_name"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["editor_name"].item)}}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.is_original"),expression:"initFrom().includes('extra.is_original')"}]},"el-form-item",e.formOptions["extra.is_original"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.is_original"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.is_original"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.is_original"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.source"),expression:"initFrom().includes('extra.source')"}]},"el-form-item",e.formOptions["extra.source"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.source"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.source"].item)}}},"el-input",e.formOptions["extra.source"].item.componentProps,!1))],1)],1)]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"xl-add-media--bc xl-add-media--row"},[i("el-row",{staticClass:"xl-add-media--title"},[i("el-col",{attrs:{span:24}},[e._v("推广设置")])],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_comment"),expression:"initFrom().includes('extra.allow_comment')"}]},"el-form-item",e.formOptions["extra.allow_comment"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_comment"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_comment"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_comment"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.allow_share"),expression:"initFrom().includes('extra.allow_share')"}]},"el-form-item",e.formOptions["extra.allow_share"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.allow_share"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.allow_share"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.allow_share"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.trans_to_audio"),expression:"initFrom().includes('extra.trans_to_audio')"}],attrs:{"label-width":"150"}},"el-form-item",e.formOptions["extra.trans_to_audio"].item.props,!1),[i("el-radio-group",{attrs:{size:"small",value:e.parseObj(e.formOptions["extra.trans_to_audio"].item)},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.trans_to_audio"].item)},change:e.handleTabChange}},e._l(e.formOptions["extra.trans_to_audio"].item.lists,(function(t){return i("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.view_base_num"),expression:"initFrom().includes('extra.view_base_num')"}]},"el-form-item",e.formOptions["extra.view_base_num"].item.props,!1),[i("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,placeholder:e.basePlaceholder,clearable:""},model:{value:e.from.extra.view_base_num,callback:function(t){e.$set(e.from.extra,"view_base_num",t)},expression:"from.extra.view_base_num"}})],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.praise_base_num"),expression:"initFrom().includes('extra.praise_base_num')"}]},"el-form-item",e.formOptions["extra.praise_base_num"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.praise_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.praise_base_num"].item)}}},"el-input",e.formOptions["extra.praise_base_num"].item.componentProps,!1))],1),i("el-form-item",e._b({directives:[{name:"show",rawName:"v-show",value:e.initFrom().includes("extra.post_base_num"),expression:"initFrom().includes('extra.post_base_num')"}]},"el-form-item",e.formOptions["extra.post_base_num"].item.props,!1),[i("el-input",e._b({staticStyle:{width:"200px"},attrs:{value:e.parseObj(e.formOptions["extra.post_base_num"].item),rows:4,clearable:"",size:"small"},on:{input:function(t){return e.handleInput(t,e.formOptions["extra.post_base_num"].item)}}},"el-input",e.formOptions["extra.post_base_num"].item.componentProps,!1))],1)],1)])],1)],1)],1),e.disabled||"news"!==this.typeDetails?e._e():i("el-footer",{staticClass:"xl-news-media--footer",attrs:{height:"40px"}},[i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handleClose}},[e._v(" 关闭 ")]),i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"small"},on:{click:e.handlePublish}},[e._v(" 保存 ")])],1),i("el-dialog",{attrs:{width:"1000px",top:"4vh",title:e.videoDialog.title,visible:e.videoDialog.show},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[i("xl-video",{on:{choose:e.videoDialogControl}})],1),i("el-dialog",{attrs:{width:"600px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[i("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialogRules}},[i("el-form-item",{attrs:{"label-width":"120px",label:"栏目",prop:"channel_id"}},[i("el-cascader",{staticStyle:{width:"350px"},attrs:{filterable:"",options:e.channelsList,props:e.cascaderOption,clearable:""},model:{value:e.dialog.form.channel_id,callback:function(t){e.$set(e.dialog.form,"channel_id",t)},expression:"dialog.form.channel_id"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.cancelDialog}},[e._v(" 取 消 ")]),i("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",loading:e.publishLoading},on:{click:e.enterDialog}},[e._v(" 确 定 ")])],1)],1)],1)},r=[],o=a("2909"),n=a("ade3"),s=a("5530"),l=a("1da1"),m=(a("96cf"),a("a9e3"),a("d3b7"),a("fb6a"),a("ac1f"),a("00b4"),a("b64b"),a("dca8"),a("d81d"),a("4e82"),a("99af"),a("b0c0"),a("a434"),a("1276"),a("25f0"),a("e9c4"),a("7db0"),a("5319"),a("a15b"),a("9911"),a("caad"),a("a630"),a("3ca3"),a("4de4"),a("b49d")),u=a("cc48"),p=a("0fea"),c=a("0d9b"),d=a("1ef3"),_=a("90ba"),v=a("d242"),b=a("156b"),f={name:"Add-media",components:{Cropper:m["a"],ImgTable:d["a"],xlVideo:v["a"],Tag:c["a"],Editor:b["a"],scriptSelect:_["a"]},props:{id:{type:[Number,String],default:null},disabledNews:{type:Boolean,default:!1},zIndex:{type:Number,default:2e3},typeDetails:{type:String,default:"script"},fetchSuggestions:Function},data:function(){var e=this,t=function(t,a,i){var r=e.formOptions["extra.cover"].item.componentProps.count,o=e.from.extra.template_style;Array.isArray(a)&&0!==a.length||"240"==o?a.slice(0,r).every((function(e){return e.path}))||"240"==o?i():i(new Error("请上传".concat(r,"张封面图片"))):i(new Error("请上传封面图片"))},a=function(t,a,i){a?/(^[0-9]\d*$)/.test(a)?i():i(new Error("请输入大于零的正整数")):(e.from.extra.view_base_num=0,i())},i=function(e,t,a){Array.isArray(t)&&0!==t.length?t.every((function(e){return Object.keys(e).every((function(t){return"intro"===t||""!==e[t]}))}))?a():a(new Error("请填写完成图片信息")):a(new Error("请上传图片"))};return{formOptions:Object.freeze({"extra.title":{item:{key:"extra.title",props:{label:"标题:",prop:"extra.title"},component:"input",componentProps:{placeholder:"请输入稿件标题"}},rule:[{required:!0,message:"请输入稿件标题",trigger:"blur"}]},"extra.subtitle":{item:{key:"extra.subtitle",props:{label:"副标题:"},component:"input",componentProps:{placeholder:"请输入稿件副标题"}}},"extra.template_style":{item:{key:"extra.template_style",props:{label:"封面样式:",prop:"extra.template_style"},component:"radio",lists:[{label:"左图+标题1",value:"220",count:1,img:"1402-220.png"},{label:"纯文本",value:"240",count:1,img:"1402-240.png"},{label:"三图下文本",value:"230",count:3,img:"1402-230.png"},{label:"三图上文本",value:"231",count:3,img:"1402-231.png"},{label:"左图+标题2",value:"222",count:1,img:"1402-222.png"},{label:"右图+标题",value:"221",count:1,img:"1402-221.png"},{label:"播放器2",value:"211",count:1,img:"1402-211.png"},{label:"播放器3",value:"212",count:1,img:"1402-212.png"},{label:"大图1",value:"200",count:1,img:"1402-200.png"},{label:"大图2",value:"201",count:1,img:"1402-201.png"},{label:"大图3",value:"202",count:1,img:"1402-202.png"},{label:"大图4",value:"203",count:1,img:"1402-203.png"},{label:"大图7",value:"206",count:1,img:"1402-206.png"},{label:"活动列表",value:"204",count:1,img:"1402-204.png"},{label:"活动大图",value:"205",count:1,img:"1402-205.png"}]},rule:[{required:!0,message:"请选择封面样式",trigger:"change"}]},"extra.cover":{item:{key:"extra.cover",props:{label:"",prop:"extra.cover"},component:"cropper",componentProps:{count:1}},rule:[{validator:t,trigger:"change"}]},"extra.intro":{item:{key:"extra.intro",props:{label:"简介:"},component:"input",componentProps:{placeholder:"请输入稿件简介",type:"textarea",maxlength:200}}},"extra.tags":{item:{key:"extra.tags",props:{label:"标签:"},component:"select",componentProps:{placeholder:"请选择标签",multiple:!0},lists:[]}},"extra.keywords":{item:{key:"extra.keywords",props:{label:"关键词:"},component:"tag"}},"extra.publish_timer.status":{item:{key:"extra.publish_timer.status",props:{label:"定时发布:",prop:"extra.publish_timer.status"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"已处理",value:"2"}]},rule:[{required:!0,message:"请选择是否定时发布",trigger:"change"}]},"extra.publish_timer.publish_at":{item:{key:"extra.publish_timer.publish_at",props:{label:"定时发布时间:",prop:"extra.publish_timer.publish_at"},component:"date"},rule:[{required:!0,message:"请选择定时发布时间",trigger:"change"}]},"extra.set_created_at":{item:{key:"extra.set_created_at",props:{label:"发布时间:",prop:"extra.set_created_at"},component:"date"}},"extra.video_extra.video_list":{item:{key:"extra.video_extra.video_list",props:{label:"视频:",prop:"extra.video_extra.video_list"},component:"video"},rule:[{required:!0,message:"请选择视频",trigger:"change"}]},"extra.album_extra.image_list":{item:{key:"extra.album_extra.image_list",props:{label:"图片:",prop:"extra.album_extra.image_list"},component:"table"},rule:[{validator:i,trigger:"change"}]},"extra.content":{item:{key:"extra.content",props:{label:"编辑器:",prop:"extra.content"},component:"edit"},rule:[{required:!0,message:"请输入编辑器内容",trigger:"blur"}]},author_name:{item:{key:"author_name",props:{label:"作者:"},component:"tag"}},editor_name:{item:{key:"editor_name",props:{label:"编辑:"},component:"tag"}},"extra.is_original":{item:{key:"extra.is_original",props:{label:"是否原创:",prop:"extra.is_original"},component:"radio",lists:[{label:"原创",value:"1"},{label:"来源",value:"0"}]},rule:[{required:!0,message:"请选择是否原创",trigger:"change"}]},"extra.source":{item:{key:"extra.source",props:{label:"来源:",prop:"extra.source"},component:"input",componentProps:{placeholder:"请输入来源"}},rule:[{required:!0,message:"请输入来源",trigger:"blur"}]},"extra.use_watermarks":{item:{key:"extra.use_watermarks",props:{label:"水印位置:",prop:"extra.use_watermarks"},component:"select",componentProps:{placeholder:"请选择水印位置(无表示不使用水印)"},lists:[{value:"nw",label:"左上"},{value:"north",label:"中上"},{value:"ne",label:"右上"},{value:"west",label:"左"},{value:"center",label:"中"},{value:"east",label:"右"},{value:"sw",label:"左下"},{value:"south",label:"中下"},{value:"se",label:"右下"},{value:"",label:"无"}]}},"extra.allow_comment":{item:{key:"extra.allow_comment",props:{label:"评论控制:",prop:"extra.allow_comment"},component:"radio",lists:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}]},rule:[{required:!0,message:"请选择评论控制",trigger:"change"}]},"extra.allow_share":{item:{key:"extra.allow_share",props:{label:"允许分享:",prop:"extra.allow_share"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否允许分享",trigger:"change"}]},"extra.video_type":{item:{key:"extra.video_type",props:{label:"详情样式:",prop:"extra.video_type"},component:"radio",lists:[{label:"横版",value:"1"},{label:"竖版",value:"2"}]}},"extra.trans_to_audio":{item:{key:"extra.trans_to_audio",props:{label:"同步生成语音稿件:",prop:"extra.trans_to_audio"},component:"radio",lists:[{label:"是",value:"1"},{label:"否",value:"0"}]},rule:[{required:!0,message:"请选择是否同步生成语音稿件",trigger:"change"}]},"extra.view_base_num":{item:{key:"extra.view_base_num",props:{label:"点击量:",prop:"extra.view_base_num"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}},rule:[{required:!1,validator:a,trigger:"blur"}]},"extra.praise_base_num":{item:{key:"extra.praise_base_num",props:{label:"点赞量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.post_base_num":{item:{key:"extra.post_base_num",props:{label:"转发量:"},type:"number",component:"input",componentProps:{placeholder:"请输入数值"}}},"extra.custom_rec":{item:{key:"extra.custom_rec",props:{label:"相关文稿:"},component:"scriptSelect"}},"extra.link.type":{item:{key:"extra.link.type",props:{label:"链接类型:",prop:"extra.link.type"},component:"radio",lists:[{label:"目标对象",value:"target_obj"},{label:"外链",value:"outer_link"},{label:"授权外链",value:"auth_link"},{label:"看报纸",value:"newspaper"},{label:"乡镇首页",value:"matrix",relatedLabel:"对应矩阵栏目ID"},{label:"专题",value:"topic",relatedLabel:"专题栏目ID"},{label:"多模块专题",value:"multi_model_topic",relatedLabel:"多模块专题栏目ID"},{label:"活动",value:"activity"},{label:"视频点播列表",value:"vod_list",relatedLabel:"栏目id"},{label:"多层级",value:"m_level",relatedLabel:"栏目id"},{label:"地图",value:"map",relatedLabel:"栏目id"},{label:"领导人",value:"leader",relatedLabel:"栏目id"},{label:"矩阵列表",value:"matrix_list",relatedLabel:"栏目id"},{label:"无跳转",value:"none"}]},rule:[{required:!0,message:"请选择链接类型",trigger:"change"}]},target_obj:{item:{key:"target_obj",props:{label:"链接对象:",prop:"target_obj"},component:"radio",lists:[{label:"看电视",value:"tv"},{label:"听广播",value:"radio"},{label:"爆料",value:"tip-off"},{label:"服务",value:"service"},{label:"电视+点播",value:"tv_and_vod"},{label:"扫一扫",value:"scan"},{label:"天气",value:"weather"}]},rule:[{required:!0,message:"请选择链接对象",trigger:"change"}]},"extra.link.id":{item:{key:"extra.link.id",props:{label:"ID:",prop:"extra.link.id"},component:"input",componentProps:{placeholder:"请输入ID"}},rule:{required:!0,message:"请选择链接对象",trigger:"change"}},"extra.link.url":{item:{key:"extra.link.url",props:{label:"链接地址:",prop:"extra.link.url"},component:"input",componentProps:{placeholder:"请输入链接地址"}},rule:[{required:!0,message:"请输入链接地址",trigger:"blur"}]},"extra.activity_address":{item:{key:"extra.activity_address",props:{label:"活动地址:",prop:"extra.activity_address"},component:"input",componentProps:{placeholder:"请输入活动地址"}},rule:[{required:!0,message:"请输入活动地址",trigger:"blur"}]},"extra.activity_start_time":{item:{key:"extra.activity_start_time",props:{label:"开始时间:",prop:"extra.activity_start_time"},component:"date"},rule:[{required:!0,message:"请选择活动开始时间",trigger:"change"}]},"extra.activity_end_time":{item:{key:"extra.activity_end_time",props:{label:"结束时间:",prop:"extra.activity_end_time"},component:"date"},rule:[{required:!0,message:"请选择活动结束时间",trigger:"change"}]},"extra.salary_range.min":{item:{key:"extra.salary_range.min",props:{prop:"extra.salary_range.min"},componentProps:{placeholder:"请输入最小薪资"}}},"extra.salary_range.max":{item:{key:"extra.salary_range.max",props:{prop:"extra.salary_range.max"},componentProps:{placeholder:"请输入最大薪资"}}}}),tabs:[{label:"图文",value:"news"},{label:"视频",value:"video"},{label:"图集",value:"album"},{label:"外链",value:"outer_link"}],currentTabsFromRules:{},checkStatus:!1,editorChangeValue:!1,editorOldValue:"",titleChageValue:!1,titleOldValue:"",enable_sensitive_word_filter:"0",sourceId:"",newsId:"",channel_idOld:[],editorSaveFlag:!0,from:{author_name:"",editor_name:"",target_obj:"tv",extra:{type:"news",title:"",subtitle:"",template_style:"220",cover:[],intro:"",tags:"",keywords:"",video_type:"1",publish_timer:{publish_at:"",status:"0"},set_created_at:"",activity_address:"",activity_start_time:"",activity_end_time:"",content:"",is_original:"1",source:"",use_watermarks:"",allow_comment:"0",allow_share:"1",trans_to_audio:"1",view_base_num:void 0,praise_base_num:"",post_base_num:"",custom_rec:[],video_extra:{video_list:[]},album_extra:{image_list:[]},link:{type:"target_obj",id:"",url:""},salary_range:{min:void 0,max:void 0}}},videoDialog:{title:"选择视频",show:!1},dialog:{show:!1,multiple:!1,title:"发布栏目",form:{channel_id:[]}},dialogRules:{channel_id:{required:!0,message:"请选择栏目",trigger:"change"}},cascaderOption:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",multiple:!0},channelsList:[],editorVideoLists:[],editorPerson:"",publishLoading:!1}},watch:{"from.extra.content":{handler:function(e,t){if("news"==this.from.extra.type){var a=document.getElementById("bdh").innerHTML;if(1!=a){if(e!=this.editorOldValue&&(this.editorChangeValue=!0),!this.from.extra.cover.length){var i=this.getFirstImg(e)||[];if("230"==this.from.extra.template_style||"231"==this.from.extra.template_style){var r=i.slice(0,3),o=[];r.map((function(e){var t={};t.path=e,t.status="success",o.push(t)})),this.from.extra.cover=o}else{var n=[{path:""},{path:""}],s={path:i[0],status:"success"};n.unshift(s),this.from.extra.cover=n}}}else this.$message.warning("正在图片本地化，请稍后")}}},"from.extra.album_extra":{handler:function(e,t){if(console.log("图集",e),"album"==this.from.extra.type){var a=e.image_list||[];if("230"==this.from.extra.template_style||"231"==this.from.extra.template_style){var i=a.slice(0,3);this.from.extra.cover=i.map((function(e){return e.status="success",delete e.sort,e}))}else{var r=[{path:""},{path:""}],o={path:a[0].path,status:"success"};r.unshift(o),this.from.extra.cover=r}}},deep:!0},"from.extra.title":{handler:function(e,t){e!=this.titleOldValue&&(this.titleChageValue=!0)}}},computed:{actionUrl:function(){return this.imgurl},scriptsId:function(e){var t=e.$route;return t.query.id||this.id},disabled:function(e){var t=e.$route;return"news"===this.typeDetails?this.disabledNews:"1"===t.query.disabled||null!=this.id},mediaArticle:function(e){var t=e.$route;return"1"===t.query.media},onlyPublish:function(e){var t=e.$route;return t.query.channelId},isEdit:function(e){var t=e.scriptsId;return null!=t},visitedViews:function(){return this.$store.state.tagsView.visitedViews},viewBaseInterval:function(e){var t,a,i=e.$store.state.user.u_info,r=i.site.extra||{},o=Number((null===(t=r.random_view_range)||void 0===t?void 0:t.max)||0)||1/0,n=Number((null===(a=r.random_view_range)||void 0===a?void 0:a.min)||0);return{min:n,max:o}},basePlaceholder:function(e){var t=e.viewBaseInterval,a=t.max,i=t.min;return a===1/0?"请输入大于".concat(i,"的的正整数"):"请输入".concat(i,"-").concat(a,"的正整数")},watermark:function(e){var t=e.$store.state.user.u_info,a=t.site.extra||{};return a.watermark||""}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,i,r,o,n,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("路由信息",e.$route.query),a=JSON.parse(localStorage.getItem("addNews")),Array.isArray(a)||localStorage.removeItem("addNews"),i=e.$store.state.user.u_info.site.name,r=e.$store.state.user.u_info,console.log("站点信息",e.$store.state.user.u_info),e.enable_sensitive_word_filter=r.site.extra.enable_sensitive_word_filter||"0",i.indexOf("青田")>-1&&(o={label:"早播报",value:"morning_news",relatedLabel:"栏目id"},e.formOptions["extra.link.type"].item.lists.splice(11,0,o)),n=document.getElementById("bdh"),n.innerHTML=0,e.isEdit&&!e.disabled&&(s=setInterval((function(){e.getEditorPerson()}),8e3),e.$once("hook:beforeDestroy",(function(){clearInterval(s)}))),e.getChannels(),t.next=13,e.getLabels();case 13:return t.next=15,e.getList();case 15:e.handleTabChange(),e.getproductList(),l=setInterval((function(){e.editorSaveFlag&&e.editorSelfSave()}),3e4),e.$once("hook:beforeDestroy",(function(){clearInterval(l)}));case 19:case"end":return t.stop()}}),t)})))()},methods:{parseObj:function(e){var t=e.key.split("."),a=t.reduce((function(e,t){return e[t]}),this.from);return"select"===e.component&&e.componentProps.multiple?a&&a.toString().split(","):a},delLocalStorage:function(){var e=this.scriptsId||this.id;if(e){var t=JSON.parse(localStorage.getItem("editNews"))||[];t.map((function(a,i){a.id==e&&t.splice(i,1)})),localStorage.setItem("editNews",JSON.stringify(t))}else{var a=this.$store.state.user.u_info.site_id,i=JSON.parse(localStorage.getItem("addNews"))||[];i.map((function(e,t){e.siteId==a&&i.splice(t,1)})),console.log("list",i),localStorage.setItem("addNews",JSON.stringify(i))}},getproductList:function(){var e=this;Object(p["ic"])({}).then((function(t){var a=t.data.find((function(e){return"app"==e.type}));e.sourceId=a.source_id||""}))},getFirstImg:function(e){var t=e,a=[];return t.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(function(e,t){a.push(t)})),null!=a&&a.length>0?a:""},editorSelfSave:function(){var e=this;if("news"===this.from.extra.type&&(this.from.extra.title||this.from.extra.content)&&!this.disabled)if(null==this.scriptsId&&null==this.id){var t=this.$store.state.user.u_info.site_id,a={siteId:t,title:this.from.extra.title,content:this.from.extra.content};if(localStorage.getItem("addNews")){var i=JSON.parse(localStorage.getItem("addNews")),r=i.some((function(e){return e.siteId==t}));r?i.map((function(a){a.siteId==t&&(a.title=e.from.extra.title,a.content=e.from.extra.content)})):i.push(a),localStorage.setItem("addNews",JSON.stringify(i))}else{var o=[];o.push(a),localStorage.setItem("addNews",JSON.stringify(o))}}else if(this.editorChangeValue||this.titleChageValue){var n=[],s=this.scriptsId||this.id,l={id:this.scriptsId||this.id,title:this.from.extra.title,content:this.from.extra.content};if(localStorage.getItem("editNews")){var m=JSON.parse(localStorage.getItem("editNews")),u=m.some((function(e){return e.id==s}));u?m.map((function(t){t.id==s&&(t.title=e.from.extra.title,t.content=e.from.extra.content)})):m.push(l),localStorage.setItem("editNews",JSON.stringify(m))}else n.push(l),localStorage.setItem("editNews",JSON.stringify(n))}},userNewsLocalStorgeTips:function(e){var t=this;this.$confirm("是否使用上次本地缓存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"zZindex"}).then((function(){t.from.extra.title=e.title,t.from.extra.content=e.content})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleInput:function(e,t){var a=t.key.split("."),i=t.type||"string";"number"===i&&(e=parseInt(e)||""),a.reduce((function(i,r){if(r!==a[a.length-1])return i[r];i[r]="select"===t.component&&t.componentProps.multiple?e.join():e}),this.from)},handleChangeVideo:function(){this.disabled||(this.videoDialog.show=!0)},videoDialogControl:function(e){this.videoDialog.show=!1,this.from.extra.video_extra.video_list=[e]},initFrom:function(){var e=this,t=[],a=this.formOptions["extra.template_style"].item.lists.find((function(t){return t.value===e.from.extra.template_style}));this.formOptions["extra.cover"].item.componentProps.count=(null===a||void 0===a?void 0:a.count)||1;var i=["extra.title","extra.subtitle","extra.template_style","extra.cover","extra.intro","extra.tags","extra.keywords","extra.set_created_at"];"news"===this.typeDetails&&i.push("extra.publish_timer.status"),"news"===this.typeDetails&&"1"===this.from.extra.publish_timer.status&&i.push("extra.publish_timer.publish_at");var r=["author_name","extra.is_original","extra.allow_comment","extra.allow_share","extra.trans_to_audio","extra.view_base_num","extra.praise_base_num","extra.post_base_num"];switch("0"===this.from.extra.is_original&&r.splice(2,0,"extra.source"),this.from.extra.type){case"news":t=[].concat(i,["extra.content","extra.custom_rec","extra.use_watermarks"],r);break;case"video":t=[].concat(i,["extra.video_extra.video_list","extra.custom_rec","extra.video_type"],r);break;case"album":t=[].concat(i,["extra.album_extra.image_list"],r);break;case"outer_link":t=[].concat(i,["extra.link.type","extra.view_base_num","extra.praise_base_num","extra.post_base_num","extra.allow_share"]);var o=this.from.extra.link.type;if("target_obj"===o)t.push("target_obj");else if(["outer_link","auth_link","newspaper"].includes(o))t.push("extra.link.url");else if("activity"===o)t.push("extra.activity_address","extra.activity_start_time","extra.activity_end_time");else if("none"!==o){var n=this.formOptions["extra.link.type"].item.lists.find((function(e){return e.value===o}));this.formOptions["extra.link.id"].item.props.label="".concat(n.relatedLabel,":"),this.formOptions["extra.link.id"].rule.message="请输入".concat(n.relatedLabel),t.push("extra.link.id")}break}return t},enterDialog:function(){var e=this;this.publishLoading||this.$refs.dialogForm.validate((function(t){t&&(e.publishLoading=!0,e.handleSave("保存并发布成功",(function(){e.handleReturn()})).finally((function(){e.publishLoading=!1})))}))},cancelDialog:function(){this.dialog.show=!1,null==this.scriptsId&&null==this.id?this.dialog.form.channel_id=[]:this.dialog.form.channel_id=this.channel_idOld},handleReturn:function(){var e=this.$route.fullPath,t=this.visitedViews.find((function(t){return t.fullPath===e})),a=this.$route.query,i=a.redirect,r=void 0===i?"All-media":i,o=a.channelId,n=a.father;this.$router.push({name:r,query:o?Object.assign({id:o},n?{father:n}:{}):{}}),this.$store.dispatch("tagsView/delView",t)},delEditorVideo:function(e){var t=document.createElement("div");t.innerHTML=e;var a=Array.from(t.querySelectorAll("video"));return a.length?this.editorVideoLists.filter((function(e){return a.find((function(t){return t.title===e.title&&t.cover===e.poster}))})):[]},handleSave:function(e,t){var a=this,i=this.$route.query.channelId,r=i?[i]:this.dialog.form.channel_id,o=this.initFrom(),n=this.from.extra.type,l="script"===this.typeDetails?this.scriptsId:this.id;this.newsId&&(l=this.newsId);var m,u,c=this.formOptions["extra.cover"].item.componentProps.count,d=Object(s["a"])(Object(s["a"])({},o.reduce((function(e,t){return m=t.split("."),m[1]?(u=a.from[m[0]][m[1]],e[m[0]][m[1]]="cover"===m[1]?u.slice(0,c):u):e[m[0]]=a.from[m[0]],e}),{extra:{type:n}})),{},{channels:r.join()});if("news"===this.typeDetails&&delete d.channels,d.extra.link&&"activity"===d.extra.link.type&&(d.extra.link.url=d.extra.activity_address),d.extra.link&&"target_obj"===d.extra.link.type&&(d.extra.link=Object(s["a"])(Object(s["a"])({},d.extra.link),{},{type:d.target_obj})),delete d.target_obj,delete d.extra.activity_address,"news"===d.extra.type&&(d.extra.video_extra={video_list:this.delEditorVideo(d.extra.content)}),this.checkStatus&&(d.status=1),console.log("obj",d),"news"==this.from.extra.type&&"1"==this.enable_sensitive_word_filter){var _={text:this.from.extra.content,sourceId:this.sourceId,terminalType:6};Object(p["H"])(_).then((function(i){var r=i.data,o=a.formatFilterType(r.filterType);if(r.filterType){var n=r.keywords[0];a.$confirm("您所提交的内容中包含".concat(o,"类敏感词汇”").concat(n,"“，是否确认继续提交？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.fetchAcation(e,t,l,d)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}else a.fetchAcation(e,t,l,d)})).catch((function(){a.fetchAcation(e,t,l,d)}))}else this.fetchAcation(e,t,l,d)},fetchAcation:function(e,t,a,i){var r=this,o="script"===this.typeDetails?Object(u["o"])(a,i):Object(u["l"])(a,i);return o.then((function(a){r.$message.success(e),r.dialog.show=!1,t&&t(a)}))},formatFilterType:function(e){var t={0:"正常 ",1:"政治",2:"色情",3:"涉毒违法",4:"谩骂",5:"暴恐",6:"综合",7:"网络引流",8:"综合",9:"性感",10:"灌水",11:"垃圾信息",12:"无意义",13:"自定义"};return t[e]||""},checkSensit:function(){var e={text:this.from.extra.content,sourceId:this.sourceId,terminalType:6},t=null;return Object(p["H"])(e).then((function(e){t=e.data})),t},handleDraft:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){t?e.handleSave("保存草稿成功!",(function(t){e.newsId=t.data.id,"news"===e.from.extra.type&&e.delLocalStorage(),e.editorSaveFlag=!1})):e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handlePreview:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){t?e.handleSave("保存成功",(function(t){var a=t.data;a=void 0===a?{}:a;var i=a.id;i&&e.$router.push({name:"Preview",query:{id:i,type:"scripts"}}),"news"===e.from.extra.type&&e.delLocalStorage()})):e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handlePublish:function(){var e=this,t=document.getElementById("bdh").innerHTML;1!=t?this.$refs.submitForm.validate((function(t,a){if(t)if("script"===e.typeDetails){e.checkStatus=!0;var i=e.$route.query.channelId;if(i)return e.handleSave("保存并发布成功",(function(){"news"===e.from.extra.type&&e.delLocalStorage(),e.handleReturn()}));e.dialog.show=!0}else"news"===e.typeDetails&&e.handleSave("保存草稿成功!",(function(){"news"===e.from.extra.type&&e.delLocalStorage(),e.$emit("refresh"),e.handleClose()}));else e.$message.warning(Object.keys(a).map((function(e){return a[e][0].message})).join())})):this.$message.warning("正在图片本地化，请稍后")},handleClose:function(){this.$emit("update:visible",!1)},handleTabChange:function(e,t){var a=this,i=this.initFrom();this.currentTabsFromRules=i.reduce((function(e,t){return Object(s["a"])(Object(s["a"])({},e),{},Object(n["a"])({},t,a.formOptions[t].rule))}),{}),this.$nextTick((function(){var t;"tab"===e&&Object.assign(a.from.extra,{video_extra:{video_list:[]}}),null===(t=a.$refs.submitForm)||void 0===t||t.clearValidate()})),"outer_link"==this.from.extra.type&&t&&(this.from.extra.template_style="240")},changeVideoList:function(e){this.editorVideoLists.push(e)},getLabels:function(){var e=this;return Object(u["J"])({page:1,pageSize:9999}).then((function(t){var a=t.data;e.formOptions["extra.tags"].item.lists=a.map((function(e){return{label:e.name,value:e.id.toString()}}))}))},getChannels:function(){var e=this;Object(p["Db"])({with_special_channels:"topic"}).then((function(t){var a=["product","topic","broadcast","radio_replay","radio_channel","radio_live","tv_channel","tv_replay","tv_live"];e.channelsList=t.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{disabled:a.includes(e.type)})}))}))},getList:function(){var e=this,t=null;if(null!=this.scriptsId||null!=this.id)return t="script"===this.typeDetails?Object(u["O"])(this.scriptsId):Object(u["M"])(this.id),(this.fetchSuggestions?this.fetchSuggestions():t).then((function(t){var a,i,r,n,s,l,m,u=t.extra,p=(null===u||void 0===u?void 0:u.link)&&(null===u||void 0===u||null===(a=u.link)||void 0===a?void 0:a.type)||"",c="";if(e.formOptions.target_obj.item.lists.find((function(e){return e.value===p}))&&(c=p,p="target_obj"),console.log("extra",u),e.editorOldValue=u.content,e.titleOldValue=u.title,e.from={author_name:t.author_name,editor_name:t.editor_name,target_obj:c,extra:{type:null===u||void 0===u?void 0:u.type,title:null===u||void 0===u?void 0:u.title,subtitle:null===u||void 0===u?void 0:u.subtitle,template_style:(null===u||void 0===u?void 0:u.template_style)||"220",cover:null===u||void 0===u?void 0:u.cover,intro:null===u||void 0===u?void 0:u.intro,tags:null===u||void 0===u?void 0:u.tags,keywords:u.keywords,video_type:(u.video_type||"1").toString(),publish_timer:{status:(null!==(i=null===u||void 0===u||null===(r=u.publish_timer)||void 0===r?void 0:r.status)&&void 0!==i?i:"0").toString(),publish_at:null!==(n=null===u||void 0===u||null===(s=u.publish_timer)||void 0===s?void 0:s.publish_at)&&void 0!==n?n:""},set_created_at:u.set_created_at,activity_start_time:u.activity_start_time,activity_end_time:u.activity_end_time,activity_address:u.link&&u.link.url||"",content:u.content,is_original:(u.is_original||"1").toString(),source:u.source,use_watermarks:u.use_watermarks||"",allow_comment:(u.allow_comment||"0").toString(),allow_share:(u.allow_share||"1").toString(),trans_to_audio:(u.trans_to_audio||"1").toString(),view_base_num:u.view_base_num,praise_base_num:u.praise_base_num,post_base_num:u.post_base_num,custom_rec:u.custom_rec||[],video_extra:{video_list:u.video_extra&&u.video_extra.video_list||[]},album_extra:{image_list:u.album_extra&&u.album_extra.image_list||[]},link:{type:p,id:(null===u||void 0===u?void 0:u.link)&&(null===u||void 0===u?void 0:u.link.id)||"",url:(null===u||void 0===u?void 0:u.link)&&(null===u||void 0===u?void 0:u.link.url)||""},salary_range:{min:(null===(l=u.salary_range)||void 0===l?void 0:l.min)||void 0,max:(null===(m=u.salary_range)||void 0===m?void 0:m.max)||void 0}}},e.editorVideoLists=Object(o["a"])(u.video_extra&&u.video_extra.video_list||[]),e.disabled||"script"!==e.typeDetails||(e.dialog.form.channel_id=t.news.map((function(e){return e.channel_id})),e.channel_idOld=t.news.map((function(e){return e.channel_id}))),"news"===e.from.extra.type&&!e.disabled&&localStorage.getItem("editNews")){var d=JSON.parse(localStorage.getItem("editNews")),_=e.scriptsId||e.id,v=d.find((function(e){return e.id==_}));v&&e.userNewsLocalStorgeTips(v)}}));var a=this.viewBaseInterval.max,i=this.viewBaseInterval.min;if(this.from.extra.view_base_num=a&&a!=1/0?Math.floor(Math.random()*(a-i+1)+i):0,localStorage.getItem("addNews")&&!this.disabled){var r=JSON.parse(localStorage.getItem("addNews")),n=this.$store.state.user.u_info.site_id,s=r.find((function(e){return e.siteId==n}));s&&this.userNewsLocalStorgeTips(s)}},getEditorPerson:function(){var e=this,t=this.scriptsId;Object(u["H"])({id:t,type:"script"}).then((function(t){e.editorPerson=t.length<2?"":t.join()}))}}},h=f,x=(a("ea57"),a("2877")),g=Object(x["a"])(h,i,r,!1,null,null,null);t["default"]=g.exports},"6fd7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-watch-column"},[a("el-form",{ref:"queryForm",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"success",size:"mini"},on:{click:e.handleReturn}},[e._v(" 返回上一级 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"新闻ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"新闻名称",align:"center",width:"140",prop:"title","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticClass:"watch-detail-btn",attrs:{type:"text"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"新闻类型",align:"center",prop:"type"}}),a("el-table-column",{attrs:{label:"栏目ID",align:"center",prop:"channel_id","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"栏目名称",align:"center",prop:"channel_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"评论控制",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.changeCommentAndShare(t.row,"allow_comment")}},model:{value:t.row.allow_comment,callback:function(a){e.$set(t.row,"allow_comment",a)},expression:"scope.row.allow_comment"}},e._l(e.commentOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"分享控制",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.changeCommentAndShare(t.row,"allow_share")}},model:{value:t.row.allow_share,callback:function(a){e.$set(t.row,"allow_share",a)},expression:"scope.row.allow_share"}},e._l(e.shareOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"small"},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.statusOptions.filter((function(e){return""!==e.value})),(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:"shjd",label:"审核进度"},on:{fatherMethod:function(a){return e.watchProgress(t.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return e.handleListDelete(t.row)}}}),1===t.row.status?a("Iconbutton",{attrs:{icontype:"ckxq",label:"查看详情"},on:{fatherMethod:function(a){return e.handleWatch(t.row)}}}):e._e(),1!==t.row.status?a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return e.handleEdit(t.row)}}}):e._e(),a("Iconbutton",{attrs:{icontype:"czjl",label:"操作记录"},on:{fatherMethod:function(a){return e.handleHistory(t.row)}}})],1)]}}])})],1),a("el-dialog",{attrs:{width:"400px",title:"审批进度",visible:e.approval.show},on:{"update:visible":function(t){return e.$set(e.approval,"show",t)}}},[a("el-steps",{attrs:{direction:"vertical",active:e.approval.active,space:100}},e._l(e.approval.lists,(function(t,i){return a("el-step",{key:t.sort,attrs:{title:t.title,description:t.description}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("div",[e._v(e._s(0===i?"提交人":"审核人")+": "+e._s(t.name))]),t.remark?a("p",[e._v("拒绝原因: "+e._s(t.remark))]):e._e()])])})),1)],1),e.dialog.show?a("el-dialog",{attrs:{width:"1200px",title:e.dialog.title,top:"20px",visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("scripts-details",{staticStyle:{padding:"10px",margin:"0"},attrs:{typeDetails:"news",id:e.dialog.id,visible:e.dialog.show,zIndex:e.dialog.disabled?900:3e3,disabledNews:e.dialog.disabled},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)},refresh:e.refresh}})],1):e._e(),e.history.show?a("el-dialog",{attrs:{width:"700px",title:"操作记录",visible:e.history.show},on:{"update:visible":function(t){return e.$set(e.history,"show",t)}}},[a("version-history",{attrs:{id:e.history.id,type:"news"}})],1):e._e()],1)},r=[],o=a("ade3"),n=a("5530"),s=(a("d81d"),a("b0c0"),a("d3b7"),a("7db0"),a("c740"),a("ac1f"),a("1276"),a("a15b"),a("4de4"),a("caad"),a("2532"),a("25f0"),a("99af"),a("cc48")),l=a("0fea"),m=a("1d6e"),u=a("9d3e"),p=a("5fe8"),c={components:{newDetail:m["a"],scriptsDetails:p["default"],VersionHistory:u["a"]},data:function(){return{statusOptions:[{label:"全部",value:""},{label:"待审核",value:0},{label:"已上线",value:1},{label:"已下线",value:2},{label:"待定时发布",value:5}],tableData:[],typeOptions:[{label:"全部",value:""},{label:"新闻",value:"news"},{label:"图集",value:"album"},{label:"视频",value:"video"},{label:"外链",value:"outer_link"}],commentOption:[{label:"先审后发",value:"0"},{label:"先发后审",value:"1"},{label:"禁止评论",value:"2"}],shareOption:[{label:"允许",value:"1"},{label:"不允许",value:"2"}],loading:!1,approval:{show:!1,active:"",lists:[]},dialog:{title:"查看详情",show:!1,id:"",disabled:!1},history:{show:!1,id:""},userLists:[]}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},created:function(){this.getList(),this.getUserList()},methods:{getUserList:function(){var e=this;Object(l["Yb"])({model:"User",page:1,pageSize:9999}).then((function(t){var a=t.data;e.userLists=a.map((function(e){var t=e.id,a=e.name;return{id:t,name:a}}))}))},getList:function(){var e=this,t=this.$route.query.id;this.loading=!0,Object(s["O"])(t).then((function(t){e.tableData=(t.news||[]).map((function(a){var i,r=e.typeOptions.find((function(e){return a.type===e.value})),o=e.statusOptions.find((function(e){return a.status===e.value}));return Object(n["a"])(Object(n["a"])({},a),{},{channel_name:(null===(i=(t.channel||[]).find((function(e){return e.id===a.channel_id})))||void 0===i?void 0:i.name)||"",type:r&&r.label||"",statusLabel:o&&o.label||"",allow_comment:a.extra.allow_comment,allow_share:a.extra.allow_share})}))})).finally((function(){e.loading=!1}))},handleReturn:function(){var e=this.$route.fullPath,t=this.visitedViews.find((function(t){return t.fullPath===e})),a=this.$route.query.redirect,i=void 0===a?"All-media":a;this.$router.push({name:i}),this.$store.dispatch("tagsView/delView",t)},handleListDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除这条新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["y"])(a).then((function(){t.$message({message:"删除成功",type:"success"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},changeCommentAndShare:function(e,t){var a=this,i=e.id;Object(s["l"])(i,{extra:Object(o["a"])({},t,e[t])}).then((function(e){var t=e.message,i=e.statu_code;i?a.$message({message:t,type:"error"}):a.$message({message:"切换成功!",type:"success"}),a.getList()}))},watchProgress:function(e){var t=this,a=e.extra.multi_review||[];if(0===a.length)return this.$message.warning("暂无审批进度");var i=[{label:"待审核",value:0},{label:"已审核",value:1},{label:"已拒绝",value:2}];this.approval={show:!0,active:a.findIndex((function(e){return 1===e.status||2===e.status}))+1,lists:a.map((function(e){var a,r=e.reviewer_ids.split(",");return Object(n["a"])(Object(n["a"])({},e),{},{name:t.userLists.filter((function(t){return e.user_id?t.id===e.user_id:r.includes(t.id.toString())})).map((function(e){return e.name})).join(),title:"".concat(null===(a=i.find((function(t){return e.status===t.value})))||void 0===a?void 0:a.label,"   ").concat(e.time||"")})}))}},handleWatch:function(e){var t=e.id;this.dialog={title:"查看详情",show:!0,id:t,disabled:!0}},handleEdit:function(e){var t=e.id;this.dialog={title:"编辑详情",show:!0,id:t,disabled:!1}},changeStatus:function(e){var t=this,a=e.id,i=e.status;Object(s["n"])({ids:a,status:i}).then((function(){t.$message({message:"修改成功",type:"success"}),t.getList()}))},refresh:function(){this.getList()},handleHistory:function(e){var t=e.id;this.history={show:!0,id:t}}}},d=c,_=a("2877"),v=Object(_["a"])(d,i,r,!1,null,"0e7d918d",null);t["default"]=v.exports},9620:function(e,t,a){},"9d3e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-version-history"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"created_at",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"user.name",label:"姓名","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{prop:"operation",label:"操作记录","show-overflow-tooltip":"",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleWatch(t.row)}}},[e._v(" 查看详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getHistory}}),e.dialog.show?a("el-dialog",{attrs:{width:"1200px",top:"20px",title:e.dialog.title,visible:e.dialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("scripts-details",{staticStyle:{padding:"10px",margin:"0"},attrs:{id:e.id,visible:e.dialog.show,typeDetails:e.type,"fetch-suggestions":e.fetchSuggestions,disabled:!0,disabledNews:!0},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}})],1):e._e()],1)},r=[],o=a("5530"),n=(a("a9e3"),a("d3b7"),a("cc48")),s=a("1d6e"),l=a("5fe8"),m={name:"versionHistory",components:{NewDetail:s["a"],scriptsDetails:l["default"]},props:{type:{type:String,default:"script"},id:{type:Number,required:!0}},data:function(){return{tableData:[],total:0,loading:!1,queryParams:{page:1,pageSize:10},dialog:{title:"查看详情",show:!1,id:""},fetchSuggestions:function(){return new Promise((function(e){return e()}))}}},methods:{getHistory:function(){var e=this,t=this.id,a=this.type;this.loading=!0,Object(n["I"])(Object(o["a"])({item_type:a,item_id:t},this.queryParams)).then((function(t){var a=t.data,i=t.total;e.tableData=a,e.total=i})).finally((function(){e.loading=!1}))},handleWatch:function(e){var t=e.extra;this.fetchSuggestions=function(){return new Promise((function(e){e(t.item)}))},this.dialog={title:"查看详情",show:!0}}},created:function(){this.getHistory()}},u=m,p=(a("9e1d"),a("2877")),c=Object(p["a"])(u,i,r,!1,null,"c9ac419c",null);t["a"]=c.exports},"9e1d":function(e,t,a){"use strict";a("9620")},aa5f:function(e,t,a){"use strict";a("460d")},ea57:function(e,t,a){"use strict";a("edd9")},edd9:function(e,t,a){}}]);