(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a74307de"],{"2ee7":function(t,e,a){"use strict";a("363e")},"363e":function(t,e,a){},f372:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topic"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"所属产品："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}},t._l(t.productList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"对外展示："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.queryParams.isShow,callback:function(e){t.$set(t.queryParams,"isShow",e)},expression:"queryParams.isShow"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"是否启用："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.initcondition}},[t._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:t.adddata}},[t._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},border:"",data:t.dataList}},[a("el-table-column",{attrs:{label:"话题id",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"话题背景图",align:"center",prop:"name","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.logo,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"话题名称",align:"center",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"话题简介",align:"center",prop:"intro","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"对外展示",align:"center",prop:"isShow","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.isShow,callback:function(a){t.$set(e.row,"isShow",a)},expression:"scope.row.isShow"}},t._l(t.statusoptions,(function(e){return""!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)]}}])}),a("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return t.statuschange(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}},t._l(t.statusoptions,(function(e){return""!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createdTime","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"200px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Iconbutton",{attrs:{icontype:"xg",label:"修改"},on:{fatherMethod:function(a){return t.editdata(e.row)}}}),a("Iconbutton",{attrs:{icontype:"sc",label:"删除"},on:{fatherMethod:function(a){return t.handleDelete(e.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.limit},on:{"update:page":function(e){return t.$set(t.queryParams,"page",e)},"update:limit":function(e){return t.$set(t.queryParams,"limit",e)},pagination:t.getList}}),a("el-dialog",{attrs:{width:"500px","close-on-click-modal":!1,title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"话题名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"背景图",prop:"logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.VUE_APP_BASE_API+"/api/upload/image",headers:t.importHeaders,name:"image","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"话题简介",prop:"intro"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autocomplete:"off",placeholder:"请输入简介"},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"话题排序",prop:"sort"}},[a("el-input-number",{attrs:{controls:!1,autocomplete:"off"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{"el-form-item":"","label-width":"120px",label:"是否启用",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusoptions,(function(e){return""!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)],1),a("el-form-item",{attrs:{"el-form-item":"","label-width":"120px",label:"是否对外展示",prop:"isShow"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.isShow,callback:function(e){t.$set(t.form,"isShow",e)},expression:"form.isShow"}},t._l(t.statusoptions,(function(e){return""!=e.value?a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}}):t._e()})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:t.closeDialog}},[t._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:t.enterDialog}},[t._v("确 定")])],1)],1)],1)},i=[],l=(a("4de4"),a("d3b7"),a("e9c4"),a("0fea")),s=a("13cc"),r={name:"topic",data:function(){var t=sessionStorage.getItem("token");return{importHeaders:{Authorization:t},queryParams:{page:1,limit:10,sourceId:0,isShow:"",status:""},product_id:0,productList:[],loading:!0,dataList:[],total:0,statusoptions:[{value:"",label:"全部"},{value:1,label:"是"},{value:2,label:"否"}],dialogFormVisible:!1,form:{},rules:{name:[{required:!0,message:"请输入话题姓名",trigger:"blur"}],logo:[{required:!0,message:"请选择背景图",trigger:"blur"}],intro:[{required:!0,message:"请输入简介",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]},dialogType:"add",dialogTitle:"",multipleSelection:[]}},computed:{VUE_APP_BASE_API:function(){return this.imgurl2}},watch:{product_id:function(t){this.queryParams.sourceId=this.productList.filter((function(e){return e.id==t}))[0].source_id||0,this.getList()}},created:function(){this.getproductList(),this.initForm()},methods:{getproductList:function(){var t=this;Object(l["mc"])({}).then((function(e){t.productList=e.data,t.product_id=t.productList[0].id}))},forceUpdate:function(){this.$forceUpdate()},handleAvatarSuccess:function(t,e,a){this.form.logo=t.path,this.$forceUpdate()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},initcondition:function(){this.queryParams.page=1,this.queryParams.limit=10,this.queryParams.isShow="",this.queryParams.status=""},handleQuery:function(){this.loading=!0,this.queryParams.page=1,this.getList()},getList:function(){var t=this,e=JSON.parse(JSON.stringify(this.queryParams));Object(s["C"])(e).then((function(e){t.loading=!1,t.dataList=e.data.list,t.total=e.data.totalCount}))},statuschange:function(t){var e=this;Object(s["v"])(t).then((function(t){e.$message({message:"修改成功",type:"success"}),e.getList()}))},adddata:function(){this.initForm(),this.dialogTitle="新增话题",this.dialogType="add",this.dialogFormVisible=!0},initForm:function(){this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.form={logo:"",name:"",intro:"",sort:0,isShow:1,status:1,sourceId:this.queryParams.sourceId}},editdata:function(t){this.initForm(),this.dialogTitle="编辑话题",this.dialogType="edit",this.form=JSON.parse(JSON.stringify(t)),this.dialogFormVisible=!0},handleDelete:function(t){var e=this,a={};a.id=t.id,a.sourceId=this.queryParams.sourceId,this.$confirm("此操作将永久删除ID为"+t.id+"的话题, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["m"])(a).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1},enterDialog:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e)if("edit"==t.dialogType){var a=t.form;Object(s["v"])(a).then((function(e){t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}else{a=JSON.parse(JSON.stringify(t.form));Object(s["g"])(a).then((function(e){t.$message({message:"新建成功",type:"success"}),t.dialogFormVisible=!1,t.getList()}))}}))}}},n=r,u=(a("2ee7"),a("2877")),c=Object(u["a"])(n,o,i,!1,null,null,null);e["default"]=c.exports}}]);