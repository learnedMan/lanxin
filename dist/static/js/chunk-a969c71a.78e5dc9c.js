(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a969c71a"],{"0191":function(e,t,a){"use strict";a.d(t,"r",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"i",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"u",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return p})),a.d(t,"w",(function(){return m})),a.d(t,"s",(function(){return f})),a.d(t,"t",(function(){return h})),a.d(t,"x",(function(){return b})),a.d(t,"j",(function(){return g})),a.d(t,"f",(function(){return v})),a.d(t,"c",(function(){return w})),a.d(t,"h",(function(){return k})),a.d(t,"v",(function(){return y})),a.d(t,"n",(function(){return O})),a.d(t,"d",(function(){return D})),a.d(t,"b",(function(){return x})),a.d(t,"m",(function(){return j})),a.d(t,"q",(function(){return T})),a.d(t,"e",(function(){return I})),a.d(t,"p",(function(){return S})),a.d(t,"o",(function(){return _}));var n=a("b775"),i=a("b60c"),r=a("0385");a("2ab73");function o(e){return Object(n["a"])({url:"/api/refuseReasons",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/api/refuseReasons",method:"post",data:e})}function s(e,t){return Object(n["a"])({url:"/api/refuseReasons/".concat(e),method:"PATCH",data:t})}function c(e){return Object(n["a"])({url:"/api/refuseReasons/".concat(e),method:"delete"})}function u(){return Object(i["a"])({url:"/intranet/querySourceIdData",method:"get"})}function d(e){return Object(i["a"])({url:"/internal/feedback/pageList",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/internal/feedback/info",method:"get",params:e})}function m(e){return Object(i["a"])({url:"/internal/feedback/reply",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/internal/report/pageList",method:"post",data:e})}function h(e){return Object(i["a"])({url:"/internal/report/info",method:"get",params:e})}function b(e){return Object(i["a"])({url:"/internal/report/reply",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/new/intranet/comment/listConsole",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/new/intranet/comment/manage/".concat(e),method:"get"})}function w(e){return Object(r["a"])({url:"/new/intranet/comment/operate",method:"post",data:e})}function k(e){return Object(r["a"])({url:"/new/intranet/comment/noTalkUser",method:"post",data:e})}function y(e){return Object(r["a"])({url:"/new/intranet/comment/cancelNoTalkUser",method:"post",data:e})}function O(e){return Object(i["a"])({url:"/internal/baoliao/getList",method:"post",data:e})}function D(e){return Object(i["a"])({url:"/internal/baoliao/modifyState",method:"post",data:e})}function x(e){return Object(i["a"])({url:"/internal/baoliao/batchModifyState",method:"post",data:e})}function j(e){return Object(i["a"])({url:"/internal/baoliao/getData",method:"post",params:e})}function T(e){return Object(i["a"])({url:"/internal/social/post/list",method:"post",data:e})}function I(e){return Object(i["a"])({url:"/internal/social/post/verify",method:"post",data:e})}function S(e){return Object(i["a"])({url:"/internal/social/post/Info",method:"post",params:e})}function _(e){return Object(n["a"])({url:"/api/operationLogs",method:"get",params:e})}},2880:function(e,t,a){},"7d9b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-comment-verify",style:{padding:e.newsId?0:"30px"}},[a("search",{ref:"search",attrs:{lists:e.searchLists},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("div",{attrs:{slot:"action"},slot:"action"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:e.resetSearch}},[e._v("重置")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"primary"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"success",disabled:e.disabledBatchAction},on:{click:function(t){return e.batchAgreeOrRefused("approve")}}},[e._v("批量通过")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{size:"mini",type:"warning",disabled:e.disabledBatchAction},on:{click:function(t){return e.batchAgreeOrRefused("reject")}}},[e._v("批量拒绝")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.tableDead,(function(t,n){return a("el-table-column",e._b({key:n,scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.prop])+" ")]}}],null,!0)},"el-table-column",[t,{align:"center"}],!1))})),a("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"verify-table-action"},[a("Iconbutton",{attrs:{icontype:t.row.noTalkUser?"hfjy":"jy",label:t.row.noTalkUser?"取消禁言":"禁言"},on:{fatherMethod:function(a){return e.handleMsgAction(t.row)}}}),1!=t.row.status?a("Iconbutton",{attrs:{icontype:"shtg",label:"通过"},on:{fatherMethod:function(a){return e.handleAgreeOrRefused(t.row,"approve")}}}):e._e(),2!=t.row.status?a("Iconbutton",{attrs:{icontype:"shjj",label:"拒绝"},on:{fatherMethod:function(a){return e.handleAgreeOrRefused(t.row,"reject")}}}):e._e()],1)]}}])})],2),a("div",{staticClass:"verify-page"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.page.total>0,expression:"page.total > 0"}],attrs:{total:e.page.total,page:e.search.pageNo,limit:e.search.pageSize},on:{"update:page":function(t){return e.$set(e.search,"pageNo",t)},"update:limit":function(t){return e.$set(e.search,"pageSize",t)},pagination:e.getList}})],1),a("el-dialog",{attrs:{width:"500px",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"reply",attrs:{size:"mini",model:e.dialog.reply,rules:e.dialog.replyRules}},[a("el-form-item",{attrs:{"label-width":"120px",label:"回复昵称",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:"请输入昵称"},model:{value:e.dialog.reply.nikeName,callback:function(t){e.$set(e.dialog.reply,"nikeName",t)},expression:"dialog.reply.nikeName"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"回复内容",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autocomplete:"off"},model:{value:e.dialog.reply.remark,callback:function(t){e.$set(e.dialog.reply,"remark",t)},expression:"dialog.reply.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{width:"500px",title:e.addDialog.title,visible:e.addDialog.show},on:{"update:visible":function(t){return e.$set(e.addDialog,"show",t)}}},[a("el-dialog",{attrs:{width:"30%",title:"选择新闻",visible:e.innerDialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.innerDialog,"show",t)}}},[a("el-form",{ref:"innerForm",attrs:{model:e.innerDialog.queryParams,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"新闻标题:",prop:"title"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInnerQuery(t)}},model:{value:e.innerDialog.queryParams.title,callback:function(t){e.$set(e.innerDialog.queryParams,"title",t)},expression:"innerDialog.queryParams.title"}})],1),a("el-form-item",{attrs:{label:"创建时间:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleInnerDateChange},model:{value:e.innerDialog.dateValue,callback:function(t){e.$set(e.innerDialog,"dateValue",t)},expression:"innerDialog.dateValue"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleInnerReset}},[e._v(" 重置 ")]),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary",size:"mini"},on:{click:e.handleInnerQuery}},[e._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerDialog.loading,expression:"innerDialog.loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"新闻ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"新闻标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.handleInnerChoose(t.row)}}},[e._v(" 选择 ")])]}}])})],1)],1),a("el-form",{ref:"addComments",attrs:{model:e.addDialog.form,rules:e.addDialog.rules,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"120px",label:"新闻标题",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"",autocomplete:"off",placeholder:"请选择新闻标题"},model:{value:e.addDialog.form.title,callback:function(t){e.$set(e.addDialog.form,"title",t)},expression:"addDialog.form.title"}}),a("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],attrs:{type:"primary"}},[e._v("选择新闻")])],1),a("el-form-item",{attrs:{"label-width":"120px",label:"评论昵称",prop:"nikeName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.addDialog.form.nikeName,callback:function(t){e.$set(e.addDialog.form,"nikeName",t)},expression:"addDialog.form.nikeName"}})],1),a("el-form-item",{attrs:{"label-width":"120px",label:"评论内容",prop:"remark"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.addDialog.form.remark,callback:function(t){e.$set(e.addDialog.form,"remark",t)},expression:"addDialog.form.remark"}})],1)],1)],1)],1)},i=[],r=a("5530"),o=a("1da1"),l=(a("96cf"),a("a9e3"),a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("d81d"),a("a15b"),a("7db0"),a("99af"),a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-common-search"},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:e.value,inline:""}},[e._l(e.lists,(function(t,n){return a("el-form-item",{key:n,attrs:{label:t.label+":",prop:t.key}},["input"===t.component?a("el-input",{attrs:{size:t.componentSize,placeholder:t.placeholder},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}}):e._e(),"select"===t.component?a("el-select",{attrs:{size:t.componentSize,placeholder:t.placeholder},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}},e._l(t.selectOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"daterange"===t.component?a("el-date-picker",{attrs:{size:t.componentSize,type:"daterange",align:"right","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.value[t.key],callback:function(a){e.$set(e.value,t.key,a)},expression:"value[list.key]"}}):e._e()],1)})),a("el-form-item",[e._t("action")],2)],2)],1)}),s=[],c={props:{lists:{type:Array,default:function(){return[]}},value:Object},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}}},u=c,d=(a("9fab"),a("2877")),p=Object(d["a"])(u,l,s,!1,null,"f5185a12",null),m=p.exports,f=a("0fea"),h=a("0191"),b=a("cc48"),g={name:"CommentVerify",components:{search:m},props:{newsId:{type:[String,Number],default:""}},data:function(){return{search:{sourceId:"",dataId:this.newsId,nickname:"",userId:"",status:"all",aduitStartTime:"",aduitEndTime:"",startTime:"",endTime:"",aduitTime:"",submitDate:"",pageSize:10,pageNo:1},searchLists:[{component:"select",componentSize:"small",placeholder:"请选择产品",label:"所属产品",selectOption:[],span:6,key:"sourceId"},{component:"input",componentSize:"small",placeholder:"请输入ID",label:"评论人ID",span:6,key:"userId"},{component:"select",componentSize:"small",placeholder:"请输入关键字",label:"状态",selectOption:[{label:"全部",value:"all"},{label:"待审核",value:0},{label:"审核通过",value:1},{label:"审核不通过",value:2}],span:6,key:"status"},{component:"daterange",componentSize:"small",placeholder:"请选择日期",label:"审核时间",span:8,key:"aduitTime"},{component:"daterange",componentSize:"small",placeholder:"请选择日期",label:"提交时间",span:8,key:"submitDate"},{component:"input",componentSize:"small",placeholder:"请输入评论人昵称",label:"评论人昵称",span:6,key:"nickname"}],tableDead:this.isMobile?[{label:"评论人",prop:"nickname",width:120,showOverflowTooltip:!1},{label:"评论内容",prop:"content",showOverflowTooltip:!0},{label:"状态",prop:"statusLabel",width:80,showOverflowTooltip:!1}]:[{label:"评论ID",prop:"id",width:80,showOverflowTooltip:!1},{label:"评论人",prop:"nickname",width:120,showOverflowTooltip:!1},{label:"评论内容",prop:"content",showOverflowTooltip:!0},{label:"所属新闻/帖子",prop:"dataTitle",hidden:!!this.newsId,showOverflowTooltip:!0},{label:"状态",prop:"statusLabel",width:80,showOverflowTooltip:!1},{label:"审核时间",prop:"aduitTime",width:120,showOverflowTooltip:!1},{label:"提交时间",prop:"creatTime",width:120,showOverflowTooltip:!1}].filter((function(e){return!e.hidden})),tableData:[],selection:[],loading:!1,page:{total:10},dialog:{show:!1,title:"回复",reply:{nikeName:"",remark:""},replyRules:{nikeName:{required:!0,message:"请输入昵称",trigger:"blur"},remark:{required:!0,message:"请输入备注",trigger:"blur"}}},addDialog:{show:!1,title:"新增评论",form:{title:"",nikeName:"",remark:""},rules:{title:{required:!0,message:"请选择新闻标题",trigger:"change"},nikeName:{required:!0,message:"请输入评论昵称",trigger:"blur"},remark:{required:!0,message:"请输入评论内容",trigger:"blur"}}},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},innerDialog:{show:!1,dateValue:"",loading:!1,queryParams:{startdate:"",enddate:"",page:1,pageSize:10}}}},computed:{site_id:function(){return this.$store.state.u_info.site_id},disabledBatchAction:function(){return 0===this.selection.length}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProductList();case 2:e.getList();case 3:case"end":return t.stop()}}),t)})))()},methods:{resetSearch:function(){var e,t=this.$refs.search.$refs.ruleForm;t.resetFields(),this.search.sourceId=null===(e=this.searchLists[0].selectOption[0])||void 0===e?void 0:e.value},handleQuery:function(){this.search.pageNo=1,this.getList()},handleSelectionChange:function(e){this.selection=e.map((function(e){return e.commentSn}))},getList:function(){var e=this,t=Object(r["a"])({},this.search);t.aduitTime&&(t.aduitStartTime=t.aduitTime[0],t.aduitEndTime=t.aduitTime[1]),t.submitDate&&(t.startTime=t.submitDate[0],t.endTime=t.submitDate[1]),delete t.aduitTime,delete t.submitDate,this.loading=!0,this.selection=[],Object(h["j"])(this.removePropertyOfNullFor0(t)).then((function(t){var a=t.data,n=a.totalCount,i=a.list;e.page.total=n;var o=i.map((function(e){return e.dataId})).join();Object(b["N"])({ids:o}).then((function(t){var a=t.data.reduce((function(e,t){return e[t.id]=t.title,e}),{});e.tableData=i.map((function(t){var n;return Object(r["a"])(Object(r["a"])({},t),{},{statusLabel:null===(n=e.searchLists[2].selectOption.find((function(e){return e.value===t.status})))||void 0===n?void 0:n.label,title:a[t.dataId]})}))}))})).finally((function(){e.loading=!1}))},closeDialog:function(){this.dialog.show=!1},enterDialog:function(){},handleDialogShow:function(e,t){Object.assign(this.dialog,{title:e,show:!0})},handleMsgAction:function(e){var t,a=this,n=e.userId,i=e.noTalkUser,o={sourceId:this.search.sourceId,userId:n};t=i?Object(h["v"])(o):Object(h["h"])(Object(r["a"])(Object(r["a"])({},o),{},{expiresIn:604800})),t.then((function(){a.$message.success(i?"取消禁言成功!":"禁言成功!"),a.getList()}))},handleAgreeOrRefused:function(e,t){var a=this,n="".concat(t,"/").concat(e.commentSn);Object(h["f"])(n).then((function(e){var t=e.code;t?(a.$message.success("操作成功!"),a.getList()):a.$message.error("操作失败!")}))},batchAgreeOrRefused:function(e){var t=this;Object(h["c"])({operateType:e,commentSnList:this.selection}).then((function(e){var a=e.code;200==a?(t.$message.success("批量操作成功!"),t.getList()):t.$message.error("批量操作失败!")}))},handleInnerDateChange:function(e){var t=e||["",""];this.innerDialog.queryParams.startdate=t[0],this.innerDialog.queryParams.enddate=t[1]},handleInnerQuery:function(){},handleInnerReset:function(){this.innerDialog.dateValue="",Object.assign(this.innerDialog.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("innerForm")},handleInnerChoose:function(e){},getProductList:function(){var e=this;return Object(f["jc"])({}).then((function(t){var a,n=t.data||[];e.searchLists[0].selectOption=n.map((function(e){return{label:e.name,value:e.source_id}})),e.search.sourceId=null===n||void 0===n||null===(a=n[0])||void 0===a?void 0:a.source_id}))}}},v=g,w=(a("b0de"),Object(d["a"])(v,n,i,!1,null,"137e3364",null));t["default"]=w.exports},"841c":function(e,t,a){"use strict";var n=a("d784"),i=a("825a"),r=a("1d80"),o=a("129f"),l=a("14c3");n("search",1,(function(e,t,a){return[function(t){var a=r(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,e,this);if(n.done)return n.value;var r=i(e),s=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var u=l(r,s);return o(r.lastIndex,c)||(r.lastIndex=c),null===u?-1:u.index}]}))},"9fab":function(e,t,a){"use strict";a("2880")},a3fc:function(e,t,a){},b0de:function(e,t,a){"use strict";a("a3fc")}}]);