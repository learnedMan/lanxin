(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0d9b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-tag-component"},[e._l(e.dynamicTags,(function(t,i){return a("el-tag",{key:i,attrs:{closable:!e.disabled,"disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"100px"},attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"mini"},on:{click:e.showInput}},[e._v("+ 新增")])],2)},n=[],o=(a("d81d"),a("1276"),a("ac1f"),a("a434"),a("a15b"),{props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{inputVisible:!1,inputValue:""}},computed:{dynamicTags:function(){return this.value&&this.value.split(",").map((function(e){return e}))||[]}},methods:{showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1),this.$emit("input",this.dynamicTags.join())},handleInputConfirm:function(){var e=this.inputValue;e&&(this.dynamicTags.push(e),this.$emit("input",this.dynamicTags.join())),this.inputVisible=!1,this.inputValue=""}}}),s=o,l=(a("fa92"),a("2877")),r=Object(l["a"])(s,i,n,!1,null,"4ef2eaa6",null);t["a"]=r.exports},"0e6b":function(e,t,a){},"156b":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-editor"},[a("vue-ueditor-wrap",{ref:"ueditor",attrs:{value:e.value,config:e.config,"editor-dependencies":e.editorDependencies,destroy:!0},on:{input:e.handleInput,"before-init":e.beforeInit,ready:e.handleReady}}),a("el-dialog",{attrs:{width:"900px",top:"20px",title:e.dialog.title,visible:e.dialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"上传日期:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleDateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),a("el-form-item",[a("el-checkbox",{attrs:{size:"small"},model:{value:e.isMy,callback:function(t){e.isMy=t},expression:"isMy"}},[e._v("只看我传的")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getList}},[e._v(" 搜索 ")])],1)],1)],1),a("div",{staticClass:"xl-editor-images"},[a("el-checkbox-group",{model:{value:e.dialog.checked,callback:function(t){e.$set(e.dialog,"checked",t)},expression:"dialog.checked"}},[a("ul",e._l(e.imgLists,(function(t,i){return a("li",{key:i},[a("div",{staticClass:"xl-editor-images-checked"},[a("el-checkbox",{attrs:{label:t.url}},[e._v(e._s(""))])],1),a("el-image",{staticClass:"xl-editor-images-style",attrs:{lazy:"",fit:"contain",src:t.url}}),a("div",{staticClass:"xl-editor-images-info"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),a("div",{staticClass:"xl-editor-images-name"},[e._v(e._s(t.description))])],1)})),0)])],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.dialogControl("cancel")}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogControl("confirm")}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{width:"1000px",top:"4vh",title:e.videoDialog.title,visible:e.videoDialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.videoDialog,"show",t)}}},[a("xl-video",{on:{"choose-url":e.videoDialogControl,choose:e.videoDialogChoose}})],1)],1)},o=[],s=a("5530"),l=(a("d3b7"),a("b0c0"),a("4de4"),a("a630"),a("3ca3"),a("caad"),a("2532"),a("ddb0"),a("d81d"),a("159b"),a("7db0"),a("a15b"),a("99af"),a("6625")),r=a.n(l),c=a("d242"),u=a("cc48"),d={components:{VueUeditorWrap:r.a,xlVideo:c["a"]},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},watermark:{type:String,default:""},position:{type:String,default:""}},data:function(){return{config:Object.assign({UEDITOR_HOME_URL:"/UEditor/",initialFrameWidth:"100%",initialFrameHeight:200,serverUrl:"/laravel-u-editor-server/server",autoHeightEnabled:!0,enableAutoSave:!1,readonly:this.disabled},this.isMobile?{toolbars:[["bold","italic","underline","|","forecolor","backcolor","|","fontfamily","fontsize","|","justifyleft","justifycenter","justifyright","justifyjustify","|","simpleupload"]]}:{toolbars:[["source","|","undo","redo","|","bold","italic","underline","strikethrough","superscript","subscript","removeformat","formatmatch","|","forecolor","backcolor","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","fontfamily","fontsize","|","justifyleft","justifycenter","justifyright","justifyjustify","|","link","unlink","|","simpleupload","insertimage","imglist","attachment","|","searchreplace","|","fullscreen"]]}),editorDependencies:["ueditor.config.js","ueditor.all.js"],dialog:{title:"从图库中选择",show:!1,checked:[]},imgLists:[],queryParams:{pageSize:10,page:1,type:"image",keyword:"",startdate:"",enddate:""},isMy:!1,total:0,dateValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},editor:"",videoDialog:{title:"选择视频",show:!1}}},beforeDestroy:function(){i=null},created:function(){var e=this;this.$once("getImgLists",(function(){e.getList()}))},methods:{handleDateChange:function(e){var t=e||["",""];this.queryParams.startdate=t[0],this.queryParams.enddate=t[1]},setPosition:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.15,i=Math.floor(e*a),n=Math.floor(t*a),o={};switch(this.position){case"nw":o={left:0,top:0};break;case"north":o={left:Math.floor(e/2-i/2),top:0};break;case"ne":o={left:Math.floor(e-i),top:0};break;case"west":o={left:0,top:Math.floor(t/2-n/2)};break;case"center":o={left:Math.floor(e/2-i/2),top:Math.floor(t/2-n/2)};break;case"east":o={left:Math.floor(e-i),top:Math.floor(t/2-n/2)};break;case"sw":o={left:0,top:Math.floor(t-n)};break;case"south":o={left:Math.floor(e/2-i/2),top:Math.floor(t-n)};break;case"se":o={left:Math.floor(e-i),top:Math.floor(t-n)}}return Object(s["a"])(Object(s["a"])({},o),{},{width:i,height:n})},generateCanvas:function(e){var t=this;return new Promise((function(a){var i=e.src,n=new Image;n.src=i,n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){var e=n.width,o=n.height,s=document.createElement("canvas");s.width=e,s.height=o;var l=s.getContext("2d");l.drawImage(n,0,0,e,o);var r=new Image;r.src=t.watermark,r.crossOrigin="Anonymous",r.onload=function(){var n=t.setPosition(e,o);l.drawImage(r,n.left,n.top,n.width,n.height),s.toBlob((function(e){var t=new File([e],"".concat((new Date).getTime(),".png"),{type:"image/png"}),n=new FormData;n.append("image",t,t.name),Object(u["G"])({url:"/api/upload/image",method:"post",data:n}).then((function(e){var t=e.path,n=e.status_code;200===n&&a({now:t,old:i})}))}),"image/png")},r.onerror=function(){a({now:"",old:i})}}}))},handleInput:function(e){var t=this,a=e,i=document.createElement("div");i.innerHTML=a;var n=Array.from(i.querySelectorAll("img")).filter((function(e){return!e.className.includes("loadingclass")&&!e.dataset.canvas}));n.length&&this.watermark&&this.position?Promise.all(n.map((function(e){return t.generateCanvas(e)}))).then((function(e){n.forEach((function(t){var a=e.find((function(e){return e.old===t.src}));a&&(t.src=a.now,t.setAttribute("data-canvas","1"))})),t.$emit("input",i.innerHTML)})).catch((function(e){console.log(e)})):this.$emit("input",e)},beforeInit:function(e){var t=this;this.isMobile||this.disabled||(e,window.UE.registerUI("135editor",(function(e,t){var a;function i(t){"string"===typeof t.data?0===t.data.indexOf("<")&&(e.setContent(t.data),e.fireEvent("catchRemoteImage"),window.removeEventListener("message",i)):t.data.ready&&a.postMessage(e.getContent(),"*")}var n=new window.UE.ui.Button({name:"btn-dialog-"+t,cssRules:'background-image: url("http://static.135editor.com/img/icons/editor-135-icon.png") !important;background-size: 85%;background-position: center;background-repeat: no-repeat;',title:"135编辑器",onclick:function(){a=window.open("https://www.135editor.com/simple_editor.html?callback=true&appkey="),window.removeEventListener("message",i),window.addEventListener("message",i,!1)}});return n}),void 0,e),window.UE.registerUI("videoList",(function(e,a){var i=new window.UE.ui.Button({name:"btn-dialog-"+a,cssRules:"background-position: -320px -20px;",title:"视频列表",onclick:function(){t.videoDialog.show=!0}});return i}),void 0,e))},handleReady:function(e){var t=this;this.isMobile||e.registerCommand("imglist",{execCommand:function(){t.dialog.show=!0,t.$emit("getImgLists")}}),i=e},dialogControl:function(e){var t=this.dialog.checked.map((function(e){return'<img src="'.concat(e,'" />')}));this.dialog.show=!1,this.dialog.checked=[],"confirm"===e&&t.length&&i.execCommand("insertHtml",t.join(""))},videoDialogControl:function(e){var t='<p><video style="width:300px;display:inline-block;" title="'.concat(e.title,'" poster="').concat(e.cover,'" class="" controls="" preload="none" width="420" src="').concat(e.url,'" data-setup="{}">\n                  <source src="').concat(e.url,'" type="video/mp4"/>\n              </video>&nbsp;</p><b style=\'display:none;\'>.</b>');i.execCommand("insertHtml",t),this.videoDialog.show=!1},videoDialogChoose:function(e){this.$emit("changeVideoList",e)},getList:function(){var e=this,t=Object(s["a"])({},this.queryParams);Object(u["r"])(this.removePropertyOfNull(t),this.isMy).then((function(t){e.imgLists=t.data,e.total=t.total}))}}},p=d,m=(a("7cba"),a("2877")),h=Object(m["a"])(p,n,o,!1,null,null,null);t["a"]=h.exports},"1ef3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-table"},[a("el-table",{ref:"sortTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("cropper",{attrs:{"has-upload-again":!1,"has-remove":!1,"show-tip":!1,value:e.parseObj(t.row.path)},on:{input:function(a){return e.handleCropper(a,t.row)},changeCropper:function(a){return e.changeCropper(a,t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"table-textarea",staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:"请输入图片描述",rows:4,clearable:"",size:"small"},model:{value:t.row.intro,callback:function(a){e.$set(t.row,"intro",a)},expression:"scope.row.intro"}})]}}])}),a("el-table-column",{attrs:{label:"权重",prop:"sort"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.handleDelete(t.$index)}}},[e._v(" 删除 ")])]}}])})],1),a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{name:"image",action:e.actionUrl,headers:e.uploadHeader,"show-file-list":!1,"on-success":e.handleSuccess,multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("本地上传")])],1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleImgLists}},[e._v("图库选择")]),a("el-dialog",{attrs:{width:"900px",top:"20px",title:e.dialog.title,visible:e.dialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"上传日期:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleDateChange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),a("el-form-item",[a("el-checkbox",{attrs:{size:"small"},model:{value:e.isMy,callback:function(t){e.isMy=t},expression:"isMy"}},[e._v("只看我传的")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getList}},[e._v(" 搜索 ")])],1)],1)],1),a("div",{staticClass:"xl-table-images"},[a("el-checkbox-group",{model:{value:e.dialog.checked,callback:function(t){e.$set(e.dialog,"checked",t)},expression:"dialog.checked"}},[a("ul",e._l(e.imgLists,(function(t,i){return a("li",{key:i},[a("div",{staticClass:"xl-table-images-checked"},[a("el-checkbox",{attrs:{label:t.url}},[e._v(e._s(""))])],1),a("el-image",{staticClass:"xl-table-images-style",attrs:{fit:"contain",lazy:"",src:t.url}}),a("div",{staticClass:"xl-table-images-info"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),a("div",{staticClass:"xl-table-images-name"},[e._v(e._s(t.description))])],1)})),0)])],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.dialogControl("cancel")}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogControl("confirm")}}},[e._v(" 确 定 ")])],1)],1)],1)},n=[],o=a("5530"),s=(a("4de4"),a("caad"),a("2532"),a("d81d"),a("a434"),a("b0c0"),a("159b"),a("53fe")),l=a.n(s),r=a("b49d"),c=a("cc48"),u={components:{Cropper:r["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{dialog:{title:"从图库中选择",show:!1,checked:[]},imgLists:[],queryParams:{pageSize:10,page:1,type:"image",keyword:"",startdate:"",enddate:""},isMy:!1,total:0,dateValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},computed:{actionUrl:function(){return this.imgurl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}},tableData:function(){return this.value}},methods:{getList:function(){var e=this,t=Object(o["a"])({},this.queryParams);Object(c["r"])(this.removePropertyOfNull(t),this.isMy).then((function(t){e.imgLists=t.data,e.total=t.total}))},handleDateChange:function(e){var t=e||["",""];this.queryParams.startdate=t[0],this.queryParams.enddate=t[1]},handleImgLists:function(){this.dialog.show=!0,this.getList()},dialogControl:function(e){var t=this,a=this.dialog.checked,i=this.imgLists.filter((function(e){return a.includes(e.url)}));if(this.dialog.show=!1,this.dialog.checked=[],"confirm"===e&&a.length){var n,o=(null===(n=this.value[this.value.length-1])||void 0===n?void 0:n.sort)||0;i.map((function(e,a){t.value.push({path:e.url,intro:e.title,sort:o+a+1})})),this.initSort()}},parseObj:function(e){return[{path:e}]},handleCropper:function(e,t){var a,i=(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.path)||"";t.path=i},changeCropper:function(e,t){t.path=e},handleDelete:function(e){this.value.splice(e,1)},handleSuccess:function(e,t,a){if(200===e.status_code){var i,n,o=(null===(i=this.value[this.value.length-1])||void 0===i?void 0:i.sort)||0,s=null===(n=a[a.length-1])||void 0===n?void 0:n.uid;this.value.push({path:e.path,intro:t.name,sort:o+1}),t.uid===s&&(a=[],this.initSort())}},initSort:function(){var e=this,t=this.$refs.sortTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];l.a.create(t,{ghostClass:"sortable-ghost",onEnd:function(t){var a=t.newIndex,i=t.oldIndex,n=e.value.map((function(e){return Object(o["a"])({},e)})),s=n.splice(i,1)[0];a>i?n.splice(a-1,0,s):n.splice(a,0,s),n.forEach((function(e,t){e.sort=t+1})),e.$emit("input",[]),e.$nextTick((function(){e.$emit("input",n)}))}})}}},d=u,p=(a("7dcf"),a("2877")),m=Object(p["a"])(d,i,n,!1,null,null,null);t["a"]=m.exports},"3d6c":function(e,t,a){"use strict";a("bd1c")},"5ef8":function(e,t,a){},6783:function(e,t,a){"use strict";a("8658")},"705f":function(e,t,a){},"7cba":function(e,t,a){"use strict";a("cd78")},"7dcf":function(e,t,a){"use strict";a("f58c")},8658:function(e,t,a){},"90ba":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-script-select"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDialog}},[e._v("新增新闻")]),a("ul",{staticClass:"xl-script-select--lists"},e._l(e.chooseList,(function(t,i){return a("li",{key:t.id},[a("p",[e._v(e._s(t.title))]),e.disabled?e._e():a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){return e.deleteScript(i)}}})])})),0),a("el-dialog",{attrs:{width:"1000px",top:"5vh",title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"新闻标题:",prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),a("el-form-item",{attrs:{label:"创建时间:",prop:"dateValue"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.handleDateChange},model:{value:e.queryParams.dateValue,callback:function(t){e.$set(e.queryParams,"dateValue",t)},expression:"queryParams.dateValue"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleReset}},[e._v(" 重置 ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleQuery}},[e._v(" 搜索 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"新闻标题",align:"center",prop:"title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"created_at","show-overflow-tooltip":!0}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v(" 确 定 ")])],1)],1)],1)},n=[],o=a("5530"),s=(a("a15b"),a("d81d"),a("caad"),a("2532"),a("a434"),a("c740"),a("d3b7"),a("4de4"),a("cc48")),l={props:{value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{lists:[],chooseList:[],dialog:{title:"选择新闻",show:!1},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},queryParams:{dateValue:"",startdate:"",enddate:"",status:1,page:1,pageSize:10},total:0,tableData:[],loading:!1}},watch:{value:{handler:function(e){var t=e.join();t&&!this.lists.length&&this.initLists(t)},immediate:!0}},methods:{initLists:function(e){var t=this;Object(s["w"])({ids:e}).then((function(e){t.lists=e.data.map((function(e){return e})),t.chooseList=e.data.map((function(e){return e}))}))},handleDateChange:function(e){var t=e||["",""];this.queryParams.startdate=t[0],this.queryParams.enddate=t[1]},handleReset:function(){Object.assign(this.queryParams,{startdate:"",enddate:"",page:1}),this.resetForm("queryForm")},handleQuery:function(){this.getList()},showDialog:function(){this.dialog.show=!0,this.getList()},handleSelectionChange:function(e){var t=this,a=e.map((function(e){return e.id})),i=this.lists.map((function(e){return e.id}));this.tableData.map((function(e){a.includes(e.id)&&!i.includes(e.id)?t.lists.unshift(e):!a.includes(e.id)&&i.includes(e.id)&&t.lists.splice(t.lists.findIndex((function(t){return t.id===e.id})),1)}))},deleteScript:function(e){this.lists.splice(e,1),this.chooseList=this.lists.map((function(e){return e})),this.$emit("input",this.lists.map((function(e){return e.id})))},getList:function(){var e=this;this.loading=!0,this.tableData=[];var t=Object(o["a"])({},this.queryParams);Object(s["w"])(this.removePropertyOfNull(t)).then((function(t){e.tableData=t.data||[],e.total=t.total,e.setSelectRow(e.tableData)})).finally((function(){e.loading=!1}))},setSelectRow:function(e){var t=this;e&&this.$nextTick((function(){e.filter((function(e){return t.value.includes(e.id)})).map((function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)}))}))},enterDialog:function(){this.chooseList=this.lists.map((function(e){return e})),this.$emit("input",this.lists.map((function(e){return e.id}))),this.dialog.show=!1}}},r=l,c=(a("d2a6"),a("2877")),u=Object(c["a"])(r,i,n,!1,null,"13133e26",null);t["a"]=u.exports},a0ca:function(e,t,a){"use strict";a("5ef8")},b49d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-cropper"},[a("ul",{staticClass:"xl-cropper-ul"},e._l(e.fileLists,(function(t,i){return a("li",{key:i,staticClass:"xl-cropper-li"},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.count>=i+1,expression:"count >= index + 1"}],ref:"uploader",refInFor:!0,staticClass:"xl-cropper-uploader",attrs:{disabled:e.disabled,action:e.actionUrl,"show-file-list":!1,name:"image",accept:"image/jpeg,image/png,image/gif",headers:e.uploadHeader,"on-success":e.handleUploadImageSuccess(i),"on-error":e.handleUploadImageError,"before-upload":e.beforeUpload,"on-exceed":e.handleOnExceed}},[a("i",{directives:[{name:"show",rawName:"v-show",value:""===t.path,expression:"list.path === ''"}],staticClass:"el-icon-plus"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.path,expression:"list.path"}],staticStyle:{"line-height":"98px",height:"100%"},on:{click:function(e){e.stopPropagation()}}},[a("el-image",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.path,fit:"contain"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:"success"===t.status,expression:"list.status === 'success'"}],staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"xl-cropper-icon",on:{click:function(a){return e.handlePictureCardPreview(t)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.hasUploadAgain,expression:"!disabled && hasUploadAgain"}],staticClass:"xl-cropper-icon",on:{click:function(t){return e.handleUpload(i)}}},[a("i",{staticClass:"el-icon-upload"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],staticClass:"xl-cropper-icon",on:{click:function(a){return e.handleShear(t,i)}}},[a("i",{staticClass:"el-icon-scissors"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.hasRemove,expression:"!disabled && hasRemove"}],staticClass:"xl-cropper-icon",on:{click:function(t){return e.handleRemove(i)}}},[a("i",{staticClass:"el-icon-delete"})])])],1)])],1)})),0),e.showTip?a("div",{staticClass:"xl-cropper-tip"},[e._v("上传封面,建议尺寸 750*420,单个图片不超过10M!")]):e._e(),a("el-dialog",{attrs:{width:"600px",title:e.dialog.title,visible:e.dialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("div",{staticClass:"xl-cropper-box"},[a("div",{staticClass:"xl-cropper-box-left"},[a("vueCropper",{ref:"cropper",attrs:{img:e.option.img,"output-size":e.option.size,"output-type":e.option.outputType,info:!0,full:e.option.full,"can-move":e.option.canMove,"can-move-box":e.option.canMoveBox,original:e.option.original,"auto-crop":e.option.autoCrop,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,"fixed-box":e.option.fixedBox,"fixed-number":e.option.fixedNumber,fixed:e.option.fixed,"info-true":e.option.infoTrue}})],1),a("div",{staticClass:"xl-cropper-box-right"},[a("el-radio-group",{staticClass:"radio-select",on:{change:e.proportionChange},model:{value:e.proportionVal,callback:function(t){e.proportionVal=t},expression:"proportionVal"}},e._l(e.proportion,(function(t,i){return a("el-radio",{key:i,staticClass:"radio-select-item",attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)]),a("div",{staticClass:"xl-cropper-footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.bigImgDialog.show,"append-to-body":""},on:{"update:visible":function(t){return e.$set(e.bigImgDialog,"show",t)}}},[a("img",{attrs:{width:"100%",src:e.bigImgDialog.path,alt:""}})])],1)},n=[],o=a("5530"),s=(a("a9e3"),a("d81d"),a("a630"),a("3ca3"),a("b0c0"),a("7db0"),a("caad"),a("2532"),a("a15b"),a("d3b7"),a("7e79")),l=a("cc48"),r={components:{VueCropper:s["VueCropper"]},props:{value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},count:{type:[Number,String],default:1},showTip:{type:Boolean,default:!0},hasRemove:{type:Boolean,default:!0},hasUploadAgain:{type:Boolean,default:!0}},data:function(){return{dialog:{title:"裁剪",show:!1},bigImgDialog:{show:!1,path:""},option:{img:a("3f1e"),outputSize:1,outputType:"png",full:!1,canMove:!1,original:!1,canMoveBox:!0,autoCrop:!0,fixedBox:!1,autoCropWidth:686,autoCropHeight:180,maxImgSize:"2000",fixed:!0,fixedNumber:[16,9],infoTrue:!0,mode:"contain"},proportion:[{label:"16:9",value:1,option:{fixed:!0,full:!1,fixedBox:!1,fixedNumber:[16,9]}},{label:"4:3",value:2,option:{fixed:!0,full:!1,fixedBox:!1,fixedNumber:[4,3]}},{label:"10:14.2",value:3,option:{fixed:!0,full:!1,fixedBox:!1,fixedNumber:[10,14.269]}},{label:"蓝媒视频竖屏",value:4,option:{fixed:!0,full:!1,fixedBox:!1,fixedNumber:[10,15.5]}},{label:"自定义",value:5,option:{fixed:!1,fixedBox:!0,full:!1}},{label:"不剪切",value:6,option:{fixedBox:!1,full:!0}}],proportionVal:1}},computed:{fileLists:function(){var e=this;return Array.from({length:3}).map((function(t,a){return e.value[a]&&e.value[a].path?Object.assign(e.value[a],{status:"success"}):{path:""}}))},actionUrl:function(){return this.imgurl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}}},methods:{handleUpload:function(e){this.$refs.uploader[e].$refs["upload-inner"].$refs.input.click()},uploadImgFn:function(e){var t=new FormData;return t.append(e.filename,e.file,e.file.name),Object(l["G"])({url:e.action,method:"post",data:t})},handleOnExceed:function(){this.$message.warning("图片上传超出限制!")},beforeUpload:function(e){var t=e.size/1024/1024<=10,a=["jpeg","gif","png"],i=a.find((function(t){return e.type.includes(t)}));i||this.$message.error("上传图片只能是 ".concat(a.join()," 格式!")),t||this.$message.error("上传图片大小不能超过 10MB!");var n=i&&t;return n},handleUploadImageSuccess:function(e){var t=this;return function(a,i,n){a.status_code>=200&&a.status_code<300?(t.$message.success("图片上传成功!"),Object.assign(t.fileLists[e],{intro:"",path:a.path})):(t.$message.error("图片上传失败!"),Object.assign(t.fileLists[e],{intro:"",path:""}),n.length=0),t.$emit("input",t.fileLists)}},handleUploadImageError:function(){this.$message.error("图片上传失败!")},handleRemove:function(e){this.fileLists[e].path="",this.$emit("input",this.fileLists)},handlePictureCardPreview:function(e){this.bigImgDialog={show:!0,path:e.path}},imgToBase64:function(e){return new Promise((function(t,a){var i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var a=e.getContext("2d");a.drawImage(i,0,0,i.width,i.height);var n=i.src.substring(i.src.lastIndexOf(".")+1).toLowerCase(),o=e.toDataURL("image/"+n);t(o)},i.onerror=function(){a()}}))},handleShear:function(e,t){this.option.img=e.path,Object.assign(this.dialog,{show:!0,index:t})},proportionChange:function(e){var t=this.proportion.find((function(t){return e===t.value}));this.option.autoCropWidth=Math.random()+686,this.$set(this,"option",Object(o["a"])(Object(o["a"])({},this.option),t.option))},closeDialog:function(){this.dialog.show=!1},enterDialog:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var a=new File([t],"".concat((new Date).getTime(),".png"),{type:t.type});e.uploadImgFn({action:"/api/upload/image",filename:"image",file:a}).then((function(t){t.status_code>=200&&t.status_code<300&&(e.fileLists[e.dialog.index].path=t.path,e.$emit("changeCropper",t.path),e.dialog.show=!1)}))}))}}},c=r,u=(a("fa7f"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["a"]=d.exports},bd1c:function(e,t,a){},cd78:function(e,t,a){},cfff:function(e,t,a){},d242:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-video"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"xl-video-tab",attrs:{label:"vms视频库",name:"0"}},[e.showVmsChannel?a("xl-menu",{attrs:{menus:e.vmsChannel,"active-menu":e.vmsParams.defaultActive},on:{select:function(t){return e.menuChange(t,"vmsParams")}}}):e._e(),a("div",{staticClass:"xl-video-tab--content"},[a("el-form",{attrs:{model:e.vmsParams,inline:!0}},[a("el-form-item",{attrs:{prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getVideoList("vmsParams")}},model:{value:e.vmsParams.keyword,callback:function(t){e.$set(e.vmsParams,"keyword",t)},expression:"vmsParams.keyword"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.handleDateChange(t,"vmsParams")}},model:{value:e.vmsParams.dateValue,callback:function(t){e.$set(e.vmsParams,"dateValue",t)},expression:"vmsParams.dateValue"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getVideoList("vmsParams")}}},[e._v(" 搜索 ")])],1)],1),a("ul",{staticClass:"xl-video-tab--content-ul"},e._l(e.vmsVideo,(function(t,i){return a("li",{key:i,staticClass:"xl-video-tab--content-li"},[a("h4",[e._v(e._s(t.title))]),a("video",{attrs:{height:"200",controls:"",preload:"metadata",poster:t.cover}},[a("source",{attrs:{src:t.customObj.url,type:"video/"+t.customObj.type}}),e._v(" 您的浏览器不支持 HTML5 video 标签。 ")]),a("div",{staticClass:"bottom"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleChoose(t)}}},[e._v("选择")]),a("el-dropdown",{attrs:{size:"mini"},on:{command:function(a){return e.changeVideo(a,t)}}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" "+e._s(t.customObj.label)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.customObj.arr,(function(t,i){return a("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(t.label))])})),1)],1)],1)])})),0),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.vmsParams.total>0,expression:"vmsParams.total > 0"}],attrs:{total:e.vmsParams.total,page:e.vmsParams.page,limit:e.vmsParams.pageSize},on:{"update:page":function(t){return e.$set(e.vmsParams,"page",t)},"update:limit":function(t){return e.$set(e.vmsParams,"pageSize",t)},pagination:function(t){return e.getVideoList("vmsParams")}}})],1)],1),a("el-tab-pane",{staticClass:"xl-video-tab",attrs:{label:"蓝云视频库",name:"1"}},[e.showXlChannel?a("xl-menu",{attrs:{menus:e.xlChannel,"active-menu":e.xlParams.defaultActive},on:{select:function(t){return e.menuChange(t,"xlParams")}}}):e._e(),a("div",{staticClass:"xl-video-tab--content"},[a("el-form",{attrs:{model:e.xlParams,inline:!0}},[a("el-form-item",{attrs:{prop:"keyword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getVideoList("xlParams")}},model:{value:e.xlParams.keyword,callback:function(t){e.$set(e.xlParams,"keyword",t)},expression:"xlParams.keyword"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"~","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:function(t){return e.handleDateChange(t,"xlParams")}},model:{value:e.xlParams.dateValue,callback:function(t){e.$set(e.xlParams,"dateValue",t)},expression:"xlParams.dateValue"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getVideoList("xlParams")}}},[e._v(" 搜索 ")])],1)],1),a("ul",{staticClass:"xl-video-tab--content-ul"},e._l(e.xlVideo,(function(t,i){return a("li",{key:i,staticClass:"xl-video-tab--content-li"},[a("h4",[e._v(e._s(t.title))]),a("video",{attrs:{height:"200",controls:"",preload:"metadata",poster:t.cover}},[a("source",{attrs:{src:t.customObj.url,type:"video/"+t.customObj.type}}),e._v(" 您的浏览器不支持 HTML5 video 标签。 ")]),a("div",{staticClass:"bottom"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleChoose(t)}}},[e._v("选择")]),a("el-dropdown",{attrs:{size:"mini"},on:{command:function(a){return e.changeVideo(a,t)}}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" "+e._s(t.customObj.label)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.customObj.arr,(function(t,i){return a("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(t.label))])})),1)],1)],1)])})),0),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.vmsParams.total>0,expression:"vmsParams.total > 0"}],attrs:{total:e.vmsParams.total,page:e.vmsParams.page,limit:e.vmsParams.pageSize},on:{"update:page":function(t){return e.$set(e.vmsParams,"page",t)},"update:limit":function(t){return e.$set(e.vmsParams,"pageSize",t)},pagination:function(t){return e.getVideoList("vmsParams")}}})],1)],1)],1)],1)},n=[],o=a("2909"),s=a("5530"),l=(a("b0c0"),a("d81d"),a("cc48")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xl-component-menu"},[a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("el-menu",{attrs:{"default-active":e.activeMenu},on:{select:e.handleSelect}},e._l(e.menus,(function(e){return a("menu-item",{key:e.id,attrs:{item:e}})})),1)],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.item.children?a("el-submenu",{attrs:{index:e.item.id+""}},[a("template",{slot:"title"},[a("span",[e._v(e._s(e.item.name))])]),e._l(e.item.children,(function(e){return a("menu-item",{key:e.id,attrs:{item:e}})}))],2):[a("el-menu-item",{attrs:{index:e.item.id+""}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.name))])])]],2)},d=[],p={name:"menuItem",props:{item:{type:Object,required:!0}},data:function(){return{}}},m=p,h=a("2877"),f=Object(h["a"])(m,u,d,!1,null,"0a3ca20a",null),g=f.exports,v={props:{menus:{type:Array,default:function(){return[]}},activeMenu:{type:String,default:"0"}},components:{menuItem:g},methods:{handleSelect:function(e){this.$emit("select",e)}}},b=v,y=(a("3d6c"),Object(h["a"])(b,r,c,!1,null,"2cad2344",null)),w=y.exports,x={components:{xlMenu:w},data:function(){return{activeName:"0",vmsChannel:[],vmsVideo:[],xlChannel:[],xlVideo:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},vmsParams:{keyword:"",startdate:"",enddate:"",dateValue:"",cloud:0,vms_channel_id:"",defaultActive:"",page:1,pageSize:10,total:0},xlParams:{keyword:"",startdate:"",enddate:"",dateValue:"",cloud:1,vms_channel_id:"",defaultActive:"",page:1,pageSize:10,total:0}}},computed:{site_id:function(){return this.$store.state.user.u_info.site_id},showVmsChannel:function(){return 0!==this.vmsChannel.length},showXlChannel:function(){return 0!==this.xlChannel.length}},methods:{getDefaultActive:function(e){return e?e.children?this.getDefaultActive(e.children[0]):e.id+"":""},handleDateChange:function(e,t){var a=e||["",""];this[t].startdate=a[0],this[t].enddate=a[1]},menuChange:function(e,t){this[t].vms_channel_id=e,this.getVideoList(t)},handleClick:function(e){this.getVideoChannel(e.name)},changeVideo:function(e,t){Object.assign(t.customObj,{label:e.label,url:e.path})},handleChoose:function(e){var t=Object(s["a"])({},e),a={url:t.customObj.url,type:t.customObj.type,cover:t.cover,title:t.title};delete t.customObj,this.$emit("choose",t),this.$emit("choose-url",a)},getVideoChannel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(l["B"])({cloud:t}).then((function(a){t?(e.xlChannel=a,e.xlParams.defaultActive=e.getDefaultActive(a[0])):(e.vmsChannel=a,e.vmsParams.defaultActive=e.getDefaultActive(a[0])),e.getVideoList(t?"xlParams":"vmsParams")}))},getVideoList:function(e){var t,a=this;t=Object(s["a"])({},this[e]),delete t.dateValue,delete t.total,delete t.defaultActive,t.site_id=this.site_id;var i=["超清","高清","普清","模糊"];Object(l["C"])(t).then((function(t){var n=t.data.map((function(e){var t,a,n=e.item_list.sort((function(e,t){return t.rate-e.rate})).map((function(e,t){return Object(s["a"])(Object(s["a"])({},e),{},{label:i[t]})}));return Object(s["a"])(Object(s["a"])({},e),{},{customObj:{cover:e.cover,url:null===(t=n[0])||void 0===t?void 0:t.path,type:null===(a=n[0])||void 0===a?void 0:a.format,label:"超清",arr:n}})})),l=t.total;"vmsParams"===e?a.vmsVideo=Object(o["a"])(n):a.xlVideo=n,a[e].total=l}))}},created:function(){this.getVideoChannel()}},k=x,C=(a("6783"),Object(h["a"])(k,i,n,!1,null,null,null));t["a"]=C.exports},d2a6:function(e,t,a){"use strict";a("0e6b")},e60d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"xl-avatar-uploader",attrs:{name:"image",accept:"image/jpeg,image/png,image/gif",action:e.actionUrl,headers:e.uploadHeader,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.value?a("div",{staticClass:"img-box"},[a("img",{staticClass:"avatar",attrs:{src:e.value}}),e.delBtn?a("div",{staticClass:"img-box-hover"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.$emit("input","")}}})]):e._e()]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},n=[],o=(a("7db0"),a("caad"),a("2532"),a("a15b"),{props:{value:{type:String,default:""},delBtn:{type:Boolean,default:!0}},computed:{actionUrl:function(){return this.imgurl},uploadHeader:function(){var e=sessionStorage.getItem("token");return{Authorization:e}}},methods:{handleAvatarSuccess:function(e,t,a){e.status_code>=200&&e.status_code<300?(this.$message.success("图片上传成功!"),this.$emit("input",e.path)):(this.$message.error("图片上传失败!"),a.length=0)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<=10,a=["jpeg","gif","png"],i=a.find((function(t){return e.type.includes(t)}));i||this.$message.error("上传图片只能是 ".concat(a.join()," 格式!")),t||this.$message.error("上传图片大小不能超过 10MB!");var n=i&&t;return n}}}),s=o,l=(a("a0ca"),a("2877")),r=Object(l["a"])(s,i,n,!1,null,null,null);t["a"]=r.exports},f58c:function(e,t,a){},fa7f:function(e,t,a){"use strict";a("cfff")},fa92:function(e,t,a){"use strict";a("705f")}}]);