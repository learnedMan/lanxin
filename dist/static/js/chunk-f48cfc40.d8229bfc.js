(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f48cfc40"],{"200e":function(e,t,n){"use strict";n("4f9e")},"231d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xl-preview-script"},[n("h3",[e._v(e._s(e.detail.title))]),n("p",{staticClass:"xl-preview-script--url"},[n("span",[e._v(e._s(this.url))]),n("el-button",{directives:[{name:"points",rawName:"v-points",value:1500,expression:"1500"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-copy-document",size:"small"},on:{click:e.copyText}},[e._v("复制链接")])],1),n("el-tabs",{attrs:{type:"card"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("el-tab-pane",{attrs:{label:"手机预览",name:"phone"}},[n("div",{staticClass:"xl-preview-script--box"},[e.flag?n("div",{staticClass:"xl-preview-script--phone"},[n("iframe",{staticStyle:{height:"100%"},attrs:{src:e.returnurl(),frameborder:"0"}})]):e._e(),n("div",{staticStyle:{"margin-left":"20px","text-align":"center"}},[n("canvas",{ref:"canvas",attrs:{id:"canvas",width:"200",height:"200"}}),n("p",[e._v("使用扫一扫，在手机上预览")])])])]),n("el-tab-pane",{attrs:{label:"电脑预览",name:"computed"}},[e._v(" 电脑预览 ")])],1)],1)},a=[],c=(n("99af"),n("ac1f"),n("5319"),n("cc48")),s=n("c24f"),o=n("d055"),r=n.n(o),l={name:"Preview",data:function(){return{flag:!1,token:"",url:"",detail:{title:""},tab:"phone"}},computed:{id:function(e){var t=e.$route;return t.query.id},type:function(e){var t=e.$route;return t.query.type},previewDomin:function(e){var t=e.$store.state.user.u_info.site.extra;return t.preview_domain}},methods:{returnurl:function(){var e=sessionStorage.getItem("token");return this.previewDomin||this.$message.warning("站点未配置预览域名，请联系管理员去站点管理页面配置"),"".concat(this.previewDomin,"?id=").concat(this.id,"&type=").concat(this.type,"&token=").concat(e)},getToken:function(){var e=this;Object(s["b"])().then((function(t){console.log("预览token",t),e.token=t.access_token;var n=e.previewDomin;n||e.$message.warning("站点未配置预览域名，请联系管理员去站点管理页面配置"),e.url="".concat(e.previewDomin,"?id=").concat(e.id,"&type=").concat(e.type,"&token=").concat(e.token),e.makeQRCode()}))},getList:function(){var e,t=this;e="news"===this.type?Object(c["M"])(this.id):Object(c["O"])(this.id),e.then((function(e){t.detail=e}))},copyText:function(){var e=this.url;console.log("text",e);var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$message.success("复制成功!")},replaceStr:function(e,t){var n=e.replace(/\s+/g,t);return n},makeQRCode:function(){this.flag=!0,r.a.toCanvas(this.$refs.canvas,this.url,{width:200,height:200},(function(e){e?console.error(e):console.log("success")}))}},mounted:function(){},created:function(){this.getToken(),this.getList()}},u=l,p=(n("200e"),n("2877")),d=Object(p["a"])(u,i,a,!1,null,"4eb99350",null);t["default"]=d.exports},"4f9e":function(e,t,n){}}]);